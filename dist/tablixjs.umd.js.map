{"version":3,"file":"tablixjs.umd.js","sources":["../src/core/DataManager.js","../src/core/Renderer.js","../src/core/EventManager.js","../src/core/PaginationManager.js","../src/core/SortingManager.js","../src/core/ColumnManager.js","../src/core/FilterManager.js","../src/core/FilterUI.js","../src/core/SearchManager.js","../src/core/SelectionManager.js","../src/core/VirtualScroll.js","../src/core/Localization.js","../src/core/StateManager.js","../src/locales/fr.js","../src/locales/es.js","../src/locales/sr.js","../src/core/Table.js","../src/index.js"],"sourcesContent":["export default class DataManager {\r\n  constructor(table, data = []) {\r\n    this.table = table;\r\n    this.originalData = data;   // full data set\r\n    this.filteredData = [...data];  // filtered data\r\n    this.currentFilters = {};   // current filter criteria\r\n    this.currentSorts = [];     // current sort criteria (deprecated - use SortingManager)\r\n    this.serverTotalRows = null; // for server-side pagination\r\n  }\r\n\r\n  getData() {\r\n    return this.filteredData;\r\n  }\r\n\r\n  setData(data) {\r\n    this.originalData = data;\r\n    this.filteredData = [...data];\r\n    \r\n    // Update pagination info after data change\r\n    if (this.table.paginationManager) {\r\n      this.table.paginationManager.updatePaginationInfo();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set data from server (for server-side operations)\r\n   */\r\n  setServerData(data, totalRows = null) {\r\n    this.originalData = data;\r\n    this.filteredData = [...data];\r\n    this.serverTotalRows = totalRows;\r\n    \r\n    // Update pagination info after data change\r\n    if (this.table.paginationManager) {\r\n      this.table.paginationManager.updatePaginationInfo(totalRows);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get total rows (for server-side pagination)\r\n   */\r\n  getTotalRows() {\r\n    return this.serverTotalRows !== null ? this.serverTotalRows : this.originalData.length;\r\n  }\r\n\r\n  applyFilter(criteria) {\r\n    this.currentFilters = criteria;\r\n    \r\n    if (Object.keys(criteria).length === 0) {\r\n      // No filters, show all data\r\n      this.filteredData = [...this.originalData];\r\n    } else {\r\n      // Simple filtering: supports multiple criteria (legacy format)\r\n      this.filteredData = this.originalData.filter(item => {\r\n        return Object.entries(criteria).every(([key, value]) => {\r\n          const itemValue = (item[key] + '').toLowerCase();\r\n          const searchValue = (value + '').toLowerCase();\r\n          return itemValue.includes(searchValue);\r\n        });\r\n      });\r\n    }\r\n\r\n    // Reset pagination to first page after filtering\r\n    if (this.table.paginationManager) {\r\n      this.table.paginationManager.resetToFirstPage();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Apply filtering from FilterManager (this will be called by FilterManager)\r\n   * @param {Array} filteredData - Pre-filtered data from FilterManager\r\n   */\r\n  setFilteredData(filteredData) {\r\n    this.filteredData = filteredData;\r\n    \r\n    // Reset pagination to first page after filtering\r\n    if (this.table.paginationManager) {\r\n      this.table.paginationManager.resetToFirstPage();\r\n    }\r\n  }\r\n\r\n  applySorting(sorts) {\r\n    this.currentSorts = sorts;\r\n    \r\n    if (!sorts || sorts.length === 0) {\r\n      return;\r\n    }\r\n\r\n    // Use SortingManager if available, otherwise fall back to basic sorting\r\n    if (this.table.sortingManager && this.table.sortingManager.currentSorts.length > 0) {\r\n      this.table.sortingManager._applySorting();\r\n    } else {\r\n      // Legacy sorting implementation\r\n      this.filteredData.sort((a, b) => {\r\n        for (const sort of sorts) {\r\n          const { column, direction } = sort;\r\n          const aVal = a[column];\r\n          const bVal = b[column];\r\n          \r\n          let comparison = 0;\r\n          if (aVal < bVal) comparison = -1;\r\n          else if (aVal > bVal) comparison = 1;\r\n          \r\n          if (comparison !== 0) {\r\n            return direction === 'desc' ? -comparison : comparison;\r\n          }\r\n        }\r\n        return 0;\r\n      });\r\n    }\r\n\r\n    // Reset pagination to first page after sorting\r\n    if (this.table.paginationManager) {\r\n      this.table.paginationManager.resetToFirstPage();\r\n    }\r\n  }\r\n\r\n  clearFilters() {\r\n    this.currentFilters = {};\r\n    this.filteredData = [...this.originalData];\r\n    \r\n    // Reset pagination to first page\r\n    if (this.table.paginationManager) {\r\n      this.table.paginationManager.resetToFirstPage();\r\n    }\r\n  }\r\n\r\n  clearSorting() {\r\n    this.currentSorts = [];\r\n    // Don't change the filtered data order, just clear the sort state\r\n    \r\n    if (this.table.paginationManager) {\r\n      this.table.paginationManager.resetToFirstPage();\r\n    }\r\n  }\r\n\r\n  // Legacy method for backward compatibility\r\n  getPageData(page = 1) {\r\n    const pageSize = this.table.paginationManager ? \r\n      this.table.paginationManager.pageSize : 10;\r\n    const start = (page - 1) * pageSize;\r\n    return this.filteredData.slice(start, start + pageSize);\r\n  }\r\n}","export default class Renderer {\r\n  constructor(table) {\r\n    this.table = table;\r\n  }\r\n\r\n  renderTable(data, virtualMode = false) {\r\n    const columns = this.table.columnManager ? this.table.columnManager.getColumns() : (this.table.options.columns || []);\r\n    const controlsOptions = this.table.options.controls;\r\n    const isVirtualScrollEnabled = this.table.virtualScrollManager && this.table.virtualScrollManager.isEnabled();\r\n\r\n    // Preserve search input value and focus state before re-rendering\r\n    let preservedSearchValue = '';\r\n    let searchInputHadFocus = false;\r\n    let cursorPosition = 0;\r\n    const existingSearchInput = this.table.container.querySelector('.tablix-search-input');\r\n    if (existingSearchInput) {\r\n      preservedSearchValue = existingSearchInput.value;\r\n      searchInputHadFocus = document.activeElement === existingSearchInput;\r\n      cursorPosition = existingSearchInput.selectionStart || 0;\r\n    }\r\n\r\n    // Determine selection attributes\r\n    const selectionEnabled = this.table.selectionManager && this.table.selectionManager.options.enabled;\r\n    const selectionAttributes = selectionEnabled \r\n      ? `data-selection-enabled data-selection-mode=\"${this.table.selectionManager.options.mode}\"` \r\n      : 'data-selection-disabled';\r\n\r\n    let html = `<div class=\"tablix-wrapper\" ${selectionAttributes}>`;\r\n    \r\n    // Top controls\r\n    if (controlsOptions.enabled && (controlsOptions.position === 'top' || controlsOptions.position === 'both')) {\r\n      html += this.renderControls('top');\r\n    }\r\n    \r\n    // Virtual scroll container (if enabled)\r\n    if (isVirtualScrollEnabled) {\r\n      const containerHeight = this.table.options.virtualScroll.containerHeight || 400;\r\n      html += `<div class=\"tablix-scroll-container\" style=\"height: ${containerHeight}px; overflow: auto; position: relative; border: 1px solid #ddd;\">`;\r\n    }\r\n    \r\n    // Table wrapper for horizontal scrolling (mobile support)\r\n    html += '<div class=\"tablix-table-wrapper\" style=\"overflow-x: auto;\">';\r\n    \r\n    // Table\r\n    html += '<table class=\"tablix-table\" style=\"width:100%; border-collapse:collapse;\">';\r\n\r\n    // Header\r\n    html += '<thead class=\"tablix-thead\"><tr class=\"tablix-header-row\">';\r\n    columns.forEach(col => {\r\n      const isSortable = this._isColumnSortable(col);\r\n      const sortDirection = this._getSortDirection(col.name);\r\n      const sortClass = isSortable ? ' tablix-sortable' : '';\r\n      const sortDirectionClass = sortDirection ? ` tablix-sorted tablix-sorted-${sortDirection}` : '';\r\n      \r\n      html += `<th class=\"tablix-th${sortClass}${sortDirectionClass}\" data-column=\"${col.name}\">`;\r\n      html += `<div class=\"tablix-th-content\">`;\r\n      html += `<span class=\"tablix-th-text\">${col.title || col.name}</span>`;\r\n      \r\n      if (isSortable) {\r\n        html += `<span class=\"tablix-sort-indicator\">`;\r\n        if (sortDirection === 'asc') {\r\n          html += `<span class=\"tablix-sort-arrow tablix-sort-asc\" aria-label=\"${this.table.t('sort.sortedAscending')}\">↑</span>`;\r\n        } else if (sortDirection === 'desc') {\r\n          html += `<span class=\"tablix-sort-arrow tablix-sort-desc\" aria-label=\"${this.table.t('sort.sortedDescending')}\">↓</span>`;\r\n        } else {\r\n          html += `<span class=\"tablix-sort-arrow tablix-sort-none\" aria-label=\"${this.table.t('sort.notSorted')}\">↕</span>`;\r\n        }\r\n        html += `</span>`;\r\n      }\r\n      \r\n      html += `</div>`;\r\n      html += `</th>`;\r\n    });\r\n    html += '</tr></thead>';\r\n\r\n    // Body\r\n    html += '<tbody class=\"tablix-tbody\">';\r\n    \r\n    // For virtual scrolling, only render empty structure or limited rows\r\n    if (isVirtualScrollEnabled && virtualMode) {\r\n      // Empty body for virtual scrolling - rows will be added by VirtualScrollManager\r\n      html += `<tr class=\"tablix-placeholder-row\" style=\"display: none;\"><td colspan=\"${columns.length}\"></td></tr>`;\r\n    } else if (data.length === 0) {\r\n      html += `<tr class=\"tablix-empty-row\"><td colspan=\"${columns.length}\" class=\"tablix-empty-cell\">${this.table.t('general.noData')}</td></tr>`;\r\n    } else {\r\n      data.forEach((row, index) => {\r\n        // Calculate global row index for pagination\r\n        let globalIndex = index;\r\n        if (this.table.paginationManager && this.table.paginationManager.options.mode === 'client') {\r\n          const currentPage = this.table.paginationManager.currentPage;\r\n          const pageSize = this.table.paginationManager.pageSize;\r\n          globalIndex = (currentPage - 1) * pageSize + index;\r\n        }\r\n        \r\n        html += `<tr class=\"tablix-row\" data-row-index=\"${globalIndex}\">`;\r\n        columns.forEach(col => {\r\n          const cell = row[col.name];\r\n          let renderedCell;\r\n          \r\n          // Use ColumnManager for formatting if available\r\n          if (this.table.columnManager) {\r\n            // Pass the column object instead of just the name to support multiple columns with same field\r\n            const result = this.table.columnManager.formatCellValue(col, cell, row);\r\n            if (result.isHtml) {\r\n              // Custom renderer returned HTML - use as is\r\n              renderedCell = result.value;\r\n            } else {\r\n              // Formatted or raw value - escape for safety\r\n              renderedCell = this.escapeHtml(result.value);\r\n            }\r\n          } else {\r\n            // Fallback to original renderer logic\r\n            renderedCell = col.renderer ? col.renderer(cell, row) : this.escapeHtml(cell);\r\n          }\r\n          \r\n          html += `<td class=\"tablix-td\">${renderedCell}</td>`;\r\n        });\r\n        html += '</tr>';\r\n      });\r\n    }\r\n    html += '</tbody>';\r\n    html += '</table>';\r\n    html += '</div>'; // Close tablix-table-wrapper\r\n    \r\n    // Close virtual scroll container if enabled\r\n    if (isVirtualScrollEnabled) {\r\n      html += '</div>'; // Close tablix-scroll-container\r\n    }\r\n\r\n    // Pagination will be rendered separately\r\n    html += '<div class=\"tablix-pagination-container\"></div>';\r\n    \r\n    // Bottom controls\r\n    if (controlsOptions.enabled && (controlsOptions.position === 'bottom' || controlsOptions.position === 'both')) {\r\n      html += this.renderControls('bottom');\r\n    }\r\n    \r\n    html += '</div>';\r\n\r\n    // Update DOM\r\n    this.table.container.innerHTML = html;\r\n    \r\n    // Restore search input value immediately after DOM update\r\n    if (preservedSearchValue) {\r\n      const newSearchInput = this.table.container.querySelector('.tablix-search-input');\r\n      if (newSearchInput) {\r\n        newSearchInput.value = preservedSearchValue;\r\n      }\r\n    }\r\n    \r\n    // Render pagination controls if pagination is enabled\r\n    this.renderPagination();\r\n    \r\n    // Bind control events\r\n    if (controlsOptions.enabled) {\r\n      this.bindControlEvents();\r\n    }\r\n\r\n    // Bind search events if search is enabled\r\n    if (this.table.searchManager) {\r\n      this.table.searchManager.bindEvents();\r\n    }\r\n\r\n    // Bind sort events if sorting is enabled\r\n    if (this.table.sortingManager) {\r\n      this.bindSortEvents();\r\n    }\r\n\r\n    // Bind row click events if selection is enabled\r\n    if (this.table.selectionManager && this.table.selectionManager.options.enabled) {\r\n      this.bindRowClickEvents();\r\n    }\r\n\r\n    // Render filter icons and bind events if filtering is enabled\r\n    if (this.table.filterUI) {\r\n      this.table.filterUI.renderFilterIcons();\r\n    }\r\n\r\n    // Restore focus AFTER all event binding is complete\r\n    if (searchInputHadFocus) {\r\n      const newSearchInput = this.table.container.querySelector('.tablix-search-input');\r\n      if (newSearchInput) {\r\n        // Use requestAnimationFrame to ensure focus happens after all DOM operations\r\n        requestAnimationFrame(() => {\r\n          newSearchInput.focus();\r\n          // Restore cursor position\r\n          if (cursorPosition > 0) {\r\n            newSearchInput.setSelectionRange(cursorPosition, cursorPosition);\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    // Trigger afterRender event\r\n    this.table.eventManager.trigger('afterRender');\r\n  }\r\n\r\n  renderPagination() {\r\n    const paginationContainer = this.table.container.querySelector('.tablix-pagination-container');\r\n    if (!paginationContainer || !this.table.paginationManager) {\r\n      return;\r\n    }\r\n\r\n    const paginationManager = this.table.paginationManager;\r\n    const info = paginationManager.getInfo();\r\n    \r\n    if (!paginationManager.options.enabled && paginationManager.options.enabled !== undefined) {\r\n      paginationContainer.innerHTML = '';\r\n      return;\r\n    }\r\n\r\n    // Don't show pagination if there's only one page and no custom page sizes\r\n    if (info.totalPages <= 1 && !paginationManager.options.showPageSizes) {\r\n      paginationContainer.innerHTML = '';\r\n      return;\r\n    }\r\n\r\n    let html = '<div class=\"tablix-pagination\">';\r\n    \r\n    // Page info\r\n    html += `<div class=\"tablix-pagination-info\">`;\r\n    if (info.totalRows === 0) {\r\n      html += this.table.t('pagination.noRecords');\r\n    } else {\r\n      html += this.table.t('pagination.showingRecords', {\r\n        startRow: info.startRow,\r\n        endRow: info.endRow,\r\n        totalRows: info.totalRows\r\n      });\r\n    }\r\n    html += '</div>';\r\n\r\n    // Page size selector\r\n    if (paginationManager.options.showPageSizes && paginationManager.options.pageSizeOptions.length > 1) {\r\n      html += '<div class=\"tablix-pagination-page-size\">';\r\n      html += this.table.t('general.show') + ' ';\r\n      html += '<select class=\"tablix-page-size-select\">';\r\n      paginationManager.options.pageSizeOptions.forEach(size => {\r\n        const selected = size === info.pageSize ? ' selected' : '';\r\n        html += `<option value=\"${size}\"${selected}>${size}</option>`;\r\n      });\r\n      html += '</select>';\r\n      html += ' ' + this.table.t('general.records') + ' ' + this.table.t('general.perPage');\r\n      html += '</div>';\r\n    }\r\n\r\n    // Navigation controls\r\n    if (info.totalPages > 1) {\r\n      html += '<div class=\"tablix-pagination-nav\">';\r\n      \r\n      // First page\r\n      if (paginationManager.options.showFirstLast) {\r\n        const disabled = info.currentPage === 1 ? ' disabled' : '';\r\n        html += `<button class=\"tablix-pagination-btn tablix-pagination-first\" data-page=\"1\"${disabled}>${this.table.t('pagination.first')}</button>`;\r\n      }\r\n      \r\n      // Previous page\r\n      if (paginationManager.options.showPrevNext) {\r\n        const disabled = !info.hasPrevPage ? ' disabled' : '';\r\n        html += `<button class=\"tablix-pagination-btn tablix-pagination-prev\" data-page=\"${info.currentPage - 1}\"${disabled}>${this.table.t('pagination.previous')}</button>`;\r\n      }\r\n      \r\n      // Page numbers\r\n      if (paginationManager.options.showPageNumbers) {\r\n        const pageNumbers = paginationManager.getPageNumbers();\r\n        pageNumbers.forEach(page => {\r\n          if (page === '...') {\r\n            html += '<span class=\"tablix-pagination-ellipsis\">...</span>';\r\n          } else {\r\n            const active = page === info.currentPage ? ' active' : '';\r\n            html += `<button class=\"tablix-pagination-btn tablix-pagination-page${active}\" data-page=\"${page}\">${page}</button>`;\r\n          }\r\n        });\r\n      }\r\n      \r\n      // Next page\r\n      if (paginationManager.options.showPrevNext) {\r\n        const disabled = !info.hasNextPage ? ' disabled' : '';\r\n        html += `<button class=\"tablix-pagination-btn tablix-pagination-next\" data-page=\"${info.currentPage + 1}\"${disabled}>${this.table.t('pagination.next')}</button>`;\r\n      }\r\n      \r\n      // Last page\r\n      if (paginationManager.options.showFirstLast) {\r\n        const disabled = info.currentPage === info.totalPages ? ' disabled' : '';\r\n        html += `<button class=\"tablix-pagination-btn tablix-pagination-last\" data-page=\"${info.totalPages}\"${disabled}>${this.table.t('pagination.last')}</button>`;\r\n      }\r\n      \r\n      html += '</div>';\r\n    }\r\n\r\n    // Loading indicator\r\n    if (info.isLoading) {\r\n      html += `<div class=\"tablix-pagination-loading\">${this.table.t('general.loading')}</div>`;\r\n    }\r\n    \r\n    html += '</div>';\r\n\r\n    paginationContainer.innerHTML = html;\r\n    this.bindPaginationEvents();\r\n  }\r\n\r\n  bindPaginationEvents() {\r\n    const paginationContainer = this.table.container.querySelector('.tablix-pagination');\r\n    if (!paginationContainer) {\r\n      return;\r\n    }\r\n\r\n    // Page navigation buttons\r\n    paginationContainer.addEventListener('click', async (e) => {\r\n      if (e.target.classList.contains('tablix-pagination-btn') && !e.target.disabled) {\r\n        e.preventDefault();\r\n        const page = parseInt(e.target.dataset.page);\r\n        if (!isNaN(page)) {\r\n          try {\r\n            await this.table.paginationManager.goToPage(page);\r\n          } catch (error) {\r\n            console.error('Failed to navigate to page:', error);\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    // Page size selector\r\n    const pageSizeSelect = paginationContainer.querySelector('.tablix-page-size-select');\r\n    if (pageSizeSelect) {\r\n      pageSizeSelect.addEventListener('change', async (e) => {\r\n        try {\r\n          const newPageSize = parseInt(e.target.value);\r\n          await this.table.paginationManager.changePageSize(newPageSize);\r\n        } catch (error) {\r\n          console.error('Failed to change page size:', error);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Escape HTML to prevent XSS attacks\r\n   */\r\n  escapeHtml(text) {\r\n    if (text == null) return '';\r\n    const div = document.createElement('div');\r\n    div.textContent = text.toString();\r\n    return div.innerHTML;\r\n  }\r\n\r\n  /**\r\n   * Render loading state\r\n   */\r\n  renderLoading() {\r\n    this.table.container.innerHTML = `<div class=\"tablix-loading\">${this.table.t('general.loading')}</div>`;\r\n  }\r\n\r\n  /**\r\n   * Render error state\r\n   */\r\n  renderError(error) {\r\n    this.table.container.innerHTML = `<div class=\"tablix-error\">${this.table.t('general.error')}: ${this.escapeHtml(error.message || error)}</div>`;\r\n  }\r\n\r\n  /**\r\n   * Render control panel\r\n   */\r\n  renderControls(position) {\r\n    const controlsOptions = this.table.options.controls;\r\n    const searchOptions = this.table.options.search || { enabled: false, placeholder: null };\r\n    \r\n    let html = `<div class=\"tablix-controls tablix-controls-${position}\">`;\r\n    \r\n    // Left side controls\r\n    html += '<div class=\"tablix-controls-left\">';\r\n    \r\n    // Pagination controls\r\n    if (controlsOptions.pagination && this.table.paginationManager) {\r\n      html += '<div class=\"tablix-control-group tablix-pagination-controls\">';\r\n      html += `<button type=\"button\" class=\"tablix-btn tablix-control-btn\" data-action=\"firstPage\">${this.table.t('pagination.first')}</button>`;\r\n      html += `<button type=\"button\" class=\"tablix-btn tablix-control-btn\" data-action=\"prevPage\">${this.table.t('pagination.previous')}</button>`;\r\n      html += `<button type=\"button\" class=\"tablix-btn tablix-control-btn\" data-action=\"nextPage\">${this.table.t('pagination.next')}</button>`;\r\n      html += `<button type=\"button\" class=\"tablix-btn tablix-control-btn\" data-action=\"lastPage\">${this.table.t('pagination.last')}</button>`;\r\n      html += '</div>';\r\n    }\r\n    \r\n    // Page size control\r\n    if (controlsOptions.pageSize && this.table.paginationManager) {\r\n      const pageSizeOptions = this.table.paginationManager.options.pageSizeOptions;\r\n      const currentPageSize = this.table.paginationManager.pageSize;\r\n      \r\n      html += '<div class=\"tablix-control-group tablix-page-size-group\">';\r\n      html += `<label for=\"tablix-page-size-select\">${this.table.t('general.show')}:</label>`;\r\n      html += '<select class=\"tablix-page-size-select\" id=\"tablix-page-size-select\">';\r\n      pageSizeOptions.forEach(size => {\r\n        const selected = size === currentPageSize ? ' selected' : '';\r\n        html += `<option value=\"${size}\"${selected}>${size}</option>`;\r\n      });\r\n      html += '</select>';\r\n      html += `<span>${this.table.t('general.entries')}</span>`;\r\n      html += '</div>';\r\n    }\r\n    \r\n    // Refresh control\r\n    if (controlsOptions.refresh) {\r\n      html += '<div class=\"tablix-control-group tablix-refresh-group\">';\r\n      html += `<button type=\"button\" class=\"tablix-btn tablix-control-btn\" data-action=\"refresh\" title=\"${this.table.t('controls.refresh')}\">⟳</button>`;\r\n      html += '</div>';\r\n    }\r\n    \r\n    html += '</div>'; // Close left controls\r\n    \r\n    // Right side controls\r\n    html += '<div class=\"tablix-controls-right\">';\r\n    \r\n    // Search control\r\n    if (controlsOptions.search && searchOptions.enabled) {\r\n      // Use localized placeholder or provided one\r\n      const placeholderText = searchOptions.placeholder || this.table.t('search.placeholder');\r\n      \r\n      html += '<div class=\"tablix-control-group tablix-search-group\">';\r\n      html += `<input type=\"text\" \r\n                      class=\"tablix-search-input\" \r\n                      id=\"tablix-search-input\" \r\n                      name=\"table-search\"\r\n                      placeholder=\"${placeholderText}\" />`;\r\n      html += `<button type=\"button\" class=\"tablix-btn tablix-search-clear\" title=\"${this.table.t('search.clear')}\" style=\"display: none;\">✕</button>`;\r\n      html += '</div>';\r\n    }\r\n    \r\n    html += '</div>'; // Close right controls\r\n    \r\n    html += '</div>'; // Close main controls container\r\n    \r\n    return html;\r\n  }\r\n\r\n  /**\r\n   * Bind control panel events\r\n   */\r\n  bindControlEvents() {\r\n    const wrapper = this.table.container.querySelector('.tablix-wrapper');\r\n    if (!wrapper) return;\r\n\r\n    // Page size selector\r\n    const pageSizeSelect = wrapper.querySelector('.tablix-page-size-select');\r\n    if (pageSizeSelect) {\r\n      pageSizeSelect.addEventListener('change', async (e) => {\r\n        try {\r\n          const newPageSize = parseInt(e.target.value);\r\n          await this.table.changePageSize(newPageSize);\r\n        } catch (error) {\r\n          console.error('Failed to change page size:', error);\r\n        }\r\n      });\r\n    }\r\n\r\n    // Control buttons\r\n    wrapper.addEventListener('click', async (e) => {\r\n      if (e.target.classList.contains('tablix-control-btn')) {\r\n        e.preventDefault();\r\n        const action = e.target.dataset.action;\r\n        \r\n        try {\r\n          switch (action) {\r\n            case 'firstPage':\r\n              await this.table.firstPage();\r\n              break;\r\n            case 'prevPage':\r\n              await this.table.prevPage();\r\n              break;\r\n            case 'nextPage':\r\n              await this.table.nextPage();\r\n              break;\r\n            case 'lastPage':\r\n              await this.table.lastPage();\r\n              break;\r\n            case 'refresh':\r\n              await this.handleRefresh();\r\n              break;\r\n            case 'export':\r\n              this.handleExport();\r\n              break;\r\n          }\r\n        } catch (error) {\r\n          console.error(`Failed to execute action ${action}:`, error);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Handle refresh functionality\r\n   */\r\n  async handleRefresh() {\r\n    this.table.eventManager.trigger('beforeRefresh');\r\n    \r\n    if (this.table.options.onRefresh && typeof this.table.options.onRefresh === 'function') {\r\n      // Custom refresh handler\r\n      try {\r\n        const newData = await this.table.options.onRefresh();\r\n        if (newData) {\r\n          await this.table.loadData(newData);\r\n        }\r\n      } catch (error) {\r\n        console.error('Custom refresh failed:', error);\r\n      }\r\n    } else if (this.table.paginationManager && this.table.paginationManager.options.mode === 'server') {\r\n      // Server-side refresh\r\n      await this.table.paginationManager.refreshTable();\r\n    } else {\r\n      // Client-side refresh - just re-render current data\r\n      await this.table.refreshTable();\r\n    }\r\n    \r\n    this.table.eventManager.trigger('afterRefresh');\r\n  }\r\n\r\n  /**\r\n   * Handle export functionality\r\n   */\r\n  handleExport() {\r\n    const data = this.table.getData();\r\n    const columns = this.table.options.columns || [];\r\n    \r\n    // Simple CSV export\r\n    let csv = columns.map(col => col.title || col.name).join(',') + '\\n';\r\n    \r\n    data.forEach(row => {\r\n      const values = columns.map(col => {\r\n        const value = row[col.name];\r\n        \r\n        // Handle complex objects\r\n        if (typeof value === 'object' && value !== null && !(value instanceof Date)) {\r\n          return `\"${JSON.stringify(value).replace(/\"/g, '\"\"')}\"`;\r\n        }\r\n        \r\n        // Simple CSV escaping for strings\r\n        if (typeof value === 'string' && value.includes(',')) {\r\n          return `\"${value.replace(/\"/g, '\"\"')}\"`;\r\n        }\r\n        \r\n        return value;\r\n      });\r\n      csv += values.join(',') + '\\n';\r\n    });\r\n    \r\n    // Download CSV\r\n    const blob = new Blob([csv], { type: 'text/csv' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = 'table-data.csv';\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    URL.revokeObjectURL(url);\r\n    \r\n    this.table.eventManager.trigger('afterExport', { data, format: 'csv' });\r\n  }\r\n\r\n  /**\r\n   * Bind sorting events to header columns\r\n   */\r\n  bindSortEvents() {\r\n    const headerRow = this.table.container.querySelector('.tablix-header-row');\r\n    if (!headerRow) return;\r\n\r\n    headerRow.addEventListener('click', async (e) => {\r\n      const th = e.target.closest('.tablix-sortable');\r\n      if (!th) return;\r\n\r\n      e.preventDefault();\r\n      \r\n      const columnName = th.dataset.column;\r\n      \r\n      try {\r\n        await this.table.toggleSort(columnName);\r\n      } catch (error) {\r\n        console.error('Failed to sort column:', error);\r\n      }\r\n    });\r\n\r\n    // Keyboard support for accessibility\r\n    headerRow.addEventListener('keydown', async (e) => {\r\n      const th = e.target.closest('.tablix-sortable');\r\n      if (!th || (e.key !== 'Enter' && e.key !== ' ')) return;\r\n\r\n      e.preventDefault();\r\n      \r\n      const columnName = th.dataset.column;\r\n      \r\n      try {\r\n        await this.table.toggleSort(columnName);\r\n      } catch (error) {\r\n        console.error('Failed to sort column:', error);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Bind row click events for selection\r\n   */\r\n  bindRowClickEvents() {\r\n    const tbody = this.table.container.querySelector('.tablix-tbody');\r\n    if (!tbody) return;\r\n\r\n    tbody.addEventListener('click', (e) => {\r\n      const row = e.target.closest('.tablix-row');\r\n      if (!row || row.classList.contains('tablix-empty-row')) return;\r\n\r\n      const globalRowIndex = parseInt(row.dataset.rowIndex, 10);\r\n      if (isNaN(globalRowIndex)) return;\r\n\r\n      // Convert global index to local index for current page data\r\n      let localRowIndex = globalRowIndex;\r\n      if (this.table.paginationManager && this.table.paginationManager.options.mode === 'client') {\r\n        const currentPage = this.table.paginationManager.currentPage;\r\n        const pageSize = this.table.paginationManager.pageSize;\r\n        localRowIndex = globalRowIndex - (currentPage - 1) * pageSize;\r\n      }\r\n\r\n      // Get current page data to find the clicked row\r\n      const currentData = this.getCurrentPageData();\r\n      if (localRowIndex >= 0 && localRowIndex < currentData.length) {\r\n        const rowData = currentData[localRowIndex];\r\n        \r\n        // Trigger row click event for SelectionManager with global index\r\n        this.table.eventManager.trigger('rowClick', {\r\n          rowData,\r\n          rowIndex: globalRowIndex, // Pass global index\r\n          localRowIndex: localRowIndex, // Also pass local index if needed\r\n          originalEvent: e\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get current page data (same logic as SelectionManager)\r\n   */\r\n  getCurrentPageData() {\r\n    if (this.table.paginationManager) {\r\n      return this.table.paginationManager.getCurrentPageData() || [];\r\n    }\r\n    return this.table.dataManager.getData();\r\n  }\r\n\r\n  /**\r\n   * Update sort indicators in headers\r\n   */\r\n  updateSortIndicators(currentSort) {\r\n    const headers = this.table.container.querySelectorAll('.tablix-th[data-column]');\r\n    \r\n    headers.forEach(th => {\r\n      const columnName = th.dataset.column;\r\n      const isSorted = currentSort && currentSort.column === columnName;\r\n      \r\n      // Remove all sort classes\r\n      th.classList.remove('tablix-sorted', 'tablix-sorted-asc', 'tablix-sorted-desc');\r\n      \r\n      const indicator = th.querySelector('.tablix-sort-indicator');\r\n      if (!indicator) return;\r\n\r\n      const arrow = indicator.querySelector('.tablix-sort-arrow');\r\n      if (!arrow) return;\r\n\r\n      if (isSorted) {\r\n        // Column is sorted\r\n        th.classList.add('tablix-sorted', `tablix-sorted-${currentSort.direction}`);\r\n        arrow.classList.remove('tablix-sort-none', 'tablix-sort-asc', 'tablix-sort-desc');\r\n        arrow.classList.add(`tablix-sort-${currentSort.direction}`);\r\n        arrow.textContent = currentSort.direction === 'asc' ? '↑' : '↓';\r\n        arrow.setAttribute('aria-label', `${this.table.t('sort.sorted')}${currentSort.direction === 'asc' ? this.table.t('sort.sortedAscending') : this.table.t('sort.sortedDescending')}`);\r\n        arrow.removeAttribute('data-sort-order');\r\n      } else {\r\n        // Column is not sorted\r\n        arrow.classList.remove('tablix-sort-asc', 'tablix-sort-desc');\r\n        arrow.classList.add('tablix-sort-none');\r\n        arrow.textContent = '↕';\r\n        arrow.setAttribute('aria-label', this.table.t('sort.notSorted'));\r\n        arrow.removeAttribute('data-sort-order');\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Check if a column is sortable\r\n   */\r\n  _isColumnSortable(column) {\r\n    if (!this.table.sortingManager) return false;\r\n    return this.table.sortingManager.isColumnSortable(column.name);\r\n  }\r\n\r\n  /**\r\n   * Get sort direction for a column\r\n   */\r\n  _getSortDirection(columnName) {\r\n    if (!this.table.sortingManager) return null;\r\n    return this.table.sortingManager.getSortDirection(columnName);\r\n  }\r\n}","export default class EventManager {\r\n  constructor() {\r\n    this.events = {};\r\n  }\r\n\r\n  on(event, callback) {\r\n    if (!this.events[event]) this.events[event] = [];\r\n    this.events[event].push(callback);\r\n  }\r\n\r\n  off(event, callback) {\r\n    if (this.events[event]) {\r\n      const index = this.events[event].indexOf(callback);\r\n      if (index > -1) {\r\n        this.events[event].splice(index, 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  clear(event) {\r\n    if (event) {\r\n      this.events[event] = [];\r\n    } else {\r\n      this.events = {};\r\n    }\r\n  }\r\n\r\n  trigger(event, payload) {\r\n    (this.events[event] || []).forEach(cb => cb(payload));\r\n  }\r\n}","/**\r\n * PaginationManager handles both client-side and server-side pagination\r\n * \r\n * Features:\r\n * - Client-side: slices filtered data locally\r\n * - Server-side: calls async data loader with pagination params\r\n * - Consistent API regardless of pagination mode\r\n * - Event emission for page changes\r\n * - Customizable pagination controls\r\n */\r\nexport default class PaginationManager {\r\n  constructor(table, options = {}) {\r\n    this.table = table;\r\n    this.options = {\r\n      pageSize: 10,\r\n      mode: 'client', // 'client' or 'server'\r\n      showPageNumbers: true,\r\n      maxPageNumbers: 5,\r\n      showFirstLast: true,\r\n      showPrevNext: true,\r\n      showPageSizes: false,\r\n      pageSizeOptions: [10, 25, 50, 100],\r\n      serverDataLoader: null, // async function for server-side pagination\r\n      ...options\r\n    };\r\n\r\n    // Pagination state\r\n    this.currentPage = 1;\r\n    this.totalPages = 1;\r\n    this.totalRows = 0;\r\n    this.pageSize = this.options.pageSize;\r\n    this.isLoading = false;\r\n\r\n    // Event bindings\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.updatePaginationInfo();\r\n  }\r\n\r\n  /**\r\n   * Update pagination information based on current data\r\n   */\r\n  updatePaginationInfo(totalRows = null) {\r\n    if (this.options.mode === 'client') {\r\n      // For client-side pagination, calculate from filtered data\r\n      this.totalRows = this.table.dataManager.filteredData.length;\r\n    } else {\r\n      // For server-side pagination, total rows should be provided\r\n      this.totalRows = totalRows || this.totalRows;\r\n    }\r\n\r\n    this.totalPages = Math.ceil(this.totalRows / this.pageSize) || 1;\r\n    \r\n    // Ensure current page is within bounds\r\n    if (this.currentPage > this.totalPages) {\r\n      this.currentPage = this.totalPages;\r\n    }\r\n    if (this.currentPage < 1) {\r\n      this.currentPage = 1;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get current page data\r\n   * For client-side: slice the filtered data\r\n   * For server-side: return cached data or trigger load\r\n   */\r\n  async getPageData() {\r\n    if (this.options.mode === 'client') {\r\n      return this.getClientPageData();\r\n    } else {\r\n      return await this.getServerPageData();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get page data for client-side pagination\r\n   */\r\n  getClientPageData() {\r\n    const start = (this.currentPage - 1) * this.pageSize;\r\n    const end = start + this.pageSize;\r\n    return this.table.dataManager.filteredData.slice(start, end);\r\n  }\r\n\r\n  /**\r\n   * Get current page data synchronously (for selection and other features)\r\n   * Returns the data that is currently displayed on the page\r\n   */\r\n  getCurrentPageData() {\r\n    if (this.options.mode === 'client') {\r\n      return this.getClientPageData();\r\n    } else {\r\n      // For server-side pagination, return the currently cached data\r\n      // This assumes the data has already been loaded by a previous getPageData call\r\n      return this.table.dataManager.getData();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get page data for server-side pagination\r\n   * Now delegates to unified server loading\r\n   */\r\n  async getServerPageData() {\r\n    // Server-side pagination is now handled by the unified _loadServerData method\r\n    // Just return the current data from DataManager\r\n    // The actual loading happens in refreshTable() -> _loadServerData()\r\n    return this.table.dataManager.getData();\r\n  }\r\n\r\n  /**\r\n   * Navigate to specific page\r\n   */\r\n  async goToPage(pageNumber) {\r\n    const targetPage = Math.max(1, Math.min(pageNumber, this.totalPages));\r\n    \r\n    if (targetPage === this.currentPage) {\r\n      return;\r\n    }\r\n\r\n    const oldPage = this.currentPage;\r\n    this.currentPage = targetPage;\r\n\r\n    // Update state manager\r\n    if (this.table.stateManager) {\r\n      this.table.stateManager.updatePagination({ page: targetPage });\r\n    }\r\n\r\n    this.table.eventManager.trigger('beforePageChange', {\r\n      oldPage,\r\n      newPage: this.currentPage,\r\n      pageSize: this.pageSize\r\n    });\r\n\r\n    try {\r\n      await this.table.refreshTable();\r\n      \r\n      this.table.eventManager.trigger('afterPageChange', {\r\n        oldPage,\r\n        newPage: this.currentPage,\r\n        pageSize: this.pageSize\r\n      });\r\n    } catch (error) {\r\n      // Revert page change on error\r\n      this.currentPage = oldPage;\r\n      if (this.table.stateManager) {\r\n        this.table.stateManager.updatePagination({ page: oldPage });\r\n      }\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Go to next page\r\n   */\r\n  async nextPage() {\r\n    if (this.currentPage < this.totalPages) {\r\n      await this.goToPage(this.currentPage + 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Go to previous page\r\n   */\r\n  async prevPage() {\r\n    if (this.currentPage > 1) {\r\n      await this.goToPage(this.currentPage - 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Go to first page\r\n   */\r\n  async firstPage() {\r\n    await this.goToPage(1);\r\n  }\r\n\r\n  /**\r\n   * Go to last page\r\n   */\r\n  async lastPage() {\r\n    await this.goToPage(this.totalPages);\r\n  }\r\n\r\n  /**\r\n   * Change page size\r\n   */\r\n  async changePageSize(newPageSize) {\r\n    if (newPageSize === this.pageSize) {\r\n      return;\r\n    }\r\n\r\n    const oldPageSize = this.pageSize;\r\n    this.pageSize = newPageSize;\r\n\r\n    // Try to maintain current position in the dataset\r\n    const currentRow = (this.currentPage - 1) * oldPageSize;\r\n    const newPage = Math.floor(currentRow / newPageSize) + 1;\r\n\r\n    this.updatePaginationInfo();\r\n    \r\n    // Update state manager\r\n    if (this.table.stateManager) {\r\n      this.table.stateManager.updatePagination({ \r\n        pageSize: newPageSize,\r\n        page: newPage\r\n      });\r\n    }\r\n    \r\n    this.table.eventManager.trigger('beforePageSizeChange', {\r\n      oldPageSize,\r\n      newPageSize: this.pageSize,\r\n      oldPage: this.currentPage,\r\n      newPage\r\n    });\r\n\r\n    this.currentPage = newPage;\r\n    await this.table.refreshTable();\r\n\r\n    this.table.eventManager.trigger('afterPageSizeChange', {\r\n      oldPageSize,\r\n      newPageSize: this.pageSize,\r\n      page: this.currentPage\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Reset pagination to first page (useful after filtering/sorting)\r\n   */\r\n  async resetToFirstPage() {\r\n    this.currentPage = 1;\r\n    this.updatePaginationInfo();\r\n    \r\n    // Update state manager\r\n    if (this.table.stateManager) {\r\n      this.table.stateManager.updatePagination({ page: 1 });\r\n    }\r\n    \r\n    // Use table's refreshTable instead of local method\r\n    await this.table.refreshTable();\r\n  }\r\n\r\n  /**\r\n   * Get pagination state info\r\n   */\r\n  getInfo() {\r\n    const start = this.totalRows === 0 ? 0 : (this.currentPage - 1) * this.pageSize + 1;\r\n    const end = Math.min(this.currentPage * this.pageSize, this.totalRows);\r\n\r\n    return {\r\n      currentPage: this.currentPage,\r\n      totalPages: this.totalPages,\r\n      pageSize: this.pageSize,\r\n      totalRows: this.totalRows,\r\n      startRow: start,\r\n      endRow: end,\r\n      hasNextPage: this.currentPage < this.totalPages,\r\n      hasPrevPage: this.currentPage > 1,\r\n      isLoading: this.isLoading\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get page numbers to display in pagination controls\r\n   */\r\n  getPageNumbers() {\r\n    const maxPages = this.options.maxPageNumbers;\r\n    const pages = [];\r\n\r\n    if (this.totalPages <= maxPages) {\r\n      // Show all pages\r\n      for (let i = 1; i <= this.totalPages; i++) {\r\n        pages.push(i);\r\n      }\r\n    } else {\r\n      // Show truncated page numbers\r\n      const half = Math.floor(maxPages / 2);\r\n      let start = Math.max(1, this.currentPage - half);\r\n      let end = Math.min(this.totalPages, start + maxPages - 1);\r\n\r\n      // Adjust if we're near the end\r\n      if (end - start + 1 < maxPages) {\r\n        start = Math.max(1, end - maxPages + 1);\r\n      }\r\n\r\n      for (let i = start; i <= end; i++) {\r\n        pages.push(i);\r\n      }\r\n\r\n      // Add ellipsis indicators\r\n      if (start > 1) {\r\n        if (start > 2) pages.unshift('...');\r\n        pages.unshift(1);\r\n      }\r\n      if (end < this.totalPages) {\r\n        if (end < this.totalPages - 1) pages.push('...');\r\n        pages.push(this.totalPages);\r\n      }\r\n    }\r\n\r\n    return pages;\r\n  }\r\n\r\n  /**\r\n   * Enable/disable pagination\r\n   */\r\n  setEnabled(enabled) {\r\n    this.options.enabled = enabled;\r\n    this.table.renderer.renderPagination();\r\n  }\r\n\r\n  /**\r\n   * Switch between client and server mode\r\n   */\r\n  async setMode(mode, serverDataLoader = null) {\r\n    if (mode === this.options.mode) {\r\n      return;\r\n    }\r\n\r\n    this.options.mode = mode;\r\n    if (mode === 'server' && serverDataLoader) {\r\n      this.options.serverDataLoader = serverDataLoader;\r\n    }\r\n\r\n    // Reset to first page when switching modes\r\n    this.currentPage = 1;\r\n    this.updatePaginationInfo();\r\n    \r\n    // Update state manager\r\n    if (this.table.stateManager) {\r\n      this.table.stateManager.updatePagination({ page: 1 });\r\n    }\r\n    \r\n    await this.table.refreshTable();\r\n  }\r\n}\r\n","/**\r\n * SortingManager - Handles all sorting functionality for TablixJS\r\n * Supports client-side and server-side sorting with custom sort functions\r\n */\r\nexport default class SortingManager {\r\n  constructor(table, options = {}) {\r\n    this.table = table;\r\n    this.options = {\r\n      enabled: true,\r\n      mode: 'client', // 'client' or 'server'\r\n      serverSortLoader: null, // Function to load data from server with sorting\r\n      defaultSortType: 'auto', // 'auto', 'string', 'number', 'date'\r\n      caseSensitive: false,\r\n      nullsFirst: false,\r\n      ...options\r\n    };\r\n\r\n    // Current sort state - single column only\r\n    this.currentSort = null; // { column: 'name', direction: 'asc' }\r\n    this.sortOrder = ['asc', 'desc', null]; // Click cycle order\r\n\r\n    // Predefined sort types\r\n    this.sortTypes = {\r\n      auto: this._autoSort.bind(this),\r\n      string: this._stringSort.bind(this),\r\n      number: this._numberSort.bind(this),\r\n      date: this._dateSort.bind(this),\r\n      boolean: this._booleanSort.bind(this)\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Sort by a column\r\n   * @param {string} columnName - Column to sort by\r\n   * @param {string|null} direction - 'asc', 'desc', or null (unsorted)\r\n   */\r\n  async sort(columnName, direction = 'asc') {\r\n    // Trigger beforeSort event\r\n    const beforeSortData = { columnName, direction, currentSort: this.currentSort };\r\n    this.table.eventManager.trigger('beforeSort', beforeSortData);\r\n\r\n    // Set current sort state\r\n    if (direction !== null) {\r\n      this.currentSort = { column: columnName, direction };\r\n    } else {\r\n      this.currentSort = null;\r\n    }\r\n\r\n    // Update state manager\r\n    if (this.table.stateManager) {\r\n      this.table.stateManager.updateSort(this.currentSort);\r\n      // Reset to first page when sorting changes\r\n      this.table.stateManager.resetPage();\r\n    }\r\n\r\n    if (this.options.mode === 'server') {\r\n      // Server mode - update will be triggered by refreshTable via unified loader\r\n      await this.table.refreshTable();\r\n    } else {\r\n      // Client mode - apply sorting locally\r\n      this._applySorting();\r\n      await this.table.refreshTable();\r\n    }\r\n\r\n    // Update UI\r\n    this.table.renderer.updateSortIndicators(this.currentSort);\r\n\r\n    // Trigger afterSort event\r\n    this.table.eventManager.trigger('afterSort', {\r\n      columnName,\r\n      direction,\r\n      currentSort: this.currentSort\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Toggle sort for a column (handles click cycling)\r\n   */\r\n  async toggleSort(columnName) {\r\n    const currentDirection = this.currentSort && this.currentSort.column === columnName \r\n      ? this.currentSort.direction \r\n      : null;\r\n    \r\n    // Get next direction in cycle\r\n    const currentIndex = this.sortOrder.indexOf(currentDirection);\r\n    const nextDirection = this.sortOrder[(currentIndex + 1) % this.sortOrder.length];\r\n    \r\n    await this.sort(columnName, nextDirection);\r\n  }\r\n\r\n  /**\r\n   * Client-side sorting\r\n   */\r\n  _sortClient(columnName, direction) {\r\n    // Set current sort\r\n    if (direction !== null) {\r\n      this.currentSort = { column: columnName, direction };\r\n    } else {\r\n      this.currentSort = null;\r\n    }\r\n\r\n    // Apply sorting to data\r\n    this._applySorting();\r\n  }\r\n\r\n  /**\r\n   * Server-side sorting (DEPRECATED - now handled by unified loader)\r\n   * @deprecated Use unified _loadServerData in Table.js\r\n   */\r\n  async _sortServer(columnName, direction) {\r\n    // This method is deprecated and should not be called anymore\r\n    // Sorting in server mode is now handled by the unified _loadServerData method\r\n    console.warn('_sortServer is deprecated. Server sorting now uses unified data loading.');\r\n  }\r\n\r\n  /**\r\n   * Apply current sort to filtered data\r\n   */\r\n  _applySorting() {\r\n    if (!this.currentSort) return;\r\n    \r\n    const columns = this.table.options.columns || [];\r\n    \r\n    this.table.dataManager.filteredData.sort((a, b) => {\r\n      // Support both 'name' and 'key' properties for column identification\r\n      const column = columns.find(col => (col.name === this.currentSort.column) || (col.key === this.currentSort.column));\r\n      const comparison = this._compareValues(\r\n        a[this.currentSort.column], \r\n        b[this.currentSort.column], \r\n        column\r\n      );\r\n      \r\n      return this.currentSort.direction === 'desc' ? -comparison : comparison;\r\n    });\r\n\r\n    // Reset pagination to first page after sorting\r\n    if (this.table.paginationManager) {\r\n      this.table.paginationManager.resetToFirstPage();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Compare two values based on column configuration\r\n   */\r\n  _compareValues(a, b, column) {\r\n    // Handle null/undefined values\r\n    if (a == null && b == null) return 0;\r\n    if (a == null) return this.options.nullsFirst ? -1 : 1;\r\n    if (b == null) return this.options.nullsFirst ? 1 : -1;\r\n\r\n    // Use custom sort function if provided\r\n    if (column && column.sortFunction) {\r\n      return column.sortFunction(a, b);\r\n    }\r\n\r\n    // Use specified sort type or auto-detect\r\n    const sortType = (column && column.sortType) || this.options.defaultSortType;\r\n    \r\n    if (this.sortTypes[sortType]) {\r\n      return this.sortTypes[sortType](a, b);\r\n    }\r\n\r\n    // Fallback to auto sort\r\n    return this._autoSort(a, b);\r\n  }\r\n\r\n  /**\r\n   * Auto-detect sort type and compare\r\n   */\r\n  _autoSort(a, b) {\r\n    // Try number comparison first\r\n    const numA = parseFloat(a);\r\n    const numB = parseFloat(b);\r\n    \r\n    if (!isNaN(numA) && !isNaN(numB)) {\r\n      return numA - numB;\r\n    }\r\n\r\n    // Try date comparison - be more strict about what constitutes a date\r\n    const dateA = new Date(a);\r\n    const dateB = new Date(b);\r\n    \r\n    // More strict date validation - check if it looks like a real date format\r\n    const isDateLike = (str) => {\r\n      return /^\\d{4}-\\d{2}-\\d{2}/.test(str) || /^\\d{1,2}\\/\\d{1,2}\\/\\d{4}/.test(str) || /^\\d{1,2}-\\d{1,2}-\\d{4}/.test(str);\r\n    };\r\n    \r\n    if (dateA.toString() !== 'Invalid Date' && dateB.toString() !== 'Invalid Date' && \r\n        isDateLike(String(a)) && isDateLike(String(b))) {\r\n      return dateA - dateB;\r\n    }\r\n\r\n    // Fall back to string comparison\r\n    return this._stringSort(a, b);\r\n  }\r\n\r\n  /**\r\n   * String comparison\r\n   */\r\n  _stringSort(a, b) {\r\n    const strA = String(a).trim();\r\n    const strB = String(b).trim();\r\n    \r\n    if (this.options.caseSensitive) {\r\n      return strA.localeCompare(strB);\r\n    }\r\n    \r\n    return strA.localeCompare(strB, undefined, { sensitivity: 'base' });\r\n  }\r\n\r\n  /**\r\n   * Number comparison\r\n   */\r\n  _numberSort(a, b) {\r\n    const numA = parseFloat(a);\r\n    const numB = parseFloat(b);\r\n    \r\n    if (isNaN(numA) && isNaN(numB)) return 0;\r\n    if (isNaN(numA)) return 1;\r\n    if (isNaN(numB)) return -1;\r\n    \r\n    return numA - numB;\r\n  }\r\n\r\n  /**\r\n   * Date comparison\r\n   */\r\n  _dateSort(a, b) {\r\n    const dateA = new Date(a);\r\n    const dateB = new Date(b);\r\n    \r\n    if (dateA.toString() === 'Invalid Date' && dateB.toString() === 'Invalid Date') return 0;\r\n    if (dateA.toString() === 'Invalid Date') return 1;\r\n    if (dateB.toString() === 'Invalid Date') return -1;\r\n    \r\n    return dateA - dateB;\r\n  }\r\n\r\n  /**\r\n   * Boolean comparison\r\n   */\r\n  _booleanSort(a, b) {\r\n    const boolA = Boolean(a);\r\n    const boolB = Boolean(b);\r\n    \r\n    if (boolA === boolB) return 0;\r\n    return boolA ? 1 : -1;\r\n  }\r\n\r\n  /**\r\n   * Clear all sorting\r\n   */  async clearSorting() {\r\n    this.currentSort = null;\r\n\r\n    if (this.options.mode === 'server') {\r\n      // Reload data without sorting\r\n      if (this.options.serverSortLoader) {\r\n        try {\r\n          const result = await this.options.serverSortLoader({\r\n            sort: null,\r\n            filters: this.table.dataManager.currentFilters,\r\n            page: this.table.paginationManager ? this.table.paginationManager.currentPage : 1,\r\n            pageSize: this.table.paginationManager ? this.table.paginationManager.pageSize : 10\r\n          });\r\n          \r\n          this.table.dataManager.setServerData(result.data, result.totalRows);\r\n        } catch (error) {\r\n          console.error('Failed to clear server sorting:', error);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Update UI and refresh table\r\n    this.table.renderer.updateSortIndicators(null);\r\n    await this.table.refreshTable();\r\n    \r\n    this.table.eventManager.trigger('afterSort', { currentSort: null });\r\n  }\r\n\r\n  /**\r\n   * Get current sort state\r\n   */\r\n  getSortState() {\r\n    return {\r\n      sort: this.currentSort,\r\n      mode: this.options.mode\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Set sorting options\r\n   */\r\n  setOptions(newOptions) {\r\n    this.options = { ...this.options, ...newOptions };\r\n  }\r\n\r\n  /**\r\n   * Check if a column is sortable\r\n   */\r\n  isColumnSortable(columnName) {\r\n    if (!this.options.enabled) return false;\r\n    \r\n    const columns = this.table.options.columns || [];\r\n    const column = columns.find(col => col.name === columnName);\r\n    \r\n    return column && column.sortable !== false;\r\n  }\r\n\r\n  /**\r\n   * Get sort direction for a column\r\n   */\r\n  getSortDirection(columnName) {\r\n    return this.currentSort && this.currentSort.column === columnName \r\n      ? this.currentSort.direction \r\n      : null;\r\n  }\r\n}\r\n","/**\r\n * ColumnManager - Enhanced column formatting system for TablixJS\r\n * \r\n * Features:\r\n * - Flexible formatting with optional locale and formatOptions\r\n * - Supports text, date, currency, number, percent formats\r\n * - Custom renderer priority over formatting\r\n * - Extensible design for future format types\r\n * - Performance-optimized with cached formatters\r\n */\r\nexport default class ColumnManager {\r\n  constructor(table) {\r\n    this.table = table;\r\n    this.columns = [];\r\n    this.formatters = new Map(); // Cache for compiled formatters\r\n    this.supportedFormats = ['text', 'date', 'currency', 'number', 'percent'];\r\n  }\r\n\r\n  /**\r\n   * Initialize columns and prepare formatters\r\n   * @param {Array} columns - Array of column definitions\r\n   */\r\n  initializeColumns(columns = []) {\r\n    this.columns = columns.map(col => this.prepareColumn(col));\r\n    this.compileFormatters();\r\n    return this.columns;\r\n  }\r\n\r\n  /**\r\n   * Prepare and validate a single column definition\r\n   * @param {Object} column - Column definition\r\n   * @returns {Object} Prepared column\r\n   */\r\n  prepareColumn(column) {\r\n    const prepared = { ...column };\r\n\r\n    // Validate format if provided\r\n    if (prepared.format && !this.supportedFormats.includes(prepared.format)) {\r\n      console.warn(`TablixJS: Unsupported format type '${prepared.format}' for column '${prepared.name}'. Falling back to no formatting.`);\r\n      delete prepared.format;\r\n    }\r\n\r\n    // Ensure name property exists\r\n    if (!prepared.name) {\r\n      throw new Error('TablixJS: Column must have a \"name\" property');\r\n    }\r\n\r\n    // Set default title if not provided\r\n    if (!prepared.title) {\r\n      prepared.title = prepared.name;\r\n    }\r\n\r\n    return prepared;\r\n  }\r\n\r\n  /**\r\n   * Compile and cache formatter functions for columns with format specified\r\n   */\r\n  compileFormatters() {\r\n    this.formatters.clear();\r\n\r\n    this.columns.forEach(column => {\r\n      if (column.format) {\r\n        const formatter = this.createFormatter(column);\r\n        if (formatter) {\r\n          this.formatters.set(column.name, formatter);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Create a formatter function for a column\r\n   * @param {Object} column - Column definition\r\n   * @returns {Function|null} Formatter function\r\n   */\r\n  createFormatter(column) {\r\n    const { format, locale, formatOptions = {} } = column;\r\n\r\n    switch (format) {\r\n      case 'text':\r\n        return (value) => this.formatText(value);\r\n\r\n      case 'date':\r\n        return (value) => this.formatDate(value, locale, formatOptions);\r\n\r\n      case 'currency':\r\n        return (value) => this.formatCurrency(value, locale, formatOptions, column.currency);\r\n\r\n      case 'number':\r\n        return (value) => this.formatNumber(value, locale, formatOptions);\r\n\r\n      case 'percent':\r\n        return (value) => this.formatPercent(value, locale, formatOptions);\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Format a cell value for a specific column\r\n   * @param {Object|string} column - Column object or column name (for backwards compatibility)\r\n   * @param {*} value - Cell value\r\n   * @param {Object} row - Full row data (for context)\r\n   * @returns {Object} Object with formatted value and metadata\r\n   */\r\n  formatCellValue(column, value, row) {\r\n    // Support both column object (new) and column name (backwards compatibility)\r\n    const columnObj = typeof column === 'string' ? this.getColumn(column) : column;\r\n    const columnName = columnObj ? columnObj.name : column;\r\n    \r\n    // Priority 1: Custom renderer (overrides everything)\r\n    if (columnObj && columnObj.renderer) {\r\n      // If renderer wants formatted value, provide it\r\n      const formatter = this.formatters.get(columnName);\r\n      const formattedValue = formatter ? formatter(value) : value;\r\n      const result = columnObj.renderer(value, row, formattedValue);\r\n      return {\r\n        value: result,\r\n        isHtml: true // Custom renderers can return HTML\r\n      };\r\n    }\r\n\r\n    // Priority 2: Format using cached formatter\r\n    const formatter = this.formatters.get(columnName);\r\n    if (formatter) {\r\n      return {\r\n        value: formatter(value),\r\n        isHtml: false // Formatted values are safe text\r\n      };\r\n    }\r\n\r\n    // Priority 3: Return raw value\r\n    return {\r\n      value: value,\r\n      isHtml: false // Raw values need escaping\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get column definition by name\r\n   * @param {string} columnName - Column name\r\n   * @returns {Object|null} Column definition\r\n   */\r\n  getColumn(columnName) {\r\n    return this.columns.find(col => col.name === columnName) || null;\r\n  }\r\n\r\n  /**\r\n   * Get all columns\r\n   * @returns {Array} Array of column definitions\r\n   */\r\n  getColumns() {\r\n    return this.columns;\r\n  }\r\n\r\n  // =============================================================================\r\n  // FORMAT IMPLEMENTATIONS\r\n  // =============================================================================\r\n\r\n  /**\r\n   * Format text (basic string conversion with null/undefined handling)\r\n   * @param {*} value - Value to format\r\n   * @returns {string} Formatted text\r\n   */\r\n  formatText(value) {\r\n    if (value == null) return '';\r\n    return String(value);\r\n  }\r\n\r\n  /**\r\n   * Format date using Intl.DateTimeFormat\r\n   * @param {*} value - Date value (string, Date, timestamp)\r\n   * @param {string} locale - Locale string (optional)\r\n   * @param {Object} options - Intl.DateTimeFormat options\r\n   * @returns {string} Formatted date\r\n   */\r\n  formatDate(value, locale, options = {}) {\r\n    if (value == null) return '';\r\n\r\n    try {\r\n      const date = value instanceof Date ? value : new Date(value);\r\n      \r\n      if (isNaN(date.getTime())) {\r\n        return String(value); // Return original if invalid date\r\n      }\r\n\r\n      const formatter = new Intl.DateTimeFormat(locale, options);\r\n      return formatter.format(date);\r\n    } catch (error) {\r\n      console.warn('TablixJS: Date formatting error:', error);\r\n      return String(value);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Format currency using Intl.NumberFormat\r\n   * @param {*} value - Numeric value\r\n   * @param {string} locale - Locale string (optional)\r\n   * @param {Object} options - Intl.NumberFormat options\r\n   * @param {string} currency - Currency code (e.g., 'USD', 'EUR')\r\n   * @returns {string} Formatted currency\r\n   */\r\n  formatCurrency(value, locale, options = {}, currency = 'USD') {\r\n    if (value == null) return '';\r\n\r\n    const numericValue = Number(value);\r\n    if (isNaN(numericValue)) {\r\n      return String(value);\r\n    }\r\n\r\n    try {\r\n      const formatOptions = {\r\n        style: 'currency',\r\n        currency: currency,\r\n        ...options\r\n      };\r\n\r\n      const formatter = new Intl.NumberFormat(locale, formatOptions);\r\n      return formatter.format(numericValue);\r\n    } catch (error) {\r\n      console.warn('TablixJS: Currency formatting error:', error);\r\n      return String(value);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Format number using Intl.NumberFormat\r\n   * @param {*} value - Numeric value\r\n   * @param {string} locale - Locale string (optional)\r\n   * @param {Object} options - Intl.NumberFormat options\r\n   * @returns {string} Formatted number\r\n   */\r\n  formatNumber(value, locale, options = {}) {\r\n    if (value == null) return '';\r\n\r\n    const numericValue = Number(value);\r\n    if (isNaN(numericValue)) {\r\n      return String(value);\r\n    }\r\n\r\n    try {\r\n      const formatter = new Intl.NumberFormat(locale, options);\r\n      return formatter.format(numericValue);\r\n    } catch (error) {\r\n      console.warn('TablixJS: Number formatting error:', error);\r\n      return String(value);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Format percentage using Intl.NumberFormat\r\n   * @param {*} value - Numeric value (0.5 = 50%)\r\n   * @param {string} locale - Locale string (optional)\r\n   * @param {Object} options - Intl.NumberFormat options\r\n   * @returns {string} Formatted percentage\r\n   */\r\n  formatPercent(value, locale, options = {}) {\r\n    if (value == null) return '';\r\n\r\n    const numericValue = Number(value);\r\n    if (isNaN(numericValue)) {\r\n      return String(value);\r\n    }\r\n\r\n    try {\r\n      const formatOptions = {\r\n        style: 'percent',\r\n        ...options\r\n      };\r\n\r\n      const formatter = new Intl.NumberFormat(locale, formatOptions);\r\n      return formatter.format(numericValue);\r\n    } catch (error) {\r\n      console.warn('TablixJS: Percent formatting error:', error);\r\n      return String(value);\r\n    }\r\n  }\r\n\r\n  // =============================================================================\r\n  // EXTENSIBILITY METHODS\r\n  // =============================================================================\r\n\r\n  /**\r\n   * Register a custom format type (for future extensibility)\r\n   * @param {string} formatType - Format type name\r\n   * @param {Function} formatterFactory - Function that creates formatter\r\n   */\r\n  registerFormat(formatType, formatterFactory) {\r\n    if (this.supportedFormats.includes(formatType)) {\r\n      console.warn(`TablixJS: Format type '${formatType}' already exists and will be overridden.`);\r\n    }\r\n\r\n    this.supportedFormats.push(formatType);\r\n    \r\n    // You would extend createFormatter method to handle this\r\n    // This is a placeholder for future plugin architecture\r\n    console.log(`TablixJS: Custom format '${formatType}' registered.`);\r\n  }\r\n\r\n  /**\r\n   * Get supported format types\r\n   * @returns {Array} Array of supported format type strings\r\n   */\r\n  getSupportedFormats() {\r\n    return [...this.supportedFormats];\r\n  }\r\n}\r\n","/**\r\n * FilterManager - Advanced column filtering system for TablixJS\r\n * \r\n * Features:\r\n * - Multi-column filtering with independent filter states\r\n * - Two filter types: \"value\" (checkbox selection) and \"condition\" (operators)\r\n * - Supports multiple conditions per column\r\n * - Extensible operator system for custom filters\r\n * - Integration with sorting and pagination\r\n */\r\nexport default class FilterManager {\r\n  constructor(table, options = {}) {\r\n    this.table = table;\r\n    this.options = {\r\n      enabled: true,\r\n      mode: 'client', // 'client' or 'server'\r\n      serverFilterLoader: null, // Function to load filtered data from server\r\n      debounceDelay: 300, // Debounce delay for input filters\r\n      showBadges: true, // Show filter count badges\r\n      showTooltips: true, // Show filter summary tooltips\r\n      ...options\r\n    };\r\n\r\n    // Filter state per column\r\n    this.columnFilters = new Map(); // { columnName: { type, config, isActive } }\r\n    \r\n    // Supported filter operators\r\n    this.operators = {\r\n      'none': { label: 'None', apply: () => true },\r\n      'isEmpty': { label: 'Is empty', apply: (value) => value === null || value === undefined || value === '' },\r\n      'isNotEmpty': { label: 'Is not empty', apply: (value) => value !== null && value !== undefined && value !== '' },\r\n      'equals': { label: 'Is equal to', apply: (value, filterValue) => String(value).toLowerCase() === String(filterValue).toLowerCase() },\r\n      'notEquals': { label: 'Is not equal to', apply: (value, filterValue) => String(value).toLowerCase() !== String(filterValue).toLowerCase() },\r\n      'beginsWith': { label: 'Begins with', apply: (value, filterValue) => String(value).toLowerCase().startsWith(String(filterValue).toLowerCase()) },\r\n      'endsWith': { label: 'Ends with', apply: (value, filterValue) => String(value).toLowerCase().endsWith(String(filterValue).toLowerCase()) },\r\n      'contains': { label: 'Contains', apply: (value, filterValue) => String(value).toLowerCase().includes(String(filterValue).toLowerCase()) },\r\n      'notContains': { label: 'Does not contain', apply: (value, filterValue) => !String(value).toLowerCase().includes(String(filterValue).toLowerCase()) }\r\n    };\r\n\r\n    // Debounce timer for input filtering\r\n    this.debounceTimer = null;\r\n\r\n    // Track open filter dropdowns\r\n    this.openDropdowns = new Set();\r\n  }\r\n\r\n  /**\r\n   * Apply filter to a specific column\r\n   * @param {string} columnName - Column to filter\r\n   * @param {Object} filterConfig - Filter configuration\r\n   */\r\n  async applyFilter(columnName, filterConfig) {\r\n    // Validate filter config\r\n    if (!this.validateFilterConfig(filterConfig)) {\r\n      console.warn(`TablixJS: Invalid filter config for column '${columnName}'`);\r\n      return;\r\n    }\r\n\r\n    // Trigger beforeFilter hook\r\n    const beforeFilterData = { \r\n      columnName, \r\n      filterConfig, \r\n      currentFilters: this.getActiveFilters() \r\n    };\r\n    this.table.eventManager.trigger('beforeFilter', beforeFilterData);\r\n\r\n    // Store filter state\r\n    this.columnFilters.set(columnName, {\r\n      type: filterConfig.type,\r\n      config: filterConfig,\r\n      isActive: this.isFilterActive(filterConfig)\r\n    });\r\n\r\n    // Update state manager with current filters\r\n    if (this.table.stateManager) {\r\n      this.table.stateManager.updateFilters(this.getActiveFilters());\r\n      // Reset to first page when filters change\r\n      this.table.stateManager.resetPage();\r\n    }\r\n\r\n    if (this.options.mode === 'server') {\r\n      // Server mode - update will be triggered by refreshTable via unified loader\r\n      await this.table.refreshTable();\r\n    } else {\r\n      // Client mode - apply filter locally\r\n      this._filterClient();\r\n      await this.table.refreshTable();\r\n    }\r\n\r\n    // Update UI indicators\r\n    this.updateFilterIndicators();\r\n\r\n    // Trigger afterFilter hook\r\n    this.table.eventManager.trigger('afterFilter', {\r\n      columnName,\r\n      filterConfig,\r\n      filteredData: this.table.dataManager.getData(),\r\n      activeFilters: this.getActiveFilters()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Clear filter for a specific column\r\n   * @param {string} columnName - Column to clear filter for\r\n   */\r\n  async clearFilter(columnName) {\r\n    if (!this.columnFilters.has(columnName)) return;\r\n\r\n    const beforeFilterData = { \r\n      columnName, \r\n      filterConfig: null, \r\n      currentFilters: this.getActiveFilters() \r\n    };\r\n    this.table.eventManager.trigger('beforeFilter', beforeFilterData);\r\n\r\n    this.columnFilters.delete(columnName);\r\n\r\n    // Update state manager with current filters\r\n    if (this.table.stateManager) {\r\n      this.table.stateManager.updateFilters(this.getActiveFilters());\r\n      this.table.stateManager.resetPage();\r\n    }\r\n\r\n    if (this.options.mode === 'server') {\r\n      await this.table.refreshTable();\r\n    } else {\r\n      this._filterClient();\r\n      await this.table.refreshTable();\r\n    }\r\n\r\n    this.updateFilterIndicators();\r\n\r\n    this.table.eventManager.trigger('afterFilter', {\r\n      columnName,\r\n      filterConfig: null,\r\n      filteredData: this.table.dataManager.getData(),\r\n      activeFilters: this.getActiveFilters()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Clear all filters\r\n   */\r\n  async clearAllFilters() {\r\n    if (this.columnFilters.size === 0) return;\r\n\r\n    const beforeFilterData = { \r\n      columnName: null, \r\n      filterConfig: null, \r\n      currentFilters: this.getActiveFilters() \r\n    };\r\n    this.table.eventManager.trigger('beforeFilter', beforeFilterData);\r\n\r\n    this.columnFilters.clear();\r\n\r\n    // Update state manager with empty filters\r\n    if (this.table.stateManager) {\r\n      this.table.stateManager.updateFilters({});\r\n      this.table.stateManager.resetPage();\r\n    }\r\n\r\n    if (this.options.mode === 'server') {\r\n      await this.table.refreshTable();\r\n    } else {\r\n      this._filterClient();\r\n      await this.table.refreshTable();\r\n    }\r\n\r\n    this.updateFilterIndicators();\r\n\r\n    this.table.eventManager.trigger('afterFilter', {\r\n      columnName: null,\r\n      filterConfig: null,\r\n      filteredData: this.table.dataManager.getData(),\r\n      activeFilters: this.getActiveFilters()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get active filters\r\n   * @returns {Object} Active filters by column\r\n   */\r\n  getActiveFilters() {\r\n    const activeFilters = {};\r\n    for (const [columnName, filterState] of this.columnFilters) {\r\n      if (filterState.isActive) {\r\n        activeFilters[columnName] = filterState.config;\r\n      }\r\n    }\r\n    return activeFilters;\r\n  }\r\n\r\n  /**\r\n   * Get unique values for a column (for value filtering)\r\n   * @param {string} columnName - Column name\r\n   * @returns {Array} Unique values\r\n   */\r\n  getColumnUniqueValues(columnName) {\r\n    // For server mode, use the current filtered data (what's loaded from server)\r\n    // For client mode, use the original data\r\n    const data = this.options.mode === 'server' \r\n      ? this.table.dataManager.filteredData \r\n      : this.table.dataManager.originalData;\r\n    \r\n    const values = new Set();\r\n    let hasComplexData = false;\r\n    \r\n    data.forEach(row => {\r\n      const value = row[columnName];\r\n      if (value !== null && value !== undefined) {\r\n        // Check if value is a complex object (not a primitive or Date)\r\n        if (typeof value === 'object' && !(value instanceof Date)) {\r\n          hasComplexData = true;\r\n          return; // Skip complex objects\r\n        }\r\n        values.add(String(value));\r\n      }\r\n    });\r\n    \r\n    // If column contains complex data (objects), return empty array\r\n    // This will disable value-based filtering for columns with nested/complex data\r\n    if (hasComplexData && values.size === 0) {\r\n      return [];\r\n    }\r\n    \r\n    return Array.from(values).sort();\r\n  }\r\n\r\n  /**\r\n   * Get filter state for a column\r\n   * @param {string} columnName - Column name\r\n   * @returns {Object|null} Filter state\r\n   */\r\n  getColumnFilter(columnName) {\r\n    return this.columnFilters.get(columnName) || null;\r\n  }\r\n\r\n  /**\r\n   * Check if column has active filter\r\n   * @param {string} columnName - Column name\r\n   * @returns {boolean} Whether column has active filter\r\n   */\r\n  hasColumnFilter(columnName) {\r\n    const filter = this.columnFilters.get(columnName);\r\n    return filter && filter.isActive;\r\n  }\r\n\r\n  /**\r\n   * Validate filter configuration\r\n   * @param {Object} filterConfig - Filter configuration\r\n   * @returns {boolean} Whether config is valid\r\n   */\r\n  validateFilterConfig(filterConfig) {\r\n    if (!filterConfig || !filterConfig.type) return false;\r\n    \r\n    if (filterConfig.type === 'value') {\r\n      return Array.isArray(filterConfig.values);\r\n    }\r\n    \r\n    if (filterConfig.type === 'condition') {\r\n      return Array.isArray(filterConfig.conditions) && \r\n             filterConfig.conditions.every(cond => \r\n               cond.operator && this.operators[cond.operator]\r\n             );\r\n    }\r\n    \r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Check if filter config represents an active filter\r\n   * @param {Object} filterConfig - Filter configuration\r\n   * @returns {boolean} Whether filter is active\r\n   */\r\n  isFilterActive(filterConfig) {\r\n    if (!filterConfig) return false;\r\n    \r\n    if (filterConfig.type === 'value') {\r\n      return filterConfig.values && filterConfig.values.length > 0;\r\n    }\r\n    \r\n    if (filterConfig.type === 'condition') {\r\n      return filterConfig.conditions && \r\n             filterConfig.conditions.some(cond => \r\n               cond.operator && cond.operator !== 'none' && \r\n               (cond.operator === 'isEmpty' || cond.operator === 'isNotEmpty' || cond.value !== undefined)\r\n             );\r\n    }\r\n    \r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Client-side filtering\r\n   * @private\r\n   */\r\n  _filterClient() {\r\n    const originalData = this.table.dataManager.originalData;\r\n    const activeFilters = this.getActiveFilters();\r\n    \r\n    let filteredData;\r\n    if (Object.keys(activeFilters).length === 0) {\r\n      // No filters, show all data\r\n      filteredData = [...originalData];\r\n    } else {\r\n      // Apply all active filters\r\n      filteredData = originalData.filter(row => {\r\n        return Object.entries(activeFilters).every(([columnName, filterConfig]) => {\r\n          return this._testRowAgainstFilter(row, columnName, filterConfig);\r\n        });\r\n      });\r\n    }\r\n\r\n    // Update DataManager with filtered data\r\n    this.table.dataManager.setFilteredData(filteredData);\r\n  }\r\n\r\n  /**\r\n   * Server-side filtering (DEPRECATED - now handled by unified loader)\r\n   * @deprecated Use unified _loadServerData in Table.js\r\n   * @private\r\n   */\r\n  async _filterServer() {\r\n    // This method is deprecated and should not be called anymore\r\n    // Filtering in server mode is now handled by the unified _loadServerData method\r\n    console.warn('_filterServer is deprecated. Server filtering now uses unified data loading.');\r\n    if (!this.options.serverFilterLoader) {\r\n      console.warn('TablixJS: Server-side filtering enabled but no serverFilterLoader provided');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const result = await this.options.serverFilterLoader({\r\n        filters: this.getActiveFilters(),\r\n        sort: this.table.sortingManager ? this.table.sortingManager.currentSort : null,\r\n        page: this.table.paginationManager ? this.table.paginationManager.currentPage : 1,\r\n        pageSize: this.table.paginationManager ? this.table.paginationManager.pageSize : 10\r\n      });\r\n\r\n      this.table.dataManager.setServerData(result.data, result.totalRows);\r\n    } catch (error) {\r\n      console.error('Failed to load filtered data from server:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Test a row against a filter\r\n   * @param {Object} row - Data row\r\n   * @param {string} columnName - Column name\r\n   * @param {Object} filterConfig - Filter configuration\r\n   * @returns {boolean} Whether row passes filter\r\n   * @private\r\n   */\r\n  _testRowAgainstFilter(row, columnName, filterConfig) {\r\n    const cellValue = row[columnName];\r\n    \r\n    if (filterConfig.type === 'value') {\r\n      // Value filter: check if cell value is in selected values\r\n      // Handle complex objects by converting to string safely\r\n      const cellValueStr = this._valueToString(cellValue);\r\n      return filterConfig.values.includes(cellValueStr);\r\n    }\r\n    \r\n    if (filterConfig.type === 'condition') {\r\n      // Condition filter: test all conditions (AND logic)\r\n      return filterConfig.conditions.every(condition => {\r\n        const operator = this.operators[condition.operator];\r\n        if (!operator) return true; // Unknown operator, pass\r\n        \r\n        return operator.apply(cellValue, condition.value);\r\n      });\r\n    }\r\n    \r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Update filter indicators in the UI\r\n   */\r\n  updateFilterIndicators() {\r\n    const headers = this.table.container.querySelectorAll('.tablix-th');\r\n    \r\n    headers.forEach(header => {\r\n      const columnName = header.dataset.column;\r\n      const hasFilter = this.hasColumnFilter(columnName);\r\n      const filterIndicator = header.querySelector('.tablix-filter-indicator');\r\n      \r\n      if (hasFilter) {\r\n        header.classList.add('tablix-filtered');\r\n        if (filterIndicator) {\r\n          filterIndicator.classList.add('tablix-filter-active');\r\n          \r\n          // Update badge if enabled\r\n          if (this.options.showBadges) {\r\n            this._updateFilterBadge(header, columnName);\r\n          }\r\n        }\r\n      } else {\r\n        header.classList.remove('tablix-filtered');\r\n        if (filterIndicator) {\r\n          filterIndicator.classList.remove('tablix-filter-active');\r\n          const badge = filterIndicator.querySelector('.tablix-filter-badge');\r\n          if (badge) badge.remove();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update filter badge for a column\r\n   * @param {Element} header - Header element\r\n   * @param {string} columnName - Column name\r\n   * @private\r\n   */\r\n  _updateFilterBadge(header, columnName) {\r\n    const filterIndicator = header.querySelector('.tablix-filter-indicator');\r\n    if (!filterIndicator) return;\r\n    \r\n    const filter = this.getColumnFilter(columnName);\r\n    if (!filter || !filter.isActive) return;\r\n    \r\n    let badgeText = '';\r\n    if (filter.type === 'value') {\r\n      badgeText = filter.config.values.length.toString();\r\n    } else if (filter.type === 'condition') {\r\n      const activeConditions = filter.config.conditions.filter(cond => \r\n        cond.operator && cond.operator !== 'none'\r\n      );\r\n      badgeText = activeConditions.length.toString();\r\n    }\r\n    \r\n    let badge = filterIndicator.querySelector('.tablix-filter-badge');\r\n    if (!badge && badgeText) {\r\n      badge = document.createElement('span');\r\n      badge.className = 'tablix-filter-badge';\r\n      filterIndicator.appendChild(badge);\r\n    }\r\n    \r\n    if (badge) {\r\n      badge.textContent = badgeText;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Convert a value to string safely, handling complex objects\r\n   * @param {*} value - Value to convert\r\n   * @returns {string} String representation\r\n   * @private\r\n   */\r\n  _valueToString(value) {\r\n    if (value === null || value === undefined) {\r\n      return '';\r\n    }\r\n    if (typeof value === 'object' && !(value instanceof Date)) {\r\n      // For complex objects, use JSON stringify for comparison\r\n      return JSON.stringify(value);\r\n    }\r\n    return String(value);\r\n  }\r\n\r\n  /**\r\n   * Register a custom filter operator\r\n   * @param {string} name - Operator name\r\n   * @param {Object} operator - Operator definition\r\n   */\r\n  registerOperator(name, operator) {\r\n    if (!operator.label || typeof operator.apply !== 'function') {\r\n      throw new Error('TablixJS: Custom operator must have label and apply function');\r\n    }\r\n    \r\n    this.operators[name] = operator;\r\n  }\r\n\r\n  /**\r\n   * Get available operators\r\n   * @returns {Object} Available operators\r\n   */\r\n  getOperators() {\r\n    return { ...this.operators };\r\n  }\r\n}\r\n","/**\r\n * FilterUI - User interface components for TablixJS filtering\r\n * Handles dropdown creation, event binding, and filter interactions\r\n */\r\nexport default class FilterUI {\r\n  constructor(filterManager) {\r\n    this.filterManager = filterManager;\r\n    this.table = filterManager.table;\r\n    \r\n    // Track open dropdowns\r\n    this.activeDropdown = null;\r\n    \r\n    // Bind methods to preserve context\r\n    this.handleDocumentClick = this.handleDocumentClick.bind(this);\r\n    this.handleFilterIconClick = this.handleFilterIconClick.bind(this);\r\n    \r\n    // Initialize event listeners\r\n    this.init();\r\n  }\r\n\r\n  /**\r\n   * Initialize the FilterUI\r\n   */\r\n  init() {\r\n    // Add document click listener to close dropdowns\r\n    document.addEventListener('click', this.handleDocumentClick);\r\n  }\r\n\r\n  /**\r\n   * Check if a column contains complex data (objects)\r\n   * Complex data columns cannot use value-based filtering\r\n   * \r\n   * @param {string} columnName - Column name to check\r\n   * @returns {boolean} True if column contains complex data\r\n   * \r\n   * FUTURE IMPLEMENTATION:\r\n   * - Could add configuration option to enable filtering on specific object properties\r\n   * - Could support custom filter functions for complex data columns\r\n   * - Could allow filtering on rendered output instead of raw data\r\n   */\r\n  _hasComplexData(columnName) {\r\n    const data = this.table.dataManager.originalData || [];\r\n    \r\n    // Check first non-null value to determine if column has complex data\r\n    for (let i = 0; i < Math.min(data.length, 100); i++) {\r\n      const value = data[i][columnName];\r\n      if (value !== null && value !== undefined) {\r\n        // Check if value is a complex object (not a primitive or Date)\r\n        if (typeof value === 'object' && !(value instanceof Date)) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    \r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Destroy FilterUI and clean up event listeners\r\n   */\r\n  destroy() {\r\n    document.removeEventListener('click', this.handleDocumentClick);\r\n    this.closeAllDropdowns();\r\n  }\r\n\r\n  /**\r\n   * Render filter icons in table headers\r\n   * Note: Filter icons are not rendered for columns with complex data (objects)\r\n   * as value-based filtering is not supported for such columns.\r\n   */\r\n  renderFilterIcons() {\r\n    const headers = this.table.container.querySelectorAll('.tablix-th');\r\n    \r\n    headers.forEach(header => {\r\n      const columnName = header.dataset.column;\r\n      if (!columnName) return;\r\n      \r\n      const thContent = header.querySelector('.tablix-th-content');\r\n      if (!thContent) return;\r\n      \r\n      // Skip rendering filter icon for columns with complex data\r\n      // Complex data (objects) cannot use value-based filtering\r\n      if (this._hasComplexData(columnName)) {\r\n        return;\r\n      }\r\n      \r\n      // Check if filter icon already exists\r\n      let filterIndicator = header.querySelector('.tablix-filter-indicator');\r\n      \r\n      if (filterIndicator) {\r\n        // Update existing filter indicator with new translations\r\n        const filterIcon = filterIndicator.querySelector('.tablix-filter-icon');\r\n        if (filterIcon) {\r\n          filterIcon.title = this.table.t('filter.filterColumn');\r\n        }\r\n        return;\r\n      }\r\n      \r\n      // Create new filter indicator\r\n      filterIndicator = document.createElement('span');\r\n      filterIndicator.className = 'tablix-filter-indicator';\r\n      filterIndicator.innerHTML = `\r\n        <span class=\"tablix-filter-icon\" title=\"${this.table.t('filter.filterColumn')}\">🞃</span>\r\n      `;\r\n      \r\n      // Add click handler\r\n      filterIndicator.addEventListener('click', (e) => {\r\n        e.stopPropagation();\r\n        this.handleFilterIconClick(columnName, filterIndicator);\r\n      });\r\n      \r\n      // Insert after sort indicator or at end\r\n      const sortIndicator = thContent.querySelector('.tablix-sort-indicator');\r\n      if (sortIndicator) {\r\n        thContent.insertBefore(filterIndicator, sortIndicator.nextSibling);\r\n      } else {\r\n        thContent.appendChild(filterIndicator);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Handle filter icon click\r\n   * @param {string} columnName - Column name\r\n   * @param {Element} filterIndicator - Filter indicator element\r\n   */\r\n  handleFilterIconClick(columnName, filterIndicator) {\r\n    // Close any existing dropdown\r\n    this.closeAllDropdowns();\r\n    \r\n    // Create and show dropdown\r\n    const dropdown = this.createFilterDropdown(columnName);\r\n    this.showDropdown(dropdown, filterIndicator);\r\n    this.activeDropdown = { dropdown, columnName };\r\n  }\r\n\r\n  /**\r\n   * Handle document clicks to close dropdowns\r\n   * @param {Event} event - Click event\r\n   */\r\n  handleDocumentClick(event) {\r\n    if (this.activeDropdown) {\r\n      const dropdown = this.activeDropdown.dropdown;\r\n      if (!dropdown.contains(event.target)) {\r\n        this.closeAllDropdowns();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create filter dropdown for a column\r\n   * @param {string} columnName - Column name\r\n   * @returns {Element} Dropdown element\r\n   */\r\n  createFilterDropdown(columnName) {\r\n    const dropdown = document.createElement('div');\r\n    dropdown.className = 'tablix-filter-dropdown';\r\n    dropdown.innerHTML = this.renderDropdownContent(columnName);\r\n    \r\n    // Add event listeners\r\n    this.bindDropdownEvents(dropdown, columnName);\r\n    \r\n    return dropdown;\r\n  }\r\n\r\n  /**\r\n   * Render dropdown content\r\n   * @param {string} columnName - Column name\r\n   * @returns {string} HTML content\r\n   */\r\n  renderDropdownContent(columnName) {\r\n    const currentFilter = this.filterManager.getColumnFilter(columnName);\r\n    \r\n    return `\r\n      <div class=\"tablix-filter-dropdown-header\">\r\n        <h4>${this.table.t('filter.filter')}: ${columnName}</h4>\r\n        <button class=\"tablix-filter-close\" type=\"button\">×</button>\r\n      </div>\r\n      \r\n      <div class=\"tablix-filter-tabs\">\r\n        <button class=\"tablix-filter-tab ${!currentFilter || currentFilter.type === 'value' ? 'active' : ''}\" \r\n                data-tab=\"value\">${this.table.t('filter.filterByValue')}</button>\r\n        <button class=\"tablix-filter-tab ${currentFilter && currentFilter.type === 'condition' ? 'active' : ''}\" \r\n                data-tab=\"condition\">${this.table.t('filter.filterByCondition')}</button>\r\n      </div>\r\n      \r\n      <div class=\"tablix-filter-content\">\r\n        <div class=\"tablix-filter-panel tablix-filter-value-panel ${!currentFilter || currentFilter.type === 'value' ? 'active' : ''}\">\r\n          ${this.renderValueFilterPanel(columnName, currentFilter)}\r\n        </div>\r\n        \r\n        <div class=\"tablix-filter-panel tablix-filter-condition-panel ${currentFilter && currentFilter.type === 'condition' ? 'active' : ''}\">\r\n          ${this.renderConditionFilterPanel(columnName, currentFilter)}\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"tablix-filter-actions\">\r\n        <button class=\"tablix-filter-apply\" type=\"button\">${this.table.t('filter.apply')}</button>\r\n        <button class=\"tablix-filter-clear\" type=\"button\">${this.table.t('filter.clear')}</button>\r\n        <button class=\"tablix-filter-cancel\" type=\"button\">${this.table.t('filter.cancel')}</button>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  /**\r\n   * Render value filter panel (checkbox list)\r\n   * @param {string} columnName - Column name\r\n   * @param {Object|null} currentFilter - Current filter state\r\n   * @returns {string} HTML content\r\n   */\r\n  renderValueFilterPanel(columnName, currentFilter) {\r\n    const uniqueValues = this.filterManager.getColumnUniqueValues(columnName);\r\n    const selectedValues = currentFilter && currentFilter.type === 'value' ? \r\n      currentFilter.config.values : [];\r\n    \r\n    if (uniqueValues.length === 0) {\r\n      // Check if the column contains complex data by sampling the first row\r\n      const data = this.table.dataManager.originalData;\r\n      const hasComplexData = data.length > 0 && \r\n        typeof data[0][columnName] === 'object' && \r\n        !(data[0][columnName] instanceof Date);\r\n      \r\n      const message = hasComplexData \r\n        ? this.table.t('filter.complexDataNotSupported') || 'Value filtering is not available for columns with complex data. Use Condition filtering instead.'\r\n        : this.table.t('filter.noValuesAvailable');\r\n      \r\n      return `<p class=\"tablix-filter-empty\">${message}</p>`;\r\n    }\r\n    \r\n    let html = `\r\n      <div class=\"tablix-filter-search\">\r\n        <input type=\"text\" \r\n               id=\"tablix-filter-search-${columnName}\" \r\n               name=\"filter-search-${columnName}\"\r\n               placeholder=\"${this.table.t('filter.searchValues')}\" \r\n               class=\"tablix-filter-search-input\">\r\n      </div>\r\n      <div class=\"tablix-filter-select-all\">\r\n        <label>\r\n          <input type=\"checkbox\" \r\n                 id=\"tablix-filter-select-all-${columnName}\" \r\n                 name=\"filter-select-all-${columnName}\"\r\n                 class=\"tablix-filter-select-all-checkbox\"> ${this.table.t('filter.selectAll')}\r\n        </label>\r\n      </div>\r\n      <div class=\"tablix-filter-values\">\r\n    `;\r\n    \r\n    uniqueValues.forEach((value, index) => {\r\n      const isChecked = selectedValues.includes(value);\r\n      const valueId = `tablix-filter-value-${columnName}-${index}`;\r\n      html += `\r\n        <label class=\"tablix-filter-value-item\">\r\n          <input type=\"checkbox\" \r\n                 id=\"${valueId}\" \r\n                 name=\"filter-value-${columnName}\" \r\n                 value=\"${this.escapeHtml(value)}\" \r\n                 ${isChecked ? 'checked' : ''}>\r\n          <span class=\"tablix-filter-value-text\">${this.escapeHtml(value)}</span>\r\n        </label>\r\n      `;\r\n    });\r\n    \r\n    html += '</div>';\r\n    return html;\r\n  }\r\n\r\n  /**\r\n   * Render condition filter panel\r\n   * @param {string} columnName - Column name\r\n   * @param {Object|null} currentFilter - Current filter state\r\n   * @returns {string} HTML content\r\n   */\r\n  renderConditionFilterPanel(columnName, currentFilter) {\r\n    const conditions = currentFilter && currentFilter.type === 'condition' ? \r\n      currentFilter.config.conditions : [{ operator: 'none', value: '' }];\r\n    \r\n    let html = '<div class=\"tablix-filter-conditions\">';\r\n    \r\n    conditions.forEach((condition, index) => {\r\n      html += this.renderConditionRow(condition, index);\r\n    });\r\n    \r\n    html += `\r\n      </div>\r\n      <button class=\"tablix-filter-add-condition\" type=\"button\">+ ${this.table.t('filter.addCondition')}</button>\r\n    `;\r\n    \r\n    return html;\r\n  }\r\n\r\n  /**\r\n   * Render a single condition row\r\n   * @param {Object} condition - Condition object\r\n   * @param {number} index - Condition index\r\n   * @returns {string} HTML content\r\n   */\r\n  renderConditionRow(condition, index) {\r\n    const operators = this.filterManager.getOperators();\r\n    const needsValue = condition.operator && \r\n      !['none', 'isEmpty', 'isNotEmpty'].includes(condition.operator);\r\n    \r\n    let html = `\r\n      <div class=\"tablix-filter-condition\" data-index=\"${index}\">\r\n        <select class=\"tablix-filter-operator\" \r\n                id=\"tablix-filter-operator-${index}\" \r\n                name=\"filter-operator-${index}\">\r\n    `;\r\n    \r\n    Object.entries(operators).forEach(([key, op]) => {\r\n      const selected = condition.operator === key ? ' selected' : '';\r\n      html += `<option value=\"${key}\"${selected}>${op.label}</option>`;\r\n    });\r\n    \r\n    html += `\r\n        </select>\r\n        <input type=\"text\" \r\n               id=\"tablix-filter-value-${index}\" \r\n               name=\"filter-value-${index}\"\r\n               class=\"tablix-filter-value\" \r\n               placeholder=\"${this.table.t('filter.value')}\" \r\n               value=\"${this.escapeHtml(condition.value || '')}\"\r\n               ${needsValue ? '' : 'disabled'}>\r\n        <button class=\"tablix-filter-remove-condition\" \r\n                type=\"button\" \r\n                data-index=\"${index}\"\r\n                title=\"${this.table.t('filter.removeCondition')}\">×</button>\r\n      </div>\r\n    `;\r\n    \r\n    return html;\r\n  }\r\n\r\n  /**\r\n   * Bind dropdown event listeners\r\n   * @param {Element} dropdown - Dropdown element\r\n   * @param {string} columnName - Column name\r\n   */\r\n  bindDropdownEvents(dropdown, columnName) {\r\n    // Tab switching\r\n    dropdown.querySelectorAll('.tablix-filter-tab').forEach(tab => {\r\n      tab.addEventListener('click', (e) => {\r\n        const tabType = e.target.dataset.tab;\r\n        this.switchTab(dropdown, tabType);\r\n      });\r\n    });\r\n\r\n    // Close button\r\n    dropdown.querySelector('.tablix-filter-close').addEventListener('click', () => {\r\n      this.closeAllDropdowns();\r\n    });\r\n\r\n    // Action buttons\r\n    dropdown.querySelector('.tablix-filter-apply').addEventListener('click', () => {\r\n      this.applyFilter(dropdown, columnName);\r\n    });\r\n\r\n    dropdown.querySelector('.tablix-filter-clear').addEventListener('click', () => {\r\n      this.clearFilter(columnName);\r\n    });\r\n\r\n    dropdown.querySelector('.tablix-filter-cancel').addEventListener('click', () => {\r\n      this.closeAllDropdowns();\r\n    });\r\n\r\n    // Value filter events\r\n    this.bindValueFilterEvents(dropdown, columnName);\r\n    \r\n    // Condition filter events\r\n    this.bindConditionFilterEvents(dropdown, columnName);\r\n  }\r\n\r\n  /**\r\n   * Bind value filter events\r\n   * @param {Element} dropdown - Dropdown element\r\n   * @param {string} columnName - Column name\r\n   */\r\n  bindValueFilterEvents(dropdown, columnName) {\r\n    const valuePanel = dropdown.querySelector('.tablix-filter-value-panel');\r\n    if (!valuePanel) return;\r\n\r\n    // Search input with debouncing\r\n    const searchInput = valuePanel.querySelector('.tablix-filter-search-input');\r\n    if (searchInput) {\r\n      let searchTimeout;\r\n      searchInput.addEventListener('input', (e) => {\r\n        clearTimeout(searchTimeout);\r\n        searchTimeout = setTimeout(() => {\r\n          this.filterValueList(valuePanel, e.target.value);\r\n        }, this.filterManager.options.debounceDelay || 150);\r\n      });\r\n    }\r\n\r\n    // Select all checkbox\r\n    const selectAllCheckbox = valuePanel.querySelector('.tablix-filter-select-all-checkbox');\r\n    if (selectAllCheckbox) {\r\n      selectAllCheckbox.addEventListener('change', (e) => {\r\n        this.toggleSelectAll(valuePanel, e.target.checked);\r\n      });\r\n    }\r\n\r\n    // Individual value checkboxes\r\n    valuePanel.querySelectorAll('.tablix-filter-value-item input[type=\"checkbox\"]').forEach(checkbox => {\r\n      checkbox.addEventListener('change', () => {\r\n        this.updateSelectAllState(valuePanel);\r\n      });\r\n    });\r\n\r\n    // Update select all state based on current selections\r\n    this.updateSelectAllState(valuePanel);\r\n  }\r\n\r\n  /**\r\n   * Bind condition filter events\r\n   * @param {Element} dropdown - Dropdown element\r\n   * @param {string} columnName - Column name\r\n   */\r\n  bindConditionFilterEvents(dropdown, columnName) {\r\n    const conditionPanel = dropdown.querySelector('.tablix-filter-condition-panel');\r\n    if (!conditionPanel) return;\r\n\r\n    // Add condition button\r\n    const addButton = conditionPanel.querySelector('.tablix-filter-add-condition');\r\n    if (addButton) {\r\n      addButton.addEventListener('click', () => {\r\n        this.addCondition(conditionPanel);\r\n      });\r\n    }\r\n\r\n    // Operator and value changes\r\n    this.bindConditionRowEvents(conditionPanel);\r\n  }\r\n\r\n  /**\r\n   * Bind events for condition rows\r\n   * @param {Element} conditionPanel - Condition panel element\r\n   */\r\n  bindConditionRowEvents(conditionPanel) {\r\n    // Operator changes\r\n    conditionPanel.querySelectorAll('.tablix-filter-operator').forEach(select => {\r\n      select.addEventListener('change', (e) => {\r\n        const valueInput = e.target.parentElement.querySelector('.tablix-filter-value');\r\n        const needsValue = !['none', 'isEmpty', 'isNotEmpty'].includes(e.target.value);\r\n        valueInput.disabled = !needsValue;\r\n        if (!needsValue) valueInput.value = '';\r\n      });\r\n    });\r\n\r\n    // Remove condition buttons\r\n    conditionPanel.querySelectorAll('.tablix-filter-remove-condition').forEach(button => {\r\n      button.addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation(); // Prevent dropdown from closing\r\n        \r\n        const conditionRow = e.target.closest('.tablix-filter-condition');\r\n        const conditionsContainer = conditionPanel.querySelector('.tablix-filter-conditions');\r\n        \r\n        if (conditionsContainer.querySelectorAll('.tablix-filter-condition').length > 1) {\r\n          conditionRow.remove();\r\n        } else {\r\n          // If it's the last condition, reset it to \"none\" instead of removing\r\n          const operatorSelect = conditionRow.querySelector('.tablix-filter-operator');\r\n          const valueInput = conditionRow.querySelector('.tablix-filter-value');\r\n          operatorSelect.value = 'none';\r\n          valueInput.value = '';\r\n          valueInput.disabled = true;\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Switch between filter tabs\r\n   * @param {Element} dropdown - Dropdown element\r\n   * @param {string} tabType - Tab type ('value' or 'condition')\r\n   */\r\n  switchTab(dropdown, tabType) {\r\n    // Update tab buttons\r\n    dropdown.querySelectorAll('.tablix-filter-tab').forEach(tab => {\r\n      tab.classList.toggle('active', tab.dataset.tab === tabType);\r\n    });\r\n\r\n    // Update panels\r\n    dropdown.querySelectorAll('.tablix-filter-panel').forEach(panel => {\r\n      const isActive = panel.classList.contains(`tablix-filter-${tabType}-panel`);\r\n      panel.classList.toggle('active', isActive);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Filter value list based on search\r\n   * @param {Element} valuePanel - Value panel element\r\n   * @param {string} searchTerm - Search term\r\n   */\r\n  filterValueList(valuePanel, searchTerm) {\r\n    const items = valuePanel.querySelectorAll('.tablix-filter-value-item');\r\n    const term = searchTerm.toLowerCase();\r\n    \r\n    items.forEach(item => {\r\n      const text = item.querySelector('.tablix-filter-value-text').textContent.toLowerCase();\r\n      const matches = text.includes(term);\r\n      item.style.display = matches ? '' : 'none';\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Toggle select all checkboxes\r\n   * @param {Element} valuePanel - Value panel element\r\n   * @param {boolean} checked - Whether to check all\r\n   */\r\n  toggleSelectAll(valuePanel, checked) {\r\n    const checkboxes = valuePanel.querySelectorAll('.tablix-filter-value-item input[type=\"checkbox\"]');\r\n    checkboxes.forEach(checkbox => {\r\n      const item = checkbox.closest('.tablix-filter-value-item');\r\n      if (item.style.display !== 'none') {\r\n        checkbox.checked = checked;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update select all checkbox state\r\n   * @param {Element} valuePanel - Value panel element\r\n   */\r\n  updateSelectAllState(valuePanel) {\r\n    const selectAllCheckbox = valuePanel.querySelector('.tablix-filter-select-all-checkbox');\r\n    if (!selectAllCheckbox) return;\r\n\r\n    const checkboxes = valuePanel.querySelectorAll('.tablix-filter-value-item input[type=\"checkbox\"]');\r\n    const visibleCheckboxes = Array.from(checkboxes).filter(cb => \r\n      cb.closest('.tablix-filter-value-item').style.display !== 'none'\r\n    );\r\n    \r\n    const checkedCount = visibleCheckboxes.filter(cb => cb.checked).length;\r\n    \r\n    selectAllCheckbox.checked = checkedCount > 0 && checkedCount === visibleCheckboxes.length;\r\n    selectAllCheckbox.indeterminate = checkedCount > 0 && checkedCount < visibleCheckboxes.length;\r\n  }\r\n\r\n  /**\r\n   * Add a new condition row\r\n   * @param {Element} conditionPanel - Condition panel element\r\n   */\r\n  addCondition(conditionPanel) {\r\n    const conditionsContainer = conditionPanel.querySelector('.tablix-filter-conditions');\r\n    const newIndex = conditionsContainer.children.length;\r\n    \r\n    const conditionHtml = this.renderConditionRow({ operator: 'none', value: '' }, newIndex);\r\n    conditionsContainer.insertAdjacentHTML('beforeend', conditionHtml);\r\n    \r\n    // Bind events for the new condition only\r\n    const newCondition = conditionsContainer.lastElementChild;\r\n    \r\n    // Bind operator change event\r\n    const operatorSelect = newCondition.querySelector('.tablix-filter-operator');\r\n    operatorSelect.addEventListener('change', (e) => {\r\n      const valueInput = e.target.parentElement.querySelector('.tablix-filter-value');\r\n      const needsValue = !['none', 'isEmpty', 'isNotEmpty'].includes(e.target.value);\r\n      valueInput.disabled = !needsValue;\r\n      if (!needsValue) valueInput.value = '';\r\n    });\r\n\r\n    // Bind remove button event\r\n    const removeButton = newCondition.querySelector('.tablix-filter-remove-condition');\r\n    removeButton.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      e.stopPropagation(); // Prevent dropdown from closing\r\n      \r\n      const conditionRow = e.target.closest('.tablix-filter-condition');\r\n      const conditionsContainer = conditionPanel.querySelector('.tablix-filter-conditions');\r\n      \r\n      if (conditionsContainer.querySelectorAll('.tablix-filter-condition').length > 1) {\r\n        conditionRow.remove();\r\n      } else {\r\n        // If it's the last condition, reset it to \"none\" instead of removing\r\n        const operatorSelect = conditionRow.querySelector('.tablix-filter-operator');\r\n        const valueInput = conditionRow.querySelector('.tablix-filter-value');\r\n        operatorSelect.value = 'none';\r\n        valueInput.value = '';\r\n        valueInput.disabled = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Apply current filter settings\r\n   * @param {Element} dropdown - Dropdown element\r\n   * @param {string} columnName - Column name\r\n   */\r\n  async applyFilter(dropdown, columnName) {\r\n    const activeTab = dropdown.querySelector('.tablix-filter-tab.active').dataset.tab;\r\n    let filterConfig;\r\n\r\n    if (activeTab === 'value') {\r\n      filterConfig = this.collectValueFilter(dropdown);\r\n    } else {\r\n      filterConfig = this.collectConditionFilter(dropdown);\r\n    }\r\n\r\n    await this.filterManager.applyFilter(columnName, filterConfig);\r\n    this.closeAllDropdowns();\r\n  }\r\n\r\n  /**\r\n   * Collect value filter configuration\r\n   * @param {Element} dropdown - Dropdown element\r\n   * @returns {Object} Filter configuration\r\n   */\r\n  collectValueFilter(dropdown) {\r\n    const valuePanel = dropdown.querySelector('.tablix-filter-value-panel');\r\n    const checkboxes = valuePanel.querySelectorAll('.tablix-filter-value-item input[type=\"checkbox\"]:checked');\r\n    const values = Array.from(checkboxes).map(cb => cb.value);\r\n    \r\n    return {\r\n      type: 'value',\r\n      values: values\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Collect condition filter configuration\r\n   * @param {Element} dropdown - Dropdown element\r\n   * @returns {Object} Filter configuration\r\n   */\r\n  collectConditionFilter(dropdown) {\r\n    const conditionPanel = dropdown.querySelector('.tablix-filter-condition-panel');\r\n    const conditionRows = conditionPanel.querySelectorAll('.tablix-filter-condition');\r\n    \r\n    const conditions = Array.from(conditionRows).map(row => {\r\n      const operator = row.querySelector('.tablix-filter-operator').value;\r\n      const value = row.querySelector('.tablix-filter-value').value;\r\n      \r\n      return { operator, value };\r\n    }).filter(cond => cond.operator !== 'none');\r\n    \r\n    return {\r\n      type: 'condition',\r\n      conditions: conditions\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Clear filter for column\r\n   * @param {string} columnName - Column name\r\n   */\r\n  async clearFilter(columnName) {\r\n    await this.filterManager.clearFilter(columnName);\r\n    this.closeAllDropdowns();\r\n  }\r\n\r\n  /**\r\n   * Show dropdown positioned relative to trigger element\r\n   * @param {Element} dropdown - Dropdown element\r\n   * @param {Element} trigger - Trigger element\r\n   */\r\n  showDropdown(dropdown, trigger) {\r\n    document.body.appendChild(dropdown);\r\n    \r\n    // Make dropdown visible but off-screen to measure it\r\n    dropdown.style.position = 'absolute';\r\n    dropdown.style.top = '-9999px';\r\n    dropdown.style.left = '-9999px';\r\n    dropdown.style.display = 'block';\r\n    dropdown.style.visibility = 'hidden';\r\n    \r\n    // Force reflow to ensure accurate measurements\r\n    dropdown.offsetHeight;\r\n    \r\n    // Get accurate measurements\r\n    const triggerRect = trigger.getBoundingClientRect();\r\n    const dropdownRect = dropdown.getBoundingClientRect();\r\n    \r\n    let left = triggerRect.left + window.scrollX;\r\n    let top = triggerRect.bottom + window.scrollY + 5;\r\n    \r\n    // Adjust if dropdown goes off screen\r\n    if (left + dropdownRect.width > window.innerWidth + window.scrollX) {\r\n      left = window.innerWidth + window.scrollX - dropdownRect.width - 10;\r\n    }\r\n    \r\n    if (top + dropdownRect.height > window.innerHeight + window.scrollY) {\r\n      top = triggerRect.top + window.scrollY - dropdownRect.height - 5;\r\n    }\r\n    \r\n    // Ensure dropdown stays within viewport\r\n    left = Math.max(window.scrollX + 10, left);\r\n    top = Math.max(window.scrollY + 10, top);\r\n    \r\n    // Apply final positioning and make visible\r\n    dropdown.style.left = `${left}px`;\r\n    dropdown.style.top = `${top}px`;\r\n    dropdown.style.visibility = 'visible';\r\n  }\r\n\r\n  /**\r\n   * Close all open dropdowns\r\n   */\r\n  closeAllDropdowns() {\r\n    if (this.activeDropdown) {\r\n      this.activeDropdown.dropdown.remove();\r\n      this.activeDropdown = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Escape HTML to prevent XSS\r\n   * @param {string} text - Text to escape\r\n   * @returns {string} Escaped text\r\n   */\r\n  escapeHtml(text) {\r\n    const div = document.createElement('div');\r\n    div.textContent = text;\r\n    return div.innerHTML;\r\n  }\r\n}\r\n","/**\r\n * SearchManager - Global search functionality for TablixJS\r\n * Provides real-time search across all table columns\r\n */\r\nexport default class SearchManager {\r\n  constructor(table, options = {}) {\r\n    this.table = table;\r\n    this.options = {\r\n      enabled: true,\r\n      placeholder: 'Search...',\r\n      searchDelay: 300, // Debounce delay in milliseconds\r\n      caseSensitive: false,\r\n      searchColumns: [], // Empty array means search all columns\r\n      minLength: 1, // Minimum characters before search starts (changed from 0 to 1)\r\n      ...options\r\n    };\r\n\r\n    // Ensure placeholder is never undefined to prevent \"undefined\" from showing in UI\r\n    if (!this.options.placeholder) {\r\n      this.options.placeholder = 'Search...';\r\n    }\r\n\r\n    // Current search state\r\n    this.currentSearchTerm = '';\r\n    this.searchTimeout = null;\r\n    this.originalData = null;\r\n\r\n    // Bind methods to preserve context\r\n    this.handleSearchInput = this.handleSearchInput.bind(this);\r\n    this.handleSearchClear = this.handleSearchClear.bind(this);\r\n  }\r\n\r\n  /**\r\n   * Initialize search functionality\r\n   */\r\n  init() {\r\n    // Store reference to original data\r\n    this.originalData = this.table.dataManager.originalData;\r\n    \r\n    // Listen for data changes\r\n    this.table.eventManager.on('afterLoad', (data) => {\r\n      this.originalData = data.data || data.source;\r\n      // Reapply search if there's an active search term\r\n      if (this.currentSearchTerm) {\r\n        this.performSearch(this.currentSearchTerm);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Bind search events to UI elements\r\n   */\r\n  bindEvents() {\r\n    const searchInput = this.table.container.querySelector('.tablix-search-input');\r\n    const searchClear = this.table.container.querySelector('.tablix-search-clear');\r\n\r\n    if (searchInput) {\r\n      // Ensure input value matches current search term\r\n      if (this.currentSearchTerm && searchInput.value !== this.currentSearchTerm) {\r\n        searchInput.value = this.currentSearchTerm;\r\n      }\r\n      \r\n      searchInput.addEventListener('input', this.handleSearchInput);\r\n      searchInput.addEventListener('keydown', (e) => {\r\n        if (e.key === 'Escape') {\r\n          this.clearSearch();\r\n        }\r\n      });\r\n    }\r\n\r\n    if (searchClear) {\r\n      searchClear.addEventListener('click', this.handleSearchClear);\r\n    }\r\n\r\n    // Update clear button visibility\r\n    this.updateClearButtonVisibility();\r\n  }\r\n\r\n  /**\r\n   * Handle search input with debouncing\r\n   * @param {Event} event - Input event\r\n   */\r\n  handleSearchInput(event) {\r\n    const searchTerm = event.target.value;\r\n    \r\n    // Clear existing timeout\r\n    if (this.searchTimeout) {\r\n      clearTimeout(this.searchTimeout);\r\n    }\r\n\r\n    // Debounce search based on configurable delay\r\n    this.searchTimeout = setTimeout(() => {\r\n      this.performSearch(searchTerm);\r\n    }, this.options.searchDelay);\r\n  }\r\n\r\n  /**\r\n   * Handle search clear button\r\n   * @param {Event} event - Click event\r\n   */\r\n  handleSearchClear(event) {\r\n    event.preventDefault();\r\n    this.clearSearch();\r\n  }\r\n\r\n  /**\r\n   * Perform the actual search\r\n   * @param {string} searchTerm - Search term\r\n   */\r\n  async performSearch(searchTerm) {\r\n    const previousTerm = this.currentSearchTerm;\r\n    \r\n    // Capture focus state before performing search\r\n    const searchInput = this.table.container.querySelector('.tablix-search-input');\r\n    const hadFocus = searchInput && document.activeElement === searchInput;\r\n    const cursorPosition = searchInput ? searchInput.selectionStart || 0 : 0;\r\n    \r\n    // Trigger beforeSearch event with more detailed information\r\n    const beforeSearchData = { \r\n      searchTerm, \r\n      previousTerm,\r\n      minLength: this.options.minLength,\r\n      searchDelay: this.options.searchDelay,\r\n      willSearch: searchTerm.length >= this.options.minLength\r\n    };\r\n    \r\n    this.table.eventManager.trigger('beforeSearch', beforeSearchData);\r\n\r\n    this.currentSearchTerm = searchTerm;\r\n\r\n    // Update state manager with search term\r\n    if (this.table.stateManager) {\r\n      this.table.stateManager.updateSearch(searchTerm);\r\n      // Reset to first page when search changes\r\n      this.table.stateManager.resetPage();\r\n    }\r\n\r\n    // Check if we're in server mode\r\n    const isServerMode = this.table._isServerMode && this.table._isServerMode();\r\n\r\n    if (isServerMode) {\r\n      // Server mode - let refreshTable handle the server request with search param\r\n      // Reset pagination to first page\r\n      if (this.table.paginationManager) {\r\n        this.table.paginationManager.currentPage = 1;\r\n      }\r\n      await this.table.refreshTable();\r\n    } else {\r\n      // Client mode - filter data locally\r\n      if (searchTerm.length < this.options.minLength) {\r\n        this.table.dataManager.filteredData = [...this.originalData];\r\n      } else {\r\n        const filteredData = this.filterData(searchTerm);\r\n        this.table.dataManager.filteredData = filteredData;\r\n      }\r\n\r\n      // Reset pagination to first page\r\n      if (this.table.paginationManager) {\r\n        this.table.paginationManager.resetToFirstPage();\r\n      } else {\r\n        // If no pagination manager, just refresh\r\n        await this.table.refreshTable();\r\n      }\r\n    }\r\n\r\n    // Restore focus after table refresh if it had focus before\r\n    if (hadFocus) {\r\n      requestAnimationFrame(() => {\r\n        const newSearchInput = this.table.container.querySelector('.tablix-search-input');\r\n        if (newSearchInput) {\r\n          newSearchInput.focus();\r\n          if (cursorPosition > 0 && cursorPosition <= newSearchInput.value.length) {\r\n            newSearchInput.setSelectionRange(cursorPosition, cursorPosition);\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    // Trigger afterSearch event with detailed results\r\n    const afterSearchData = {\r\n      searchTerm,\r\n      previousTerm,\r\n      resultsCount: this.table.dataManager.filteredData.length,\r\n      totalCount: this.originalData.length,\r\n      isActive: this.isSearchActive(),\r\n      searchPerformed: searchTerm.length >= this.options.minLength\r\n    };\r\n    \r\n    this.table.eventManager.trigger('afterSearch', afterSearchData);\r\n\r\n    // Update search clear button visibility\r\n    this.updateClearButtonVisibility();\r\n  }\r\n\r\n  /**\r\n   * Filter data based on search term\r\n   * @param {string} searchTerm - Search term\r\n   * @returns {Array} Filtered data\r\n   */\r\n  filterData(searchTerm) {\r\n    if (!searchTerm || searchTerm.trim() === '') {\r\n      return [...this.originalData];\r\n    }\r\n\r\n    const term = this.options.caseSensitive ? searchTerm : searchTerm.toLowerCase();\r\n    const columns = this.getSearchableColumns();\r\n\r\n    return this.originalData.filter(row => {\r\n      return columns.some(columnName => {\r\n        const cellValue = row[columnName];\r\n        if (cellValue === null || cellValue === undefined) {\r\n          return false;\r\n        }\r\n\r\n        // Skip complex objects (not primitive values or Dates) in search\r\n        if (typeof cellValue === 'object' && !(cellValue instanceof Date)) {\r\n          return false;\r\n        }\r\n\r\n        const stringValue = this.options.caseSensitive ? \r\n          String(cellValue) : \r\n          String(cellValue).toLowerCase();\r\n\r\n        return stringValue.includes(term);\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get columns to search in\r\n   * @returns {Array} Array of column names\r\n   */\r\n  getSearchableColumns() {\r\n    // If specific columns are configured, use those\r\n    if (this.options.searchColumns && this.options.searchColumns.length > 0) {\r\n      return this.options.searchColumns;\r\n    }\r\n\r\n    // Otherwise, search all available columns\r\n    const columns = this.table.columnManager ? \r\n      this.table.columnManager.getColumns() : \r\n      (this.table.options.columns || []);\r\n\r\n    return columns.map(col => col.name || col.key).filter(name => name);\r\n  }\r\n\r\n  /**\r\n   * Clear search\r\n   */\r\n  async clearSearch() {\r\n    // Clear search input using the helper method\r\n    this.updateInputValue('');\r\n\r\n    // Clear search timeout\r\n    if (this.searchTimeout) {\r\n      clearTimeout(this.searchTimeout);\r\n      this.searchTimeout = null;\r\n    }\r\n\r\n    // Perform empty search to reset data\r\n    await this.performSearch('');\r\n  }\r\n\r\n  /**\r\n   * Update clear button visibility\r\n   */\r\n  updateClearButtonVisibility() {\r\n    const searchClear = this.table.container.querySelector('.tablix-search-clear');\r\n    if (searchClear) {\r\n      searchClear.style.display = this.currentSearchTerm ? 'block' : 'none';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update input value without triggering search\r\n   * @param {string} value - Value to set\r\n   */\r\n  updateInputValue(value) {\r\n    const searchInput = this.table.container.querySelector('.tablix-search-input');\r\n    if (searchInput && searchInput.value !== value) {\r\n      searchInput.value = value;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set search term programmatically\r\n   * @param {string} searchTerm - Search term\r\n   */\r\n  async setSearchTerm(searchTerm) {\r\n    // Update input value\r\n    this.updateInputValue(searchTerm);\r\n    \r\n    // Clear any pending search timeout\r\n    if (this.searchTimeout) {\r\n      clearTimeout(this.searchTimeout);\r\n      this.searchTimeout = null;\r\n    }\r\n    \r\n    // Perform search immediately\r\n    await this.performSearch(searchTerm);\r\n  }\r\n\r\n  /**\r\n   * Get current search term\r\n   * @returns {string} Current search term\r\n   */\r\n  getSearchTerm() {\r\n    return this.currentSearchTerm;\r\n  }\r\n\r\n  /**\r\n   * Check if search is active\r\n   * @returns {boolean} Whether search is active\r\n   */\r\n  isSearchActive() {\r\n    return this.currentSearchTerm && this.currentSearchTerm.length >= this.options.minLength;\r\n  }\r\n\r\n  /**\r\n   * Get search results count\r\n   * @returns {Object} Search results information\r\n   */\r\n  getSearchInfo() {\r\n    return {\r\n      searchTerm: this.currentSearchTerm,\r\n      resultsCount: this.table.dataManager.filteredData.length,\r\n      totalCount: this.originalData.length,\r\n      isActive: this.isSearchActive()\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Configure search options\r\n   * @param {Object} newOptions - New options to merge\r\n   */\r\n  configure(newOptions) {\r\n    const oldOptions = { ...this.options };\r\n    this.options = { ...this.options, ...newOptions };\r\n    \r\n    // Ensure placeholder is never undefined\r\n    if (!this.options.placeholder) {\r\n      this.options.placeholder = 'Search...';\r\n    }\r\n    \r\n    // Update placeholder if it changed\r\n    if (newOptions.placeholder && newOptions.placeholder !== oldOptions.placeholder) {\r\n      const searchInput = this.table.container.querySelector('.tablix-search-input');\r\n      if (searchInput) {\r\n        searchInput.placeholder = this.options.placeholder;\r\n      }\r\n    }\r\n    \r\n    // If minLength changed and we have an active search, re-evaluate\r\n    if (newOptions.minLength !== undefined && this.currentSearchTerm) {\r\n      this.performSearch(this.currentSearchTerm);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get current search configuration\r\n   * @returns {Object} Current search options\r\n   */\r\n  getConfiguration() {\r\n    return { ...this.options };\r\n  }\r\n\r\n  /**\r\n   * Destroy search manager and clean up\r\n   */\r\n  destroy() {\r\n    if (this.searchTimeout) {\r\n      clearTimeout(this.searchTimeout);\r\n    }\r\n\r\n    const searchInput = this.table.container.querySelector('.tablix-search-input');\r\n    const searchClear = this.table.container.querySelector('.tablix-search-clear');\r\n\r\n    if (searchInput) {\r\n      searchInput.removeEventListener('input', this.handleSearchInput);\r\n    }\r\n\r\n    if (searchClear) {\r\n      searchClear.removeEventListener('click', this.handleSearchClear);\r\n    }\r\n  }\r\n}\r\n","export default class SelectionManager {\r\n  constructor(table, options = {}) {\r\n    this.table = table;\r\n    this.options = {\r\n      enabled: false,\r\n      mode: 'single', // 'single' or 'multi'\r\n      ...options\r\n    };\r\n    \r\n    // Selection state - use stable data IDs/keys, not row indexes\r\n    this.selectedRows = new Set(); // Set of row IDs/keys\r\n    this.lastSelectedRow = null; // For range selection with shift+click\r\n    \r\n    // Track row ID mapping for stable selection across pagination/sorting/filtering\r\n    this.rowIdMap = new Map(); // Maps data objects to their stable IDs\r\n    this.dataIdKey = options.dataIdKey || 'id'; // Key to use as stable row ID\r\n    \r\n    // Drag selection state\r\n    this.dragSelection = {\r\n      isActive: false,\r\n      startRowIndex: null,\r\n      currentRowIndex: null,\r\n      startRowId: null,\r\n      originalSelection: null, // Backup of selection before drag started\r\n      isDragging: false,\r\n      dragThreshold: 3 // Minimum pixels to move before considering it a drag\r\n    };\r\n    \r\n    // Track event listeners for proper cleanup\r\n    this.eventListeners = [];\r\n    \r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.eventListenersSetup = false; // Track if event listeners are already set up\r\n    \r\n    if (this.options.enabled) {\r\n      this.setupEventListeners();\r\n    }\r\n  }\r\n\r\n  setupEventListeners() {\r\n    // Prevent setting up listeners multiple times\r\n    if (this.eventListenersSetup) {\r\n      return;\r\n    }\r\n    \r\n    this.eventListenersSetup = true;\r\n    \r\n    // Listen for row clicks\r\n    this.table.eventManager.on('rowClick', (event) => {\r\n      this.handleRowClick(event);\r\n    });\r\n    \r\n    // Listen for drag selection events (only in multi mode and when NOT using virtual scrolling)\r\n    if (this.options.mode === 'multi' && !this.table.virtualScrollManager) {\r\n      this.setupDragSelection();\r\n    }\r\n    \r\n    // Clear selection when data changes\r\n    this.table.eventManager.on('beforeLoad', () => {\r\n      this.clearSelection();\r\n    });\r\n    \r\n    // Update selection state after data operations\r\n    this.table.eventManager.on('afterLoad', () => {\r\n      this.updateSelectionAfterDataChange();\r\n    });\r\n    \r\n    // Update selection UI after rendering\r\n    this.table.eventManager.on('afterRender', () => {\r\n      this.updateUI();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Handle row click events for selection\r\n   * @param {Object} event - Row click event data\r\n   */\r\n  handleRowClick(event) {\r\n    // Safety check - ensure table and managers are still available\r\n    if (!this.table || !this.options.enabled) {\r\n      return;\r\n    }\r\n\r\n    // If this was a drag operation, don't process as a click\r\n    if (this.dragSelection.isDragging) {\r\n      this.dragSelection.isDragging = false;\r\n      return;\r\n    }\r\n\r\n    const { rowData, rowIndex, originalEvent } = event;\r\n    const rowId = this.getRowId(rowData);\r\n    \r\n    // Debug logging for modifier keys\r\n    console.log('SelectionManager handleRowClick:', {\r\n      rowId,\r\n      hasOriginalEvent: !!originalEvent,\r\n      ctrlKey: originalEvent ? originalEvent.ctrlKey : 'no event',\r\n      shiftKey: originalEvent ? originalEvent.shiftKey : 'no event',\r\n      metaKey: originalEvent ? originalEvent.metaKey : 'no event',\r\n      timestamp: Date.now()\r\n    });\r\n    \r\n    // Prevent default and stop propagation to avoid duplicate events\r\n    if (originalEvent) {\r\n      originalEvent.preventDefault();\r\n      originalEvent.stopPropagation();\r\n    }\r\n\r\n    // Fire beforeSelect event\r\n    const beforeSelectEvent = {\r\n      rowData,\r\n      rowId,\r\n      currentSelection: Array.from(this.selectedRows),\r\n      isCtrlClick: originalEvent && (originalEvent.ctrlKey || originalEvent.metaKey),\r\n      isShiftClick: originalEvent && originalEvent.shiftKey,\r\n      isDragSelection: false\r\n    };\r\n    \r\n    if (this.table && this.table.eventManager) {\r\n      this.table.eventManager.trigger('beforeSelect', beforeSelectEvent);\r\n    }\r\n\r\n    if (this.options.mode === 'single') {\r\n      this.handleSingleSelection(rowId, rowData);\r\n    } else if (this.options.mode === 'multi') {\r\n      this.handleMultiSelection(rowId, rowData, originalEvent);\r\n    }\r\n\r\n    this.updateUI();\r\n    \r\n    // Fire afterSelect event\r\n    const afterSelectEvent = {\r\n      rowData,\r\n      rowId,\r\n      selectedRows: Array.from(this.selectedRows),\r\n      selectedData: this.getSelectedData(),\r\n      isDragSelection: false\r\n    };\r\n    \r\n    if (this.table && this.table.eventManager) {\r\n      this.table.eventManager.trigger('afterSelect', afterSelectEvent);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle single row selection\r\n   * @param {String} rowId - Stable row identifier\r\n   * @param {Object} rowData - Row data object\r\n   */\r\n  handleSingleSelection(rowId, rowData) {\r\n    // In single mode, if the row is already selected, deselect it\r\n    if (this.selectedRows.has(rowId)) {\r\n      this.selectedRows.clear();\r\n      this.lastSelectedRow = null;\r\n    } else {\r\n      // Otherwise, select only the clicked row\r\n      this.selectedRows.clear();\r\n      this.selectedRows.add(rowId);\r\n      this.lastSelectedRow = rowId;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle multi row selection with ctrl+click and shift+click\r\n   * @param {String} rowId - Stable row identifier\r\n   * @param {Object} rowData - Row data object\r\n   * @param {Event} originalEvent - Original mouse event\r\n   */\r\n  handleMultiSelection(rowId, rowData, originalEvent) {\r\n    const isCtrlClick = originalEvent && (originalEvent.ctrlKey || originalEvent.metaKey);\r\n    const isShiftClick = originalEvent && originalEvent.shiftKey;\r\n\r\n    console.log('handleMultiSelection DETAILED:', {\r\n      rowId,\r\n      isCtrlClick,\r\n      isShiftClick,\r\n      'originalEvent.ctrlKey': originalEvent ? originalEvent.ctrlKey : 'no event',\r\n      'originalEvent.metaKey': originalEvent ? originalEvent.metaKey : 'no event',\r\n      'originalEvent.shiftKey': originalEvent ? originalEvent.shiftKey : 'no event',\r\n      lastSelectedRow: this.lastSelectedRow,\r\n      currentSelection: Array.from(this.selectedRows),\r\n      selectionSize: this.selectedRows.size\r\n    });\r\n\r\n    if (isShiftClick && this.lastSelectedRow) {\r\n      // Range selection: select all rows between last selected and current\r\n      console.log('Executing range selection from', this.lastSelectedRow, 'to', rowId);\r\n      this.handleRangeSelection(rowId);\r\n    } else if (isCtrlClick) {\r\n      // Toggle selection of individual row\r\n      console.log('Executing ctrl+click toggle for', rowId);\r\n      if (this.selectedRows.has(rowId)) {\r\n        this.selectedRows.delete(rowId);\r\n        console.log('Ctrl+click: Deselected', rowId);\r\n        // Update lastSelectedRow to another selected row or null\r\n        this.lastSelectedRow = this.selectedRows.size > 0 ? Array.from(this.selectedRows)[0] : null;\r\n      } else {\r\n        this.selectedRows.add(rowId);\r\n        this.lastSelectedRow = rowId;\r\n        console.log('Ctrl+click: Added', rowId, 'to selection. Total selected:', this.selectedRows.size);\r\n      }\r\n    } else {\r\n      // Normal click: select only this row (clear previous selection)\r\n      console.log('Executing normal click for', rowId);\r\n      this.selectedRows.clear();\r\n      this.selectedRows.add(rowId);\r\n      this.lastSelectedRow = rowId;\r\n      console.log('Normal click: Selected only', rowId);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle range selection with shift+click\r\n   * @param {String} endRowId - End row ID for range selection\r\n   */\r\n  handleRangeSelection(endRowId) {\r\n    const fullData = this.getFullData();\r\n    \r\n    // Find indices in the full dataset\r\n    const startIndex = fullData.findIndex(row => this.getRowId(row) === this.lastSelectedRow);\r\n    const endIndex = fullData.findIndex(row => this.getRowId(row) === endRowId);\r\n\r\n    if (startIndex === -1 || endIndex === -1) {\r\n      // Fallback to single selection if we can't find the range\r\n      this.selectedRows.clear();\r\n      this.selectedRows.add(endRowId);\r\n      this.lastSelectedRow = endRowId;\r\n      return;\r\n    }\r\n\r\n    // Select all rows in range\r\n    const minIndex = Math.min(startIndex, endIndex);\r\n    const maxIndex = Math.max(startIndex, endIndex);\r\n    \r\n    for (let i = minIndex; i <= maxIndex; i++) {\r\n      const rowId = this.getRowId(fullData[i]);\r\n      this.selectedRows.add(rowId);\r\n    }\r\n  }\r\n\r\n  // ===== DRAG SELECTION METHODS =====\r\n\r\n  /**\r\n   * Setup drag selection event listeners\r\n   */\r\n  setupDragSelection() {\r\n    const tableElement = this.table.container;\r\n    if (!tableElement) return;\r\n\r\n    let startX, startY;\r\n\r\n    // Mouse down on table body\r\n    tableElement.addEventListener('mousedown', (e) => {\r\n      if (!this.table || !this.options.enabled || this.options.mode !== 'multi') return;\r\n      \r\n      const row = e.target.closest('.tablix-row');\r\n      if (!row || row.classList.contains('tablix-empty-row')) return;\r\n\r\n      const globalRowIndex = parseInt(row.dataset.rowIndex, 10);\r\n      if (isNaN(globalRowIndex)) return;\r\n\r\n      // Only start drag selection if not using modifier keys\r\n      if (e.ctrlKey || e.metaKey || e.shiftKey) return;\r\n\r\n      startX = e.clientX;\r\n      startY = e.clientY;\r\n\r\n      this.dragSelection.isActive = true;\r\n      this.dragSelection.startRowIndex = globalRowIndex; // Store global index\r\n      this.dragSelection.currentRowIndex = globalRowIndex;\r\n      this.dragSelection.isDragging = false;\r\n      \r\n      // Store original selection for potential restoration\r\n      this.dragSelection.originalSelection = new Set(this.selectedRows);\r\n\r\n      // Get start row data using global index\r\n      const fullData = this.getFullData();\r\n      if (globalRowIndex < fullData.length) {\r\n        this.dragSelection.startRowId = this.getRowId(fullData[globalRowIndex]);\r\n      }\r\n\r\n      e.preventDefault();\r\n    });\r\n\r\n    // Mouse move - handle drag selection\r\n    tableElement.addEventListener('mousemove', (e) => {\r\n      if (!this.table || !this.dragSelection.isActive) return;\r\n\r\n      const deltaX = Math.abs(e.clientX - startX);\r\n      const deltaY = Math.abs(e.clientY - startY);\r\n\r\n      // Check if we've moved enough to consider it a drag\r\n      if (!this.dragSelection.isDragging && \r\n          (deltaX > this.dragSelection.dragThreshold || deltaY > this.dragSelection.dragThreshold)) {\r\n        this.dragSelection.isDragging = true;\r\n        this.startDragSelection();\r\n      }\r\n\r\n      if (this.dragSelection.isDragging) {\r\n        this.updateDragSelection(e);\r\n      }\r\n    });\r\n\r\n    // Mouse up - complete drag selection\r\n    tableElement.addEventListener('mouseup', (e) => {\r\n      if (!this.table || !this.dragSelection.isActive) return;\r\n      this.completeDragSelection();\r\n    });\r\n\r\n    // Mouse leave - cancel drag selection\r\n    tableElement.addEventListener('mouseleave', (e) => {\r\n      if (!this.table || !this.dragSelection.isActive) return;\r\n      this.cancelDragSelection();\r\n    });\r\n\r\n    // Prevent text selection during drag\r\n    tableElement.addEventListener('selectstart', (e) => {\r\n      if (this.dragSelection.isDragging) {\r\n        e.preventDefault();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Start drag selection\r\n   */\r\n  startDragSelection() {\r\n    if (!this.table || !this.table.container) {\r\n      console.warn('SelectionManager: Cannot start drag selection - table not available');\r\n      return;\r\n    }\r\n    \r\n    // Add drag selection class to table for styling\r\n    const tableWrapper = this.table.container.querySelector('.tablix-wrapper');\r\n    if (tableWrapper) {\r\n      tableWrapper.classList.add('tablix-drag-selecting');\r\n    }\r\n\r\n    // Fire beforeSelect event for drag start\r\n    const fullData = this.getFullData();\r\n    if (this.dragSelection.startRowIndex < fullData.length) {\r\n      const startRowData = fullData[this.dragSelection.startRowIndex];\r\n      const beforeSelectEvent = {\r\n        rowData: startRowData,\r\n        rowId: this.dragSelection.startRowId,\r\n        currentSelection: Array.from(this.selectedRows),\r\n        isCtrlClick: false,\r\n        isShiftClick: false,\r\n        isDragSelection: true,\r\n        dragStart: true\r\n      };\r\n      \r\n      this.table.eventManager.trigger('beforeSelect', beforeSelectEvent);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update drag selection based on current mouse position\r\n   */\r\n  updateDragSelection(event) {\r\n    const row = event.target.closest('.tablix-row');\r\n    if (!row || row.classList.contains('tablix-empty-row')) return;\r\n\r\n    const globalRowIndex = parseInt(row.dataset.rowIndex, 10);\r\n    if (isNaN(globalRowIndex)) return;\r\n\r\n    if (globalRowIndex !== this.dragSelection.currentRowIndex) {\r\n      this.dragSelection.currentRowIndex = globalRowIndex;\r\n      this.applyDragSelection();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Apply current drag selection range\r\n   */\r\n  applyDragSelection() {\r\n    // Always use full dataset for drag selection (global indices)\r\n    const fullData = this.getFullData();\r\n    \r\n    // Calculate selection range using global indices\r\n    const startIndex = this.dragSelection.startRowIndex;\r\n    const endIndex = this.dragSelection.currentRowIndex;\r\n    const minIndex = Math.min(startIndex, endIndex);\r\n    const maxIndex = Math.max(startIndex, endIndex);\r\n\r\n    // Start with original selection (preserve existing selections)\r\n    this.selectedRows = new Set(this.dragSelection.originalSelection);\r\n\r\n    // Add drag range to selection\r\n    for (let i = minIndex; i <= maxIndex; i++) {\r\n      if (i < fullData.length) {\r\n        const rowId = this.getRowId(fullData[i]);\r\n        this.selectedRows.add(rowId);\r\n      }\r\n    }\r\n\r\n    // Update last selected row\r\n    if (endIndex < fullData.length) {\r\n      this.lastSelectedRow = this.getRowId(fullData[endIndex]);\r\n    }\r\n\r\n    // Update UI immediately for responsive feedback\r\n    this.updateUI();\r\n  }\r\n\r\n  /**\r\n   * Complete drag selection\r\n   */\r\n  completeDragSelection() {\r\n    if (!this.table || !this.table.container) {\r\n      console.warn('SelectionManager: Cannot complete drag selection - table not available');\r\n      return;\r\n    }\r\n    \r\n    const tableWrapper = this.table.container.querySelector('.tablix-wrapper');\r\n    if (tableWrapper) {\r\n      tableWrapper.classList.remove('tablix-drag-selecting');\r\n    }\r\n\r\n    if (this.dragSelection.isDragging) {\r\n      // Fire final afterSelect event\r\n      const afterSelectEvent = {\r\n        selectedRows: Array.from(this.selectedRows),\r\n        selectedData: this.getSelectedData(),\r\n        isDragSelection: true,\r\n        dragComplete: true\r\n      };\r\n      \r\n      this.table.eventManager.trigger('afterSelect', afterSelectEvent);\r\n    }\r\n\r\n    this.resetDragSelection();\r\n  }\r\n\r\n  /**\r\n   * Cancel drag selection and restore original state\r\n   */\r\n  cancelDragSelection() {\r\n    if (!this.table || !this.table.container) {\r\n      console.warn('SelectionManager: Cannot cancel drag selection - table not available');\r\n      return;\r\n    }\r\n    \r\n    const tableWrapper = this.table.container.querySelector('.tablix-wrapper');\r\n    if (tableWrapper) {\r\n      tableWrapper.classList.remove('tablix-drag-selecting');\r\n    }\r\n\r\n    // Restore original selection\r\n    this.selectedRows = new Set(this.dragSelection.originalSelection);\r\n    this.updateUI();\r\n\r\n    this.resetDragSelection();\r\n  }\r\n\r\n  /**\r\n   * Reset drag selection state\r\n   */\r\n  resetDragSelection() {\r\n    this.dragSelection.isActive = false;\r\n    this.dragSelection.startRowIndex = null;\r\n    this.dragSelection.currentRowIndex = null;\r\n    this.dragSelection.startRowId = null;\r\n    this.dragSelection.originalSelection = null;\r\n    this.dragSelection.isDragging = false;\r\n  }\r\n\r\n  /**\r\n   * Get stable row ID from row data\r\n   * @param {Object} rowData - Row data object\r\n   * @returns {String} Stable row identifier\r\n   */\r\n  getRowId(rowData) {\r\n    if (typeof rowData[this.dataIdKey] !== 'undefined') {\r\n      return String(rowData[this.dataIdKey]);\r\n    }\r\n    \r\n    // Fallback: create a hash of the row data for identification\r\n    return this.createRowHash(rowData);\r\n  }\r\n\r\n  /**\r\n   * Create a simple hash from row data for identification\r\n   * @param {Object} rowData - Row data object\r\n   * @returns {String} Hash string\r\n   */\r\n  createRowHash(rowData) {\r\n    const str = JSON.stringify(rowData);\r\n    let hash = 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n      const char = str.charCodeAt(i);\r\n      hash = ((hash << 5) - hash) + char;\r\n      hash = hash & hash; // Convert to 32-bit integer\r\n    }\r\n    return String(hash);\r\n  }\r\n\r\n  /**\r\n   * Get current page data for range selection\r\n   * @returns {Array} Current page data\r\n   */\r\n  getCurrentPageData() {\r\n    if (!this.table || !this.table.dataManager) {\r\n      console.warn('SelectionManager: Table or dataManager is not available');\r\n      return [];\r\n    }\r\n    \r\n    // If using virtual scrolling, return full dataset\r\n    if (this.table.virtualScrollManager) {\r\n      return this.table.dataManager.getData();\r\n    }\r\n    // Otherwise use pagination if available\r\n    if (this.table.paginationManager) {\r\n      return this.table.paginationManager.getCurrentPageData() || [];\r\n    }\r\n    return this.table.dataManager.getData();\r\n  }\r\n\r\n  /**\r\n   * Get the full dataset for virtual scrolling operations\r\n   * @returns {Array} Full dataset\r\n   */\r\n  getFullData() {\r\n    if (!this.table || !this.table.dataManager) {\r\n      console.warn('SelectionManager: Table or dataManager is not available');\r\n      return [];\r\n    }\r\n    return this.table.dataManager.getData();\r\n  }\r\n\r\n  /**\r\n   * Update UI to reflect current selection\r\n   */\r\n  updateUI() {\r\n    if (!this.options.enabled || !this.table || !this.table.container) {\r\n      return;\r\n    }\r\n\r\n    const tableElement = this.table.container.querySelector('.tablix-table');\r\n    if (!tableElement) {\r\n      return;\r\n    }\r\n\r\n    // Remove existing selection classes\r\n    const allRows = tableElement.querySelectorAll('.tablix-row');\r\n    allRows.forEach(row => {\r\n      row.classList.remove('tablix-selected', 'tablix-last-selected');\r\n    });\r\n\r\n    // Check if we're in virtual scroll mode by looking for data-virtual-index attributes\r\n    const hasVirtualIndexes = allRows.length > 0 && allRows[0].hasAttribute('data-virtual-index');\r\n    \r\n    if (hasVirtualIndexes) {\r\n      // Virtual scrolling mode: use data-virtual-index to match against full dataset\r\n      const fullData = this.getFullData();\r\n      allRows.forEach((row) => {\r\n        const virtualIndex = parseInt(row.getAttribute('data-virtual-index'));\r\n        if (!isNaN(virtualIndex) && virtualIndex < fullData.length) {\r\n          const rowData = fullData[virtualIndex];\r\n          const rowId = this.getRowId(rowData);\r\n          \r\n          if (this.selectedRows.has(rowId)) {\r\n            row.classList.add('tablix-selected');\r\n            \r\n            // Mark the last selected row for special styling\r\n            if (rowId === this.lastSelectedRow) {\r\n              row.classList.add('tablix-last-selected');\r\n            }\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      // Regular mode: match by global row index with full dataset\r\n      const fullData = this.getFullData();\r\n      allRows.forEach((row) => {\r\n        // Get global row index from data attribute\r\n        const globalRowIndex = row.hasAttribute('data-row-index') ? \r\n          parseInt(row.getAttribute('data-row-index')) : -1;\r\n          \r\n        if (globalRowIndex >= 0 && globalRowIndex < fullData.length) {\r\n          const rowData = fullData[globalRowIndex];\r\n          const rowId = this.getRowId(rowData);\r\n          \r\n          if (this.selectedRows.has(rowId)) {\r\n            row.classList.add('tablix-selected');\r\n            \r\n            // Mark the last selected row for special styling\r\n            if (rowId === this.lastSelectedRow) {\r\n              row.classList.add('tablix-last-selected');\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update selection state after data changes (pagination, filtering, sorting)\r\n   */\r\n  updateSelectionAfterDataChange() {\r\n    if (!this.options.enabled) {\r\n      return;\r\n    }\r\n\r\n    if (this.table.virtualScrollManager) {\r\n      // For virtual scrolling: keep all selections as the data is the same, just rendered differently\r\n      // Only need to update UI\r\n      this.updateUI();\r\n    } else {\r\n      // For pagination: keep all selections, but validate they still exist in the full dataset\r\n      const fullData = this.getFullData();\r\n      const allDataRowIds = new Set(fullData.map(row => this.getRowId(row)));\r\n      \r\n      // Remove selections for rows that no longer exist in the dataset at all\r\n      const newSelection = new Set();\r\n      this.selectedRows.forEach(rowId => {\r\n        if (allDataRowIds.has(rowId)) {\r\n          newSelection.add(rowId);\r\n        }\r\n      });\r\n      \r\n      this.selectedRows = newSelection;\r\n      \r\n      // Update last selected row if it no longer exists in the dataset\r\n      if (this.lastSelectedRow && !allDataRowIds.has(this.lastSelectedRow)) {\r\n        this.lastSelectedRow = this.selectedRows.size > 0 ? Array.from(this.selectedRows)[0] : null;\r\n      }\r\n      \r\n      this.updateUI();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get selected row data\r\n   * @returns {Array} Array of selected row data objects\r\n   */\r\n  getSelectedData() {\r\n    if (!this.options.enabled || this.selectedRows.size === 0) {\r\n      return [];\r\n    }\r\n\r\n    // Get all data (including filtered/sorted) to find selected rows\r\n    const allData = this.getFullData();\r\n    return allData.filter(row => this.selectedRows.has(this.getRowId(row)));\r\n  }\r\n\r\n  /**\r\n   * Get selected row IDs\r\n   * @returns {Array} Array of selected row IDs\r\n   */\r\n  getSelectedIds() {\r\n    return Array.from(this.selectedRows);\r\n  }\r\n\r\n  /**\r\n   * Programmatically select rows by ID\r\n   * @param {String|Array} rowIds - Single row ID or array of row IDs\r\n   */\r\n  selectRows(rowIds) {\r\n    if (!this.options.enabled) {\r\n      return;\r\n    }\r\n\r\n    const ids = Array.isArray(rowIds) ? rowIds : [rowIds];\r\n    \r\n    if (this.options.mode === 'single' && ids.length > 1) {\r\n      console.warn('SelectionManager: Cannot select multiple rows in single mode');\r\n      return;\r\n    }\r\n\r\n    if (this.options.mode === 'single') {\r\n      this.selectedRows.clear();\r\n    }\r\n\r\n    ids.forEach(id => {\r\n      this.selectedRows.add(String(id));\r\n    });\r\n\r\n    if (ids.length > 0) {\r\n      this.lastSelectedRow = String(ids[ids.length - 1]);\r\n    }\r\n\r\n    this.updateUI();\r\n    \r\n    // Fire afterSelect event\r\n    this.table.eventManager.trigger('afterSelect', {\r\n      selectedRows: Array.from(this.selectedRows),\r\n      selectedData: this.getSelectedData()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Programmatically deselect rows by ID\r\n   * @param {String|Array} rowIds - Single row ID or array of row IDs\r\n   */\r\n  deselectRows(rowIds) {\r\n    if (!this.options.enabled) {\r\n      return;\r\n    }\r\n\r\n    const ids = Array.isArray(rowIds) ? rowIds : [rowIds];\r\n    \r\n    ids.forEach(id => {\r\n      this.selectedRows.delete(String(id));\r\n    });\r\n\r\n    // Update last selected row if it was deselected\r\n    if (ids.includes(this.lastSelectedRow)) {\r\n      this.lastSelectedRow = this.selectedRows.size > 0 ? Array.from(this.selectedRows)[0] : null;\r\n    }\r\n\r\n    this.updateUI();\r\n    \r\n    // Fire afterSelect event\r\n    this.table.eventManager.trigger('afterSelect', {\r\n      selectedRows: Array.from(this.selectedRows),\r\n      selectedData: this.getSelectedData()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Clear all selections\r\n   */\r\n  clearSelection() {\r\n    if (!this.options.enabled) {\r\n      return;\r\n    }\r\n\r\n    const hadSelection = this.selectedRows.size > 0;\r\n    this.selectedRows.clear();\r\n    this.lastSelectedRow = null;\r\n    \r\n    this.updateUI();\r\n\r\n    if (hadSelection) {\r\n      // Fire afterSelect event\r\n      this.table.eventManager.trigger('afterSelect', {\r\n        selectedRows: [],\r\n        selectedData: []\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if a row is selected\r\n   * @param {String} rowId - Row ID to check\r\n   * @returns {Boolean} True if row is selected\r\n   */\r\n  isRowSelected(rowId) {\r\n    return this.selectedRows.has(String(rowId));\r\n  }\r\n\r\n  /**\r\n   * Check if a row is selected by its data object (for virtual scrolling)\r\n   * @param {Object} rowData - Row data object to check\r\n   * @returns {Boolean} True if row is selected\r\n   */\r\n  isRowSelectedByData(rowData) {\r\n    const rowId = this.getRowId(rowData);\r\n    return this.selectedRows.has(String(rowId));\r\n  }\r\n\r\n  /**\r\n   * Get selection count\r\n   * @returns {Number} Number of selected rows\r\n   */\r\n  getSelectionCount() {\r\n    return this.selectedRows.size;\r\n  }\r\n\r\n  /**\r\n   * Enable selection\r\n   */\r\n  enable() {\r\n    this.options.enabled = true;\r\n    if (!this.eventListenersSetup) {\r\n      this.setupEventListeners();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Disable selection\r\n   */\r\n  disable() {\r\n    this.options.enabled = false;\r\n    this.clearSelection();\r\n  }\r\n\r\n  /**\r\n   * Set selection mode\r\n   * @param {String} mode - 'single' or 'multi'\r\n   */\r\n  setMode(mode) {\r\n    if (mode !== 'single' && mode !== 'multi') {\r\n      console.warn('SelectionManager: Invalid mode. Use \"single\" or \"multi\"');\r\n      return;\r\n    }\r\n\r\n    const oldMode = this.options.mode;\r\n    this.options.mode = mode;\r\n    \r\n    // If switching to single mode and multiple rows are selected, keep only the last selected\r\n    if (mode === 'single' && this.selectedRows.size > 1) {\r\n      const lastSelected = this.lastSelectedRow;\r\n      this.selectedRows.clear();\r\n      if (lastSelected) {\r\n        this.selectedRows.add(lastSelected);\r\n      }\r\n      this.updateUI();\r\n    }\r\n\r\n    // Setup or remove drag selection based on mode change\r\n    if (oldMode !== mode && this.options.enabled) {\r\n      if (mode === 'multi') {\r\n        this.setupDragSelection();\r\n      }\r\n      // Note: We don't need to explicitly remove drag listeners as they check mode internally\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy the selection manager\r\n   */\r\n  destroy() {\r\n    this.clearSelection();\r\n    \r\n    // Clear references to prevent memory leaks and null reference errors\r\n    this.table = null;\r\n    this.selectedRows.clear();\r\n    this.rowIdMap.clear();\r\n    this.lastSelectedRow = null;\r\n    \r\n    // Reset drag selection state\r\n    this.dragSelection.isActive = false;\r\n    this.dragSelection.isDragging = false;\r\n    this.dragSelection.startRowIndex = null;\r\n    this.dragSelection.currentRowIndex = null;\r\n    this.dragSelection.startRowId = null;\r\n    this.dragSelection.originalSelection = null;\r\n  }\r\n}\r\n","/**\r\n * VirtualScrollManager - High-performance virtual scrolling for large datasets\r\n * \r\n * Features:\r\n * - Dynamic row height detection\r\n * - Configurable buffer zones\r\n * - Smooth scrolling with no visual gaps\r\n * - Selection state preservation\r\n * - Performance optimizations for 100k+ rows\r\n */\r\nexport default class VirtualScrollManager {\r\n  constructor(table, options = {}) {\r\n    this.table = table;\r\n    this.options = {\r\n      enabled: false,\r\n      buffer: 10, // Number of rows to render above/below viewport\r\n      rowHeight: null, // Auto-detected if null\r\n      throttleDelay: 8, // Reduced from 16ms for better responsiveness (~120fps)\r\n      ...options\r\n    };\r\n\r\n    // State tracking\r\n    this.scrollContainer = null;\r\n    this.tableBody = null;\r\n    this.topSpacer = null;\r\n    this.bottomSpacer = null;\r\n    \r\n    // Measurements\r\n    this.rowHeight = this.options.rowHeight || 35; // Default fallback\r\n    this.containerHeight = 0;\r\n    this.totalRows = 0;\r\n    this.visibleStart = 0;\r\n    this.visibleEnd = 0;\r\n    this.renderedStart = 0;\r\n    this.renderedEnd = 0;\r\n    \r\n    // Performance tracking\r\n    this.performanceData = {\r\n      renderTimes: [],\r\n      scrollUpdates: 0,\r\n      lastMeasurement: 0\r\n    };\r\n\r\n    // Throttled scroll handler\r\n    this.throttledScrollHandler = this.throttle(this.handleScroll.bind(this), this.options.throttleDelay);\r\n    this.immediateScrollHandler = this.handleScroll.bind(this);\r\n    \r\n    // RAF-based update handler for smooth rendering\r\n    this.updateScheduled = false;\r\n    this.pendingUpdate = false;\r\n    this.lastScrollTime = 0;\r\n    this.scrollVelocity = 0;\r\n\r\n    // Data reference\r\n    this.data = [];\r\n    this.renderedData = [];\r\n  }\r\n\r\n  /**\r\n   * Initialize virtual scrolling\r\n   */\r\n  init(data = []) {\r\n    if (!this.options.enabled) {\r\n      return;\r\n    }\r\n\r\n    this.data = data;\r\n    this.totalRows = data.length;\r\n    \r\n    this.setupScrollContainer();\r\n    this.detectRowHeight();\r\n    this.calculateViewport();\r\n    this.scheduleUpdate();\r\n    \r\n    // Bind scroll events with both throttled and immediate handling\r\n    this.scrollContainer.addEventListener('scroll', this.handleScrollImmediate.bind(this), { passive: true });\r\n    this.scrollContainer.addEventListener('scroll', this.throttledScrollHandler, { passive: true });\r\n    \r\n    // Handle scrollbar dragging specifically\r\n    this.scrollContainer.addEventListener('mousedown', this.handleScrollStart.bind(this));\r\n    document.addEventListener('mouseup', this.handleScrollEnd.bind(this));\r\n    \r\n    // Handle window resize\r\n    window.addEventListener('resize', this.throttle(this.handleResize.bind(this), 100));\r\n    \r\n    // Set up event delegation for row interactions\r\n    this.setupEventDelegation();\r\n    \r\n    // Listen for selection changes\r\n    this.setupSelectionListeners();\r\n    \r\n    this.log('Virtual scroll initialized', {\r\n      totalRows: this.totalRows,\r\n      rowHeight: this.rowHeight,\r\n      buffer: this.options.buffer\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Set up event delegation for dynamically rendered rows\r\n   */\r\n  setupEventDelegation() {\r\n    if (!this.scrollContainer || !this.table.eventManager) return;\r\n\r\n    // Delegate row click events\r\n    this.rowClickHandler = (event) => {\r\n      const row = event.target.closest('.tablix-row');\r\n      if (!row) return;\r\n\r\n      // Skip click handling if we just finished a drag\r\n      if (this.justFinishedDrag) {\r\n        console.log('Skipping click - just finished drag');\r\n        return;\r\n      }\r\n\r\n      const virtualIndex = parseInt(row.getAttribute('data-virtual-index'));\r\n      const rowData = this.data[virtualIndex];\r\n      \r\n      if (rowData) {\r\n        console.log('VirtualScroll rowClickHandler triggered:', { \r\n          virtualIndex, \r\n          rowId: rowData.id,\r\n          ctrlKey: event.ctrlKey,\r\n          shiftKey: event.shiftKey,\r\n          metaKey: event.metaKey,\r\n          eventType: event.type,\r\n          timestamp: Date.now()\r\n        });\r\n        \r\n        // Trigger row click event for selection manager\r\n        this.table.eventManager.trigger('rowClick', {\r\n          rowData,\r\n          rowIndex: virtualIndex, // Use virtual index as row index\r\n          originalEvent: event,\r\n          element: row\r\n        });\r\n        \r\n        // Immediately update selection states after click\r\n        setTimeout(() => this.updateSelectionStates(), 0);\r\n      }\r\n    };\r\n\r\n    this.scrollContainer.addEventListener('click', this.rowClickHandler);\r\n\r\n    // Set up drag selection for virtual scrolling (if selection is enabled and in multi mode)\r\n    if (this.table.selectionManager && \r\n        this.table.selectionManager.options.enabled && \r\n        this.table.selectionManager.options.mode === 'multi') {\r\n      this.setupVirtualDragSelection();\r\n    }\r\n\r\n    // Delegate row hover events\r\n    this.rowHoverHandler = (event) => {\r\n      const row = event.target.closest('.tablix-row');\r\n      if (!row) return;\r\n\r\n      const virtualIndex = parseInt(row.getAttribute('data-virtual-index'));\r\n      const rowData = this.data[virtualIndex];\r\n      \r\n      if (rowData) {\r\n        this.table.eventManager.trigger('rowHover', {\r\n          rowData,\r\n          rowIndex: virtualIndex,\r\n          originalEvent: event,\r\n          element: row\r\n        });\r\n      }\r\n    };\r\n\r\n    this.scrollContainer.addEventListener('mouseover', this.rowHoverHandler);\r\n  }\r\n\r\n  /**\r\n   * Set up listeners for selection changes\r\n   */\r\n  setupSelectionListeners() {\r\n    if (!this.table.eventManager) return;\r\n\r\n    // Listen for selection changes to update row visual states\r\n    this.table.eventManager.on('afterSelect', () => {\r\n      this.updateSelectionStates();\r\n    });\r\n\r\n    this.table.eventManager.on('selectionCleared', () => {\r\n      this.updateSelectionStates();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Setup the scroll container structure\r\n   */\r\n  setupScrollContainer() {\r\n    const tableWrapper = this.table.container.querySelector('.tablix-wrapper');\r\n    if (!tableWrapper) {\r\n      throw new Error('Table wrapper not found for virtual scrolling');\r\n    }\r\n\r\n    // Find existing scroll container\r\n    let scrollContainer = tableWrapper.querySelector('.tablix-scroll-container');\r\n    if (!scrollContainer) {\r\n      // Create scroll container - it should already exist from renderer\r\n      scrollContainer = tableWrapper.querySelector('.tablix-scroll-container');\r\n      if (!scrollContainer) {\r\n        console.warn('Scroll container not found - virtual scrolling may not work properly');\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.scrollContainer = scrollContainer;\r\n    this.tableBody = scrollContainer.querySelector('.tablix-tbody');\r\n    \r\n    // Create spacer elements for maintaining scroll height\r\n    this.createSpacers();\r\n  }\r\n\r\n  /**\r\n   * Create top and bottom spacer elements\r\n   */\r\n  createSpacers() {\r\n    if (!this.tableBody) return;\r\n\r\n    // Remove existing spacers\r\n    const existingTop = this.tableBody.querySelector('.tablix-top-spacer');\r\n    const existingBottom = this.tableBody.querySelector('.tablix-bottom-spacer');\r\n    if (existingTop) existingTop.remove();\r\n    if (existingBottom) existingBottom.remove();\r\n\r\n    // Create new spacers\r\n    this.topSpacer = document.createElement('tr');\r\n    this.topSpacer.className = 'tablix-top-spacer';\r\n    this.topSpacer.style.cssText = 'height: 0px; border: none;';\r\n    this.topSpacer.innerHTML = `<td colspan=\"100\" style=\"padding: 0; border: none; height: 0;\"></td>`;\r\n\r\n    this.bottomSpacer = document.createElement('tr');\r\n    this.bottomSpacer.className = 'tablix-bottom-spacer';\r\n    this.bottomSpacer.style.cssText = 'height: 0px; border: none;';\r\n    this.bottomSpacer.innerHTML = `<td colspan=\"100\" style=\"padding: 0; border: none; height: 0;\"></td>`;\r\n\r\n    this.tableBody.insertBefore(this.topSpacer, this.tableBody.firstChild);\r\n    this.tableBody.appendChild(this.bottomSpacer);\r\n  }\r\n\r\n  /**\r\n   * Detect row height dynamically by measuring a sample row\r\n   */\r\n  detectRowHeight() {\r\n    if (this.options.rowHeight) {\r\n      this.rowHeight = this.options.rowHeight;\r\n      return;\r\n    }\r\n\r\n    if (!this.tableBody || this.data.length === 0) {\r\n      return;\r\n    }\r\n\r\n    // Render a single sample row to measure height\r\n    const sampleRow = this.renderSingleRow(this.data[0], 0);\r\n    this.tableBody.appendChild(sampleRow);\r\n    \r\n    // Measure the row height\r\n    const rect = sampleRow.getBoundingClientRect();\r\n    this.rowHeight = Math.max(rect.height, 25); // Minimum height of 25px\r\n    \r\n    // Remove sample row\r\n    sampleRow.remove();\r\n    \r\n    this.log('Row height detected', { rowHeight: this.rowHeight });\r\n  }\r\n\r\n  /**\r\n   * Calculate viewport dimensions and visible range\r\n   */\r\n  calculateViewport() {\r\n    if (!this.scrollContainer) return;\r\n\r\n    const rect = this.scrollContainer.getBoundingClientRect();\r\n    this.containerHeight = rect.height;\r\n    \r\n    const scrollTop = this.scrollContainer.scrollTop;\r\n    const visibleRowCount = Math.ceil(this.containerHeight / this.rowHeight);\r\n    \r\n    // Calculate visible range\r\n    this.visibleStart = Math.floor(scrollTop / this.rowHeight);\r\n    this.visibleEnd = Math.min(this.visibleStart + visibleRowCount, this.totalRows);\r\n    \r\n    // Calculate rendered range with buffer\r\n    this.renderedStart = Math.max(0, this.visibleStart - this.options.buffer);\r\n    this.renderedEnd = Math.min(this.totalRows, this.visibleEnd + this.options.buffer);\r\n    \r\n    // Update spacer heights\r\n    this.updateSpacers();\r\n  }\r\n\r\n  /**\r\n   * Update spacer heights to maintain scroll position\r\n   */\r\n  updateSpacers() {\r\n    if (!this.topSpacer || !this.bottomSpacer) return;\r\n\r\n    const topHeight = this.renderedStart * this.rowHeight;\r\n    const bottomHeight = (this.totalRows - this.renderedEnd) * this.rowHeight;\r\n    \r\n    this.topSpacer.style.height = `${topHeight}px`;\r\n    this.bottomSpacer.style.height = `${bottomHeight}px`;\r\n  }\r\n\r\n  /**\r\n   * Handle immediate scroll events (for fast scrolling detection)\r\n   */\r\n  handleScrollImmediate() {\r\n    const now = performance.now();\r\n    const scrollTop = this.scrollContainer.scrollTop;\r\n    \r\n    // Calculate scroll velocity\r\n    if (this.lastScrollTime && this.lastScrollTop !== undefined) {\r\n      const timeDelta = now - this.lastScrollTime;\r\n      const scrollDelta = Math.abs(scrollTop - this.lastScrollTop);\r\n      this.scrollVelocity = timeDelta > 0 ? scrollDelta / timeDelta : 0;\r\n    }\r\n    \r\n    this.lastScrollTime = now;\r\n    this.lastScrollTop = scrollTop;\r\n    \r\n    // For very fast scrolling, schedule immediate update\r\n    if (this.scrollVelocity > 2) { // High velocity threshold\r\n      this.scheduleUpdate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle scroll start (mousedown on scrollbar)\r\n   */\r\n  handleScrollStart(event) {\r\n    // Only trigger scrollbar dragging for actual scrollbar clicks\r\n    // Check if the click was on the scrollbar area, not on table content\r\n    const target = event.target;\r\n    if (target.closest('.tablix-row') || target.closest('.tablix-table')) {\r\n      // This is a click on table content, not scrollbar - ignore\r\n      return;\r\n    }\r\n    \r\n    this.isScrollbarDragging = true;\r\n    \r\n    // Schedule more frequent updates during scrollbar dragging\r\n    this.scrollDragInterval = setInterval(() => {\r\n      if (this.isScrollbarDragging) {\r\n        this.scheduleUpdate();\r\n      }\r\n    }, 8); // ~120fps during dragging\r\n  }\r\n\r\n  /**\r\n   * Handle scroll end (mouseup)\r\n   */\r\n  handleScrollEnd() {\r\n    this.isScrollbarDragging = false;\r\n    if (this.scrollDragInterval) {\r\n      clearInterval(this.scrollDragInterval);\r\n      this.scrollDragInterval = null;\r\n    }\r\n    // Final update to ensure everything is rendered\r\n    this.scheduleUpdate();\r\n  }\r\n\r\n  /**\r\n   * Setup drag selection for virtual scrolling\r\n   */\r\n  setupVirtualDragSelection() {\r\n    let isDragSelecting = false;\r\n    let dragStartIndex = null;\r\n    let dragStartX = null;\r\n    let dragStartY = null;\r\n    let originalSelection = null;\r\n    const dragThreshold = 3;\r\n\r\n    // Flag to prevent click handling immediately after drag\r\n    this.justFinishedDrag = false;\r\n\r\n    // Mouse down to potentially start drag selection\r\n    this.scrollContainer.addEventListener('mousedown', (event) => {\r\n      // Skip if clicked on scrollbar area or using modifier keys\r\n      if (event.ctrlKey || event.metaKey || event.shiftKey) return;\r\n      \r\n      const row = event.target.closest('.tablix-row');\r\n      if (!row || row.classList.contains('tablix-empty-row')) return;\r\n\r\n      const virtualIndex = parseInt(row.getAttribute('data-virtual-index'));\r\n      if (isNaN(virtualIndex)) return;\r\n\r\n      dragStartIndex = virtualIndex;\r\n      dragStartX = event.clientX;\r\n      dragStartY = event.clientY;\r\n      isDragSelecting = false;\r\n      \r\n      // Store original selection\r\n      originalSelection = new Set(this.table.selectionManager.selectedRows);\r\n\r\n      // Don't prevent default here - let the click event fire normally\r\n      // event.preventDefault();\r\n    });\r\n\r\n    // Mouse move to handle drag selection\r\n    this.scrollContainer.addEventListener('mousemove', (event) => {\r\n      if (dragStartIndex === null) return;\r\n\r\n      const deltaX = Math.abs(event.clientX - dragStartX);\r\n      const deltaY = Math.abs(event.clientY - dragStartY);\r\n\r\n      // Start dragging if moved enough\r\n      if (!isDragSelecting && (deltaX > dragThreshold || deltaY > dragThreshold)) {\r\n        isDragSelecting = true;\r\n        this.scrollContainer.classList.add('tablix-drag-selecting');\r\n      }\r\n\r\n      if (isDragSelecting) {\r\n        const row = event.target.closest('.tablix-row');\r\n        if (row) {\r\n          const currentIndex = parseInt(row.getAttribute('data-virtual-index'));\r\n          if (!isNaN(currentIndex)) {\r\n            this.applyVirtualDragSelection(dragStartIndex, currentIndex, originalSelection);\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    // Mouse up to complete or cancel drag selection\r\n    const handleMouseUp = (event) => {\r\n      if (dragStartIndex !== null) {\r\n        this.scrollContainer.classList.remove('tablix-drag-selecting');\r\n        \r\n        if (!isDragSelecting) {\r\n          // This was just a click, not a drag - don't interfere with click handling\r\n          // Reset drag state and let the normal click handler process this\r\n          dragStartIndex = null;\r\n          isDragSelecting = false;\r\n          originalSelection = null;\r\n          return;\r\n        }\r\n\r\n        // This was actually a drag selection - complete it\r\n        this.table.eventManager.trigger('afterSelect', {\r\n          selectedRows: Array.from(this.table.selectionManager.selectedRows),\r\n          selectedData: this.table.selectionManager.getSelectedData(),\r\n          isDragSelection: true,\r\n          dragComplete: true\r\n        });\r\n\r\n        // Set flag to prevent immediate click handling\r\n        this.justFinishedDrag = true;\r\n        setTimeout(() => {\r\n          this.justFinishedDrag = false;\r\n        }, 50);\r\n\r\n        // Reset drag state\r\n        dragStartIndex = null;\r\n        isDragSelecting = false;\r\n        originalSelection = null;\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mouseup', handleMouseUp);\r\n    this.scrollContainer.addEventListener('mouseleave', handleMouseUp);\r\n\r\n    // Prevent text selection during drag\r\n    this.scrollContainer.addEventListener('selectstart', (event) => {\r\n      if (isDragSelecting) {\r\n        event.preventDefault();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Apply drag selection in virtual scrolling\r\n   */\r\n  applyVirtualDragSelection(startIndex, endIndex, originalSelection) {\r\n    const minIndex = Math.min(startIndex, endIndex);\r\n    const maxIndex = Math.max(startIndex, endIndex);\r\n\r\n    // Start with original selection\r\n    this.table.selectionManager.selectedRows = new Set(originalSelection);\r\n\r\n    // Add drag range to selection\r\n    for (let i = minIndex; i <= maxIndex; i++) {\r\n      if (i < this.data.length) {\r\n        const rowData = this.data[i];\r\n        const rowId = this.table.selectionManager.getRowId(rowData);\r\n        this.table.selectionManager.selectedRows.add(rowId);\r\n      }\r\n    }\r\n\r\n    // Update last selected row\r\n    if (endIndex < this.data.length) {\r\n      const endRowData = this.data[endIndex];\r\n      this.table.selectionManager.lastSelectedRow = this.table.selectionManager.getRowId(endRowData);\r\n    }\r\n\r\n    // Update UI immediately\r\n    this.table.selectionManager.updateUI();\r\n  }\r\n\r\n  /**\r\n   * Handle scroll events\r\n   */\r\n  handleScroll() {\r\n    if (!this.options.enabled || this.updateScheduled) return;\r\n\r\n    this.scheduleUpdate();\r\n  }\r\n\r\n  /**\r\n   * Handle window resize\r\n   */\r\n  handleResize() {\r\n    if (!this.options.enabled) return;\r\n\r\n    this.calculateViewport();\r\n    this.scheduleUpdate();\r\n  }\r\n\r\n  /**\r\n   * Schedule an update using requestAnimationFrame\r\n   */\r\n  scheduleUpdate() {\r\n    if (this.updateScheduled) return;\r\n\r\n    this.updateScheduled = true;\r\n    requestAnimationFrame(() => {\r\n      this.update();\r\n      this.updateScheduled = false;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Main update method - calculates viewport and renders visible rows\r\n   */\r\n  update() {\r\n    const startTime = performance.now();\r\n    \r\n    this.calculateViewport();\r\n    this.renderVisibleRows();\r\n    \r\n    const endTime = performance.now();\r\n    this.trackPerformance(endTime - startTime);\r\n    \r\n    this.performanceData.scrollUpdates++;\r\n  }\r\n\r\n  /**\r\n   * Render only the visible rows plus buffer\r\n   */\r\n  renderVisibleRows() {\r\n    if (!this.tableBody) return;\r\n\r\n    // Clear existing rows (except spacers)\r\n    const existingRows = this.tableBody.querySelectorAll('.tablix-row');\r\n    existingRows.forEach(row => row.remove());\r\n\r\n    // Render new rows\r\n    const fragment = document.createDocumentFragment();\r\n    \r\n    for (let i = this.renderedStart; i < this.renderedEnd; i++) {\r\n      if (i < this.data.length) {\r\n        const row = this.renderSingleRow(this.data[i], i);\r\n        fragment.appendChild(row);\r\n      }\r\n    }\r\n\r\n    // Insert rows between spacers\r\n    this.tableBody.insertBefore(fragment, this.bottomSpacer);\r\n\r\n    // Store currently rendered data slice for other managers\r\n    this.renderedData = this.data.slice(this.renderedStart, this.renderedEnd);\r\n    \r\n    // Handle image loading for the newly rendered rows\r\n    this.handleImageLoading();\r\n    \r\n    // Update selection states for the newly rendered rows\r\n    this.updateSelectionStates();\r\n  }\r\n\r\n  /**\r\n   * Update selection states for currently rendered rows\r\n   */\r\n  updateSelectionStates() {\r\n    if (!this.table.selectionManager || !this.tableBody) return;\r\n\r\n    const rows = this.tableBody.querySelectorAll('.tablix-row');\r\n    rows.forEach(row => {\r\n      const virtualIndex = parseInt(row.getAttribute('data-virtual-index'));\r\n      const rowData = this.data[virtualIndex];\r\n      \r\n      if (rowData && this.table.selectionManager.isRowSelectedByData(rowData)) {\r\n        row.classList.add('tablix-selected');\r\n      } else {\r\n        row.classList.remove('tablix-selected');\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Handle image loading optimization\r\n   */\r\n  handleImageLoading() {\r\n    if (!this.tableBody) return;\r\n\r\n    // Find all images in the rendered rows\r\n    const images = this.tableBody.querySelectorAll('.tablix-row img');\r\n    \r\n    images.forEach((img, index) => {\r\n      // Skip if image is already loaded or loading\r\n      if (img.complete || img.classList.contains('loading')) return;\r\n      \r\n      img.classList.add('loading');\r\n      \r\n      // Create a placeholder while loading\r\n      const placeholder = img.cloneNode();\r\n      placeholder.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiBmaWxsPSIjZjBmMGYwIi8+CjxwYXRoIGQ9Ik0xNiA4TDIwIDEySDEyTDE2IDhaIiBmaWxsPSIjY2NjY2NjIi8+CjxwYXRoIGQ9Ik04IDIwSDI0VjE2SDhWMjBaIiBmaWxsPSIjY2NjY2NjIi8+Cjwvc3ZnPgo=';\r\n      placeholder.classList.add('image-placeholder');\r\n      \r\n      // Handle successful load\r\n      const handleLoad = () => {\r\n        img.classList.remove('loading');\r\n        img.style.opacity = '1';\r\n        img.removeEventListener('load', handleLoad);\r\n        img.removeEventListener('error', handleError);\r\n      };\r\n      \r\n      // Handle load error\r\n      const handleError = () => {\r\n        img.classList.remove('loading');\r\n        img.src = placeholder.src; // Use placeholder as fallback\r\n        img.removeEventListener('load', handleLoad);\r\n        img.removeEventListener('error', handleError);\r\n      };\r\n      \r\n      img.addEventListener('load', handleLoad);\r\n      img.addEventListener('error', handleError);\r\n      \r\n      // Set initial opacity for fade-in effect\r\n      img.style.opacity = '0.5';\r\n      img.style.transition = 'opacity 0.2s ease';\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Render a single row element\r\n   */\r\n  renderSingleRow(rowData, originalIndex) {\r\n    const columns = this.table.columnManager ? \r\n      this.table.columnManager.getColumns() : \r\n      (this.table.options.columns || []);\r\n\r\n    const tr = document.createElement('tr');\r\n    tr.className = 'tablix-row';\r\n    tr.setAttribute('data-row-index', originalIndex); // Keep for compatibility\r\n    tr.setAttribute('data-virtual-index', originalIndex); // Virtual scroll index\r\n    \r\n    // Add a unique identifier for debugging\r\n    tr.setAttribute('data-row-id', this.table.selectionManager ? \r\n      this.table.selectionManager.getRowId(rowData) : originalIndex);\r\n\r\n    // Apply initial selection state\r\n    const isSelected = this.table.selectionManager && \r\n      this.table.selectionManager.isRowSelectedByData(rowData);\r\n    \r\n    if (isSelected) {\r\n      tr.classList.add('tablix-selected');\r\n      console.log('Row initially selected:', originalIndex, rowData.id);\r\n    }\r\n\r\n    // Render cells\r\n    columns.forEach(col => {\r\n      const td = document.createElement('td');\r\n      td.className = 'tablix-td';\r\n      \r\n      const cellValue = rowData[col.name];\r\n\r\n      // Use ColumnManager for formatting if available\r\n      if (this.table.columnManager) {\r\n        // Pass the column object instead of just the name to support multiple columns with same field\r\n        const result = this.table.columnManager.formatCellValue(col, cellValue, rowData);\r\n        if (result.isHtml) {\r\n          td.innerHTML = result.value;\r\n        } else {\r\n          td.textContent = result.value;\r\n        }\r\n      } else {\r\n        // Fallback to original renderer logic\r\n        if (col.renderer && typeof col.renderer === 'function') {\r\n          const rendered = col.renderer(cellValue, rowData);\r\n          if (typeof rendered === 'string' && rendered.includes('<')) {\r\n            td.innerHTML = rendered;\r\n          } else {\r\n            td.textContent = rendered;\r\n          }\r\n        } else {\r\n          td.textContent = cellValue != null ? String(cellValue) : '';\r\n        }\r\n      }\r\n\r\n      tr.appendChild(td);\r\n    });\r\n\r\n    return tr;\r\n  }\r\n\r\n  /**\r\n   * Update data and refresh virtual scrolling\r\n   */\r\n  updateData(newData) {\r\n    this.data = newData;\r\n    this.totalRows = newData.length;\r\n    \r\n    if (this.options.enabled) {\r\n      this.calculateViewport();\r\n      this.scheduleUpdate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Scroll to a specific row index\r\n   */\r\n  scrollToRow(index) {\r\n    if (!this.scrollContainer || !this.options.enabled) return;\r\n\r\n    const targetScrollTop = index * this.rowHeight;\r\n    this.scrollContainer.scrollTop = targetScrollTop;\r\n    \r\n    // Force immediate update\r\n    this.update();\r\n  }\r\n\r\n  /**\r\n   * Get the currently visible row indices\r\n   */\r\n  getVisibleRange() {\r\n    return {\r\n      start: this.visibleStart,\r\n      end: this.visibleEnd,\r\n      renderedStart: this.renderedStart,\r\n      renderedEnd: this.renderedEnd\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get the currently rendered data slice\r\n   */\r\n  getRenderedData() {\r\n    return this.renderedData;\r\n  }\r\n\r\n  /**\r\n   * Check if virtual scrolling is active\r\n   */\r\n  isEnabled() {\r\n    return this.options.enabled;\r\n  }\r\n\r\n  /**\r\n   * Enable/disable virtual scrolling\r\n   */\r\n  setEnabled(enabled) {\r\n    this.options.enabled = enabled;\r\n    \r\n    if (enabled && this.data.length > 0) {\r\n      this.init(this.data);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Track performance metrics\r\n   */\r\n  trackPerformance(renderTime) {\r\n    this.performanceData.renderTimes.push(renderTime);\r\n    this.performanceData.lastMeasurement = renderTime;\r\n\r\n    // Keep only last 100 measurements\r\n    if (this.performanceData.renderTimes.length > 100) {\r\n      this.performanceData.renderTimes.shift();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get performance statistics\r\n   */\r\n  getPerformanceStats() {\r\n    const times = this.performanceData.renderTimes;\r\n    if (times.length === 0) return null;\r\n\r\n    const avg = times.reduce((a, b) => a + b, 0) / times.length;\r\n    const max = Math.max(...times);\r\n    const min = Math.min(...times);\r\n\r\n    return {\r\n      averageRenderTime: avg.toFixed(2),\r\n      maxRenderTime: max.toFixed(2),\r\n      minRenderTime: min.toFixed(2),\r\n      scrollUpdates: this.performanceData.scrollUpdates,\r\n      totalRows: this.totalRows,\r\n      visibleRows: this.visibleEnd - this.visibleStart,\r\n      renderedRows: this.renderedEnd - this.renderedStart\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Utility: Throttle function\r\n   */\r\n  throttle(func, limit) {\r\n    let inThrottle;\r\n    return function() {\r\n      const args = arguments;\r\n      const context = this;\r\n      if (!inThrottle) {\r\n        func.apply(context, args);\r\n        inThrottle = true;\r\n        setTimeout(() => inThrottle = false, limit);\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Utility: Logging for performance tracking\r\n   */\r\n  log(message, data = {}) {\r\n    if (this.table.options.debug) {\r\n      console.log(`[VirtualScroll] ${message}`, data);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clean up event listeners and resources\r\n   */\r\n  destroy() {\r\n    if (this.scrollContainer) {\r\n      this.scrollContainer.removeEventListener('scroll', this.throttledScrollHandler);\r\n      this.scrollContainer.removeEventListener('scroll', this.handleScrollImmediate);\r\n      this.scrollContainer.removeEventListener('mousedown', this.handleScrollStart);\r\n    }\r\n    document.removeEventListener('mouseup', this.handleScrollEnd);\r\n    window.removeEventListener('resize', this.handleResize);\r\n    \r\n    // Clean up scroll drag interval\r\n    if (this.scrollDragInterval) {\r\n      clearInterval(this.scrollDragInterval);\r\n      this.scrollDragInterval = null;\r\n    }\r\n    \r\n    this.scrollContainer = null;\r\n    this.tableBody = null;\r\n    this.topSpacer = null;\r\n    this.bottomSpacer = null;\r\n  }\r\n}\r\n","/**\r\n * TablixJS Localization Module\r\n * Provides internationalization support for the table library\r\n */\r\n\r\nexport default class Localization {\r\n  constructor() {\r\n    this.currentLanguage = 'en';\r\n    this.translations = new Map();\r\n    this.fallbackLanguage = 'en';\r\n    \r\n    // Initialize with English defaults\r\n    this.addTranslations('en', this.getDefaultEnglishTranslations());\r\n  }\r\n\r\n  /**\r\n   * Get default English translations (fallback language pack)\r\n   * @returns {Object} English translations object\r\n   */\r\n  getDefaultEnglishTranslations() {\r\n    return {\r\n      // General\r\n      'general.loading': 'Loading...',\r\n      'general.error': 'Error',\r\n      'general.noData': 'No data available',\r\n      'general.show': 'Show',\r\n      'general.entries': 'entries',\r\n      'general.of': 'of',\r\n      'general.to': 'to',\r\n      'general.records': 'records',\r\n      'general.perPage': 'per page',\r\n      'general.showing': 'Showing',\r\n      'general.total': 'Total',\r\n      'general.rows': 'rows',\r\n\r\n      // Search\r\n      'search.placeholder': 'Search...',\r\n      'search.clear': 'Clear search',\r\n      'search.noResults': 'No results found',\r\n      'search.resultsFound': 'results found',\r\n\r\n      // Pagination\r\n      'pagination.first': 'First',\r\n      'pagination.previous': 'Previous',\r\n      'pagination.next': 'Next',\r\n      'pagination.last': 'Last',\r\n      'pagination.page': 'Page',\r\n      'pagination.pageOf': 'Page {currentPage} of {totalPages}',\r\n      'pagination.showingRecords': 'Showing {startRow}-{endRow} of {totalRows} records',\r\n      'pagination.noRecords': 'No records found',\r\n      'pagination.pageSize': 'Records per page',\r\n\r\n      // Sorting\r\n      'sort.sortAscending': 'Sort ascending',\r\n      'sort.sortDescending': 'Sort descending',\r\n      'sort.sortedAscending': 'Sorted ascending',\r\n      'sort.sortedDescending': 'Sorted descending',\r\n      'sort.notSorted': 'Not sorted',\r\n      'sort.clearSort': 'Clear sorting',\r\n\r\n      // Selection\r\n      'selection.selectRow': 'Select row',\r\n      'selection.deselectRow': 'Deselect row',\r\n      'selection.selectAll': 'Select all',\r\n      'selection.deselectAll': 'Deselect all',\r\n      'selection.selectedCount': '{count} selected',\r\n      'selection.selectAllVisible': 'Select all visible rows',\r\n      'selection.clearSelection': 'Clear selection',\r\n\r\n      // Filtering\r\n      'filter.filter': 'Filter',\r\n      'filter.clearFilter': 'Clear filter',\r\n      'filter.clearAllFilters': 'Clear all filters',\r\n      'filter.applyFilter': 'Apply filter',\r\n      'filter.filterBy': 'Filter by',\r\n      'filter.filterColumn': 'Filter column',\r\n      'filter.filterByValue': 'Filter by Value',\r\n      'filter.filterByCondition': 'Filter by Condition',\r\n      'filter.searchValues': 'Search values...',\r\n      'filter.selectAll': 'Select All',\r\n      'filter.noValuesAvailable': 'No values available',\r\n      'filter.addCondition': 'Add Condition',\r\n      'filter.removeCondition': 'Remove condition',\r\n      'filter.value': 'Value',\r\n      'filter.apply': 'Apply',\r\n      'filter.clear': 'Clear',\r\n      'filter.cancel': 'Cancel',\r\n      'filter.contains': 'Contains',\r\n      'filter.startsWith': 'Starts with',\r\n      'filter.endsWith': 'Ends with',\r\n      'filter.equals': 'Equals',\r\n      'filter.notEquals': 'Not equals',\r\n      'filter.greaterThan': 'Greater than',\r\n      'filter.lessThan': 'Less than',\r\n      'filter.greaterThanOrEqual': 'Greater than or equal',\r\n      'filter.lessThanOrEqual': 'Less than or equal',\r\n      'filter.between': 'Between',\r\n      'filter.isEmpty': 'Is empty',\r\n      'filter.isNotEmpty': 'Is not empty',\r\n      'filter.selectValues': 'Select values',\r\n      'filter.noOptionsAvailable': 'No options available',\r\n      'filter.complexDataNotSupported': 'Value filtering is not available for columns with complex data. Use Condition filtering instead.',\r\n\r\n      // Controls\r\n      'controls.refresh': 'Refresh data',\r\n      'controls.export': 'Export data',\r\n      'controls.settings': 'Settings',\r\n      'controls.columns': 'Columns',\r\n      'controls.showColumns': 'Show/Hide columns',\r\n\r\n      // Virtual Scrolling\r\n      'virtualScroll.loadingMoreRows': 'Loading more rows...',\r\n      'virtualScroll.scrollToTop': 'Scroll to top',\r\n      'virtualScroll.scrollToBottom': 'Scroll to bottom',\r\n\r\n      // Error Messages\r\n      'error.loadingData': 'Failed to load data',\r\n      'error.networkError': 'Network error occurred',\r\n      'error.invalidData': 'Invalid data format',\r\n      'error.serverError': 'Server error occurred',\r\n      'error.timeout': 'Request timed out',\r\n      'error.unknown': 'An unknown error occurred',\r\n      'error.retry': 'Retry',\r\n\r\n      // Data Types\r\n      'dataType.string': 'Text',\r\n      'dataType.number': 'Number',\r\n      'dataType.date': 'Date',\r\n      'dataType.boolean': 'Boolean',\r\n      'dataType.currency': 'Currency',\r\n      'dataType.percentage': 'Percentage',\r\n\r\n      // Accessibility\r\n      'accessibility.table': 'Data table',\r\n      'accessibility.sortableColumn': 'Sortable column',\r\n      'accessibility.selectableRow': 'Selectable row',\r\n      'accessibility.rowSelected': 'Row selected',\r\n      'accessibility.rowNotSelected': 'Row not selected',\r\n      'accessibility.pageNavigation': 'Page navigation',\r\n      'accessibility.searchInput': 'Search table data',\r\n      'accessibility.filterColumn': 'Filter column',\r\n\r\n      // Actions\r\n      'action.apply': 'Apply',\r\n      'action.cancel': 'Cancel',\r\n      'action.close': 'Close',\r\n      'action.save': 'Save',\r\n      'action.reset': 'Reset',\r\n      'action.ok': 'OK',\r\n      'action.yes': 'Yes',\r\n      'action.no': 'No',\r\n\r\n      // Time and Date\r\n      'date.today': 'Today',\r\n      'date.yesterday': 'Yesterday',\r\n      'date.thisWeek': 'This week',\r\n      'date.lastWeek': 'Last week',\r\n      'date.thisMonth': 'This month',\r\n      'date.lastMonth': 'Last month',\r\n\r\n      // Numbers and Formatting\r\n      'format.currency.symbol': '$',\r\n      'format.decimal.separator': '.',\r\n      'format.thousand.separator': ',',\r\n      'format.percentage.symbol': '%'\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Set the current language\r\n   * @param {string} language - Language code (e.g., 'en', 'fr', 'es')\r\n   */\r\n  setLanguage(language) {\r\n    if (typeof language !== 'string' || language.trim() === '') {\r\n      console.warn('TablixJS Localization: Invalid language code provided. Using fallback.');\r\n      return;\r\n    }\r\n\r\n    this.currentLanguage = language.toLowerCase().trim();\r\n  }\r\n\r\n  /**\r\n   * Add translations for a specific language\r\n   * @param {string} language - Language code\r\n   * @param {Object} translations - Translations object\r\n   */\r\n  addTranslations(language, translations) {\r\n    if (typeof language !== 'string' || !translations || typeof translations !== 'object') {\r\n      console.warn('TablixJS Localization: Invalid parameters for addTranslations.');\r\n      return;\r\n    }\r\n\r\n    const languageCode = language.toLowerCase().trim();\r\n    \r\n    if (!this.translations.has(languageCode)) {\r\n      this.translations.set(languageCode, {});\r\n    }\r\n\r\n    // Merge with existing translations for this language\r\n    const existing = this.translations.get(languageCode);\r\n    this.translations.set(languageCode, { ...existing, ...translations });\r\n  }\r\n\r\n  /**\r\n   * Get localized string by key\r\n   * @param {string} key - Translation key (e.g., 'pagination.next')\r\n   * @param {Object} params - Parameters to substitute in the translation\r\n   * @returns {string} Localized string or fallback\r\n   */\r\n  t(key, params = {}) {\r\n    if (typeof key !== 'string') {\r\n      console.warn('TablixJS Localization: Translation key must be a string.');\r\n      return key;\r\n    }\r\n\r\n    // Try current language first\r\n    let translation = this.getTranslationFromLanguage(this.currentLanguage, key);\r\n    \r\n    // Fallback to English if not found\r\n    if (translation === null && this.currentLanguage !== this.fallbackLanguage) {\r\n      translation = this.getTranslationFromLanguage(this.fallbackLanguage, key);\r\n    }\r\n\r\n    // Final fallback: return the key itself\r\n    if (translation === null) {\r\n      console.warn(`TablixJS Localization: Translation not found for key: ${key}`);\r\n      return key;\r\n    }\r\n\r\n    // Substitute parameters in the translation\r\n    return this.substituteParameters(translation, params);\r\n  }\r\n\r\n  /**\r\n   * Get translation from a specific language\r\n   * @private\r\n   * @param {string} language - Language code\r\n   * @param {string} key - Translation key\r\n   * @returns {string|null} Translation or null if not found\r\n   */\r\n  getTranslationFromLanguage(language, key) {\r\n    const languageTranslations = this.translations.get(language);\r\n    \r\n    if (!languageTranslations) {\r\n      return null;\r\n    }\r\n\r\n    // First try direct key lookup (for flat structure like 'pagination.first')\r\n    if (key in languageTranslations && typeof languageTranslations[key] === 'string') {\r\n      return languageTranslations[key];\r\n    }\r\n\r\n    // Fallback to nested key lookup (for nested structure)\r\n    const keys = key.split('.');\r\n    let current = languageTranslations;\r\n\r\n    for (const k of keys) {\r\n      if (current && typeof current === 'object' && k in current) {\r\n        current = current[k];\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n\r\n    return typeof current === 'string' ? current : null;\r\n  }\r\n\r\n  /**\r\n   * Substitute parameters in translation string\r\n   * @private\r\n   * @param {string} translation - Translation string with placeholders\r\n   * @param {Object} params - Parameters to substitute\r\n   * @returns {string} Translation with substituted parameters\r\n   */\r\n  substituteParameters(translation, params) {\r\n    if (!params || typeof params !== 'object') {\r\n      return translation;\r\n    }\r\n\r\n    let result = translation;\r\n    \r\n    // Replace {paramName} with actual values\r\n    Object.keys(params).forEach(key => {\r\n      const regex = new RegExp(`\\\\{${key}\\\\}`, 'g');\r\n      result = result.replace(regex, params[key]);\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Get current language code\r\n   * @returns {string} Current language code\r\n   */\r\n  getCurrentLanguage() {\r\n    return this.currentLanguage;\r\n  }\r\n\r\n  /**\r\n   * Get available languages\r\n   * @returns {Array<string>} Array of available language codes\r\n   */\r\n  getAvailableLanguages() {\r\n    return Array.from(this.translations.keys());\r\n  }\r\n\r\n  /**\r\n   * Check if a language is available\r\n   * @param {string} language - Language code to check\r\n   * @returns {boolean} True if language is available\r\n   */\r\n  hasLanguage(language) {\r\n    return this.translations.has(language.toLowerCase().trim());\r\n  }\r\n\r\n  /**\r\n   * Get all translations for current language\r\n   * @returns {Object} All translations for current language\r\n   */\r\n  getAllTranslations() {\r\n    return this.translations.get(this.currentLanguage) || {};\r\n  }\r\n\r\n  /**\r\n   * Remove translations for a specific language\r\n   * @param {string} language - Language code to remove\r\n   */\r\n  removeLanguage(language) {\r\n    const languageCode = language.toLowerCase().trim();\r\n    if (languageCode === this.fallbackLanguage) {\r\n      console.warn('TablixJS Localization: Cannot remove fallback language.');\r\n      return;\r\n    }\r\n    \r\n    this.translations.delete(languageCode);\r\n    \r\n    // If we removed the current language, switch to fallback\r\n    if (this.currentLanguage === languageCode) {\r\n      this.currentLanguage = this.fallbackLanguage;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear all translations except fallback\r\n   */\r\n  clearTranslations() {\r\n    const fallbackTranslations = this.translations.get(this.fallbackLanguage);\r\n    this.translations.clear();\r\n    this.translations.set(this.fallbackLanguage, fallbackTranslations);\r\n    this.currentLanguage = this.fallbackLanguage;\r\n  }\r\n\r\n  /**\r\n   * Format number based on current locale\r\n   * @param {number} number - Number to format\r\n   * @param {Object} options - Formatting options\r\n   * @returns {string} Formatted number\r\n   */\r\n  formatNumber(number, options = {}) {\r\n    const {\r\n      style = 'decimal',\r\n      currency = 'USD',\r\n      minimumFractionDigits,\r\n      maximumFractionDigits\r\n    } = options;\r\n\r\n    try {\r\n      const formatter = new Intl.NumberFormat(this.getLocaleCode(), {\r\n        style,\r\n        currency: style === 'currency' ? currency : undefined,\r\n        minimumFractionDigits,\r\n        maximumFractionDigits\r\n      });\r\n      \r\n      return formatter.format(number);\r\n    } catch (error) {\r\n      // Fallback formatting if Intl is not available\r\n      return this.fallbackNumberFormat(number, options);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Format date based on current locale\r\n   * @param {Date|string|number} date - Date to format\r\n   * @param {Object} options - Formatting options\r\n   * @returns {string} Formatted date\r\n   */\r\n  formatDate(date, options = {}) {\r\n    const dateObj = date instanceof Date ? date : new Date(date);\r\n    \r\n    if (isNaN(dateObj.getTime())) {\r\n      return date.toString();\r\n    }\r\n\r\n    try {\r\n      const formatter = new Intl.DateTimeFormat(this.getLocaleCode(), options);\r\n      return formatter.format(dateObj);\r\n    } catch (error) {\r\n      // Fallback to simple date formatting\r\n      return dateObj.toLocaleDateString();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get locale code for Intl formatting\r\n   * @private\r\n   * @returns {string} Locale code\r\n   */\r\n  getLocaleCode() {\r\n    // Map language codes to locale codes\r\n    const languageToLocaleMap = {\r\n      'en': 'en-US',\r\n      'fr': 'fr-FR',\r\n      'es': 'es-ES',\r\n      'de': 'de-DE',\r\n      'it': 'it-IT',\r\n      'pt': 'pt-BR',\r\n      'ru': 'ru-RU',\r\n      'ja': 'ja-JP',\r\n      'ko': 'ko-KR',\r\n      'zh': 'zh-CN'\r\n    };\r\n\r\n    return languageToLocaleMap[this.currentLanguage] || this.currentLanguage || 'en-US';\r\n  }\r\n\r\n  /**\r\n   * Fallback number formatting when Intl is not available\r\n   * @private\r\n   * @param {number} number - Number to format\r\n   * @param {Object} options - Formatting options\r\n   * @returns {string} Formatted number\r\n   */\r\n  fallbackNumberFormat(number, options = {}) {\r\n    const { style } = options;\r\n    \r\n    if (style === 'currency') {\r\n      const symbol = this.t('format.currency.symbol');\r\n      return `${symbol}${number.toFixed(2)}`;\r\n    } else if (style === 'percent') {\r\n      const symbol = this.t('format.percentage.symbol');\r\n      return `${(number * 100).toFixed(1)}${symbol}`;\r\n    }\r\n    \r\n    return number.toString();\r\n  }\r\n\r\n  /**\r\n   * Pluralization helper\r\n   * @param {number} count - Count for pluralization\r\n   * @param {string} singularKey - Key for singular form\r\n   * @param {string} pluralKey - Key for plural form\r\n   * @param {Object} params - Additional parameters\r\n   * @returns {string} Pluralized string\r\n   */\r\n  pluralize(count, singularKey, pluralKey, params = {}) {\r\n    const key = count === 1 ? singularKey : pluralKey;\r\n    return this.t(key, { count, ...params });\r\n  }\r\n}\r\n","/**\r\n * StateManager - Centralized state management for server-side operations\r\n * \r\n * This class manages the persistent state for pagination, sorting, filtering, and search\r\n * to ensure consistency across all server requests and prevent state loss during operations.\r\n */\r\nexport default class StateManager {\r\n  constructor(table) {\r\n    this.table = table;\r\n    \r\n    // Centralized state\r\n    this.state = {\r\n      // Pagination state\r\n      page: 1,\r\n      pageSize: 10,\r\n      totalRows: 0,\r\n      \r\n      // Sorting state\r\n      sort: null, // { column: 'name', direction: 'asc' } or null\r\n      \r\n      // Filtering state\r\n      filters: {}, // { columnName: { type: 'value', values: [...] } }\r\n      \r\n      // Search state\r\n      search: '', // Global search term\r\n      \r\n      // Loading state\r\n      isLoading: false\r\n    };\r\n    \r\n    // Track if initial load has completed\r\n    this.isInitialized = false;\r\n  }\r\n\r\n  /**\r\n   * Get current state snapshot\r\n   * @returns {Object} Current state\r\n   */\r\n  getState() {\r\n    return { ...this.state };\r\n  }\r\n\r\n  /**\r\n   * Update pagination state\r\n   * @param {Object} pageState - Pagination state\r\n   */\r\n  updatePagination(pageState) {\r\n    if (pageState.page !== undefined) {\r\n      this.state.page = pageState.page;\r\n    }\r\n    if (pageState.pageSize !== undefined) {\r\n      this.state.pageSize = pageState.pageSize;\r\n    }\r\n    if (pageState.totalRows !== undefined) {\r\n      this.state.totalRows = pageState.totalRows;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update sorting state\r\n   * @param {Object|null} sortState - Sort state { column, direction } or null\r\n   */\r\n  updateSort(sortState) {\r\n    this.state.sort = sortState;\r\n  }\r\n\r\n  /**\r\n   * Update filtering state\r\n   * @param {Object} filters - Filter configurations by column\r\n   */\r\n  updateFilters(filters) {\r\n    this.state.filters = { ...filters };\r\n  }\r\n\r\n  /**\r\n   * Update search state\r\n   * @param {string} searchTerm - Search term\r\n   */\r\n  updateSearch(searchTerm) {\r\n    this.state.search = searchTerm || '';\r\n  }\r\n\r\n  /**\r\n   * Update loading state\r\n   * @param {boolean} isLoading - Loading state\r\n   */\r\n  updateLoading(isLoading) {\r\n    this.state.isLoading = isLoading;\r\n  }\r\n\r\n  /**\r\n   * Reset pagination to first page\r\n   */\r\n  resetPage() {\r\n    this.state.page = 1;\r\n  }\r\n\r\n  /**\r\n   * Get parameters for server requests\r\n   * Normalizes state into consistent format for server loaders\r\n   * @returns {Object} Server request parameters\r\n   */\r\n  getServerParams() {\r\n    return {\r\n      page: this.state.page,\r\n      pageSize: this.state.pageSize,\r\n      sort: this.state.sort || {}, // Always send object, never null/undefined\r\n      filters: this.state.filters || {},\r\n      search: this.state.search || ''\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Mark initial load as completed\r\n   */\r\n  markInitialized() {\r\n    this.isInitialized = true;\r\n  }\r\n\r\n  /**\r\n   * Check if initial load has completed\r\n   * @returns {boolean}\r\n   */\r\n  isReady() {\r\n    return this.isInitialized;\r\n  }\r\n\r\n  /**\r\n   * Reset all state to defaults\r\n   */\r\n  reset() {\r\n    this.state = {\r\n      page: 1,\r\n      pageSize: this.state.pageSize, // Preserve page size\r\n      totalRows: 0,\r\n      sort: null,\r\n      filters: {},\r\n      search: '',\r\n      isLoading: false\r\n    };\r\n    this.isInitialized = false;\r\n  }\r\n}\r\n","/**\r\n * French (fr) translations for TablixJS\r\n */\r\nexport const frenchTranslations = {\r\n  // General\r\n  'general.loading': 'Chargement...',\r\n  'general.error': 'Erreur',\r\n  'general.noData': 'Aucune donnée disponible',\r\n  'general.show': 'Afficher',\r\n  'general.entries': 'entrées',\r\n  'general.of': 'de',\r\n  'general.to': 'à',\r\n  'general.records': 'enregistrements',\r\n  'general.perPage': 'par page',\r\n  'general.showing': 'Affichage',\r\n  'general.total': 'Total',\r\n  'general.rows': 'lignes',\r\n\r\n  // Search\r\n  'search.placeholder': 'Rechercher...',\r\n  'search.clear': 'Effacer la recherche',\r\n  'search.noResults': 'Aucun résultat trouvé',\r\n  'search.resultsFound': 'résultats trouvés',\r\n\r\n  // Pagination\r\n  'pagination.first': 'Premier',\r\n  'pagination.previous': 'Précédent',\r\n  'pagination.next': 'Suivant',\r\n  'pagination.last': 'Dernier',\r\n  'pagination.page': 'Page',\r\n  'pagination.pageOf': 'Page {currentPage} sur {totalPages}',\r\n  'pagination.showingRecords': 'Affichage de {startRow} à {endRow} sur {totalRows} enregistrements',\r\n  'pagination.noRecords': 'Aucun enregistrement trouvé',\r\n  'pagination.pageSize': 'Enregistrements par page',\r\n\r\n  // Sorting\r\n  'sort.sortAscending': 'Trier croissant',\r\n  'sort.sortDescending': 'Trier décroissant',\r\n  'sort.sortedAscending': 'Trié croissant',\r\n  'sort.sortedDescending': 'Trié décroissant',\r\n  'sort.notSorted': 'Non trié',\r\n  'sort.clearSort': 'Effacer le tri',\r\n\r\n  // Selection\r\n  'selection.selectRow': 'Sélectionner la ligne',\r\n  'selection.deselectRow': 'Désélectionner la ligne',\r\n  'selection.selectAll': 'Tout sélectionner',\r\n  'selection.deselectAll': 'Tout désélectionner',\r\n  'selection.selectedCount': '{count} sélectionné(s)',\r\n  'selection.selectAllVisible': 'Sélectionner toutes les lignes visibles',\r\n  'selection.clearSelection': 'Effacer la sélection',\r\n\r\n  // Filtering\r\n  'filter.filter': 'Filtrer',\r\n  'filter.clearFilter': 'Effacer le filtre',\r\n  'filter.clearAllFilters': 'Effacer tous les filtres',\r\n  'filter.applyFilter': 'Appliquer le filtre',\r\n  'filter.filterBy': 'Filtrer par',\r\n  'filter.filterColumn': 'Filtrer la colonne',\r\n  'filter.filterByValue': 'Filtrer par valeur',\r\n  'filter.filterByCondition': 'Filtrer par condition',\r\n  'filter.searchValues': 'Rechercher des valeurs...',\r\n  'filter.selectAll': 'Tout sélectionner',\r\n  'filter.noValuesAvailable': 'Aucune valeur disponible',\r\n  'filter.addCondition': 'Ajouter une condition',\r\n  'filter.removeCondition': 'Supprimer la condition',\r\n  'filter.value': 'Valeur',\r\n  'filter.apply': 'Appliquer',\r\n  'filter.clear': 'Effacer',\r\n  'filter.cancel': 'Annuler',\r\n  'filter.contains': 'Contient',\r\n  'filter.startsWith': 'Commence par',\r\n  'filter.endsWith': 'Se termine par',\r\n  'filter.equals': 'Égal à',\r\n  'filter.notEquals': 'Différent de',\r\n  'filter.greaterThan': 'Supérieur à',\r\n  'filter.lessThan': 'Inférieur à',\r\n  'filter.greaterThanOrEqual': 'Supérieur ou égal à',\r\n  'filter.lessThanOrEqual': 'Inférieur ou égal à',\r\n  'filter.between': 'Entre',\r\n  'filter.isEmpty': 'Est vide',\r\n  'filter.isNotEmpty': 'N\\'est pas vide',\r\n  'filter.selectValues': 'Sélectionner les valeurs',\r\n  'filter.noOptionsAvailable': 'Aucune option disponible',\r\n  'filter.complexDataNotSupported': 'Le filtrage par valeur n\\'est pas disponible pour les colonnes avec des données complexes. Utilisez le filtrage par condition à la place.',\r\n\r\n  // Controls\r\n  'controls.refresh': 'Actualiser les données',\r\n  'controls.export': 'Exporter les données',\r\n  'controls.settings': 'Paramètres',\r\n  'controls.columns': 'Colonnes',\r\n  'controls.showColumns': 'Afficher/Masquer les colonnes',\r\n\r\n  // Virtual Scrolling\r\n  'virtualScroll.loadingMoreRows': 'Chargement de plus de lignes...',\r\n  'virtualScroll.scrollToTop': 'Faire défiler vers le haut',\r\n  'virtualScroll.scrollToBottom': 'Faire défiler vers le bas',\r\n\r\n  // Error Messages\r\n  'error.loadingData': 'Échec du chargement des données',\r\n  'error.networkError': 'Erreur réseau',\r\n  'error.invalidData': 'Format de données invalide',\r\n  'error.serverError': 'Erreur serveur',\r\n  'error.timeout': 'Délai d\\'attente dépassé',\r\n  'error.unknown': 'Une erreur inconnue s\\'est produite',\r\n  'error.retry': 'Réessayer',\r\n\r\n  // Data Types\r\n  'dataType.string': 'Texte',\r\n  'dataType.number': 'Nombre',\r\n  'dataType.date': 'Date',\r\n  'dataType.boolean': 'Booléen',\r\n  'dataType.currency': 'Devise',\r\n  'dataType.percentage': 'Pourcentage',\r\n\r\n  // Accessibility\r\n  'accessibility.table': 'Tableau de données',\r\n  'accessibility.sortableColumn': 'Colonne triable',\r\n  'accessibility.selectableRow': 'Ligne sélectionnable',\r\n  'accessibility.rowSelected': 'Ligne sélectionnée',\r\n  'accessibility.rowNotSelected': 'Ligne non sélectionnée',\r\n  'accessibility.pageNavigation': 'Navigation des pages',\r\n  'accessibility.searchInput': 'Rechercher dans les données du tableau',\r\n  'accessibility.filterColumn': 'Filtrer la colonne',\r\n\r\n  // Actions\r\n  'action.apply': 'Appliquer',\r\n  'action.cancel': 'Annuler',\r\n  'action.close': 'Fermer',\r\n  'action.save': 'Enregistrer',\r\n  'action.reset': 'Réinitialiser',\r\n  'action.ok': 'OK',\r\n  'action.yes': 'Oui',\r\n  'action.no': 'Non',\r\n\r\n  // Time and Date\r\n  'date.today': 'Aujourd\\'hui',\r\n  'date.yesterday': 'Hier',\r\n  'date.thisWeek': 'Cette semaine',\r\n  'date.lastWeek': 'La semaine dernière',\r\n  'date.thisMonth': 'Ce mois-ci',\r\n  'date.lastMonth': 'Le mois dernier',\r\n\r\n  // Numbers and Formatting\r\n  'format.currency.symbol': '€',\r\n  'format.decimal.separator': ',',\r\n  'format.thousand.separator': ' ',\r\n  'format.percentage.symbol': '%'\r\n};\r\n\r\nexport default frenchTranslations;\r\n","/**\r\n * Spanish (es) translations for TablixJS\r\n */\r\nexport const spanishTranslations = {\r\n  // General\r\n  'general.loading': 'Cargando...',\r\n  'general.error': 'Error',\r\n  'general.noData': 'No hay datos disponibles',\r\n  'general.show': 'Mostrar',\r\n  'general.entries': 'entradas',\r\n  'general.of': 'de',\r\n  'general.to': 'a',\r\n  'general.records': 'registros',\r\n  'general.perPage': 'por página',\r\n  'general.showing': 'Mostrando',\r\n  'general.total': 'Total',\r\n  'general.rows': 'filas',\r\n\r\n  // Search\r\n  'search.placeholder': 'Buscar...',\r\n  'search.clear': 'Limpiar búsqueda',\r\n  'search.noResults': 'No se encontraron resultados',\r\n  'search.resultsFound': 'resultados encontrados',\r\n\r\n  // Pagination\r\n  'pagination.first': 'Primero',\r\n  'pagination.previous': 'Anterior',\r\n  'pagination.next': 'Siguiente',\r\n  'pagination.last': 'Último',\r\n  'pagination.page': 'Página',\r\n  'pagination.pageOf': 'Página {currentPage} de {totalPages}',\r\n  'pagination.showingRecords': 'Mostrando {startRow} a {endRow} de {totalRows} registros',\r\n  'pagination.noRecords': 'No se encontraron registros',\r\n  'pagination.pageSize': 'Registros por página',\r\n\r\n  // Sorting\r\n  'sort.sortAscending': 'Ordenar ascendente',\r\n  'sort.sortDescending': 'Ordenar descendente',\r\n  'sort.sortedAscending': 'Ordenado ascendente',\r\n  'sort.sortedDescending': 'Ordenado descendente',\r\n  'sort.notSorted': 'Sin ordenar',\r\n  'sort.clearSort': 'Limpiar ordenación',\r\n\r\n  // Selection\r\n  'selection.selectRow': 'Seleccionar fila',\r\n  'selection.deselectRow': 'Deseleccionar fila',\r\n  'selection.selectAll': 'Seleccionar todo',\r\n  'selection.deselectAll': 'Deseleccionar todo',\r\n  'selection.selectedCount': '{count} seleccionado(s)',\r\n  'selection.selectAllVisible': 'Seleccionar todas las filas visibles',\r\n  'selection.clearSelection': 'Limpiar selección',\r\n\r\n  // Filtering\r\n  'filter.filter': 'Filtrar',\r\n  'filter.clearFilter': 'Limpiar filtro',\r\n  'filter.clearAllFilters': 'Limpiar todos los filtros',\r\n  'filter.applyFilter': 'Aplicar filtro',\r\n  'filter.filterBy': 'Filtrar por',\r\n  'filter.filterColumn': 'Filtrar columna',\r\n  'filter.filterByValue': 'Filtrar por valor',\r\n  'filter.filterByCondition': 'Filtrar por condición',\r\n  'filter.searchValues': 'Buscar valores...',\r\n  'filter.selectAll': 'Seleccionar todo',\r\n  'filter.noValuesAvailable': 'No hay valores disponibles',\r\n  'filter.addCondition': 'Agregar condición',\r\n  'filter.removeCondition': 'Eliminar condición',\r\n  'filter.value': 'Valor',\r\n  'filter.apply': 'Aplicar',\r\n  'filter.clear': 'Limpiar',\r\n  'filter.cancel': 'Cancelar',\r\n  'filter.contains': 'Contiene',\r\n  'filter.startsWith': 'Comienza con',\r\n  'filter.endsWith': 'Termina con',\r\n  'filter.equals': 'Igual a',\r\n  'filter.notEquals': 'No igual a',\r\n  'filter.greaterThan': 'Mayor que',\r\n  'filter.lessThan': 'Menor que',\r\n  'filter.greaterThanOrEqual': 'Mayor o igual a',\r\n  'filter.lessThanOrEqual': 'Menor o igual a',\r\n  'filter.between': 'Entre',\r\n  'filter.isEmpty': 'Está vacío',\r\n  'filter.isNotEmpty': 'No está vacío',\r\n  'filter.selectValues': 'Seleccionar valores',\r\n  'filter.noOptionsAvailable': 'No hay opciones disponibles',\r\n  'filter.complexDataNotSupported': 'El filtrado por valor no está disponible para columnas con datos complejos. Utilice el filtrado por condición en su lugar.',\r\n\r\n  // Controls\r\n  'controls.refresh': 'Actualizar datos',\r\n  'controls.export': 'Exportar datos',\r\n  'controls.settings': 'Configuración',\r\n  'controls.columns': 'Columnas',\r\n  'controls.showColumns': 'Mostrar/Ocultar columnas',\r\n\r\n  // Virtual Scrolling\r\n  'virtualScroll.loadingMoreRows': 'Cargando más filas...',\r\n  'virtualScroll.scrollToTop': 'Desplazar hacia arriba',\r\n  'virtualScroll.scrollToBottom': 'Desplazar hacia abajo',\r\n\r\n  // Error Messages\r\n  'error.loadingData': 'Error al cargar los datos',\r\n  'error.networkError': 'Error de red',\r\n  'error.invalidData': 'Formato de datos inválido',\r\n  'error.serverError': 'Error del servidor',\r\n  'error.timeout': 'Tiempo de espera agotado',\r\n  'error.unknown': 'Ocurrió un error desconocido',\r\n  'error.retry': 'Reintentar',\r\n\r\n  // Data Types\r\n  'dataType.string': 'Texto',\r\n  'dataType.number': 'Número',\r\n  'dataType.date': 'Fecha',\r\n  'dataType.boolean': 'Booleano',\r\n  'dataType.currency': 'Moneda',\r\n  'dataType.percentage': 'Porcentaje',\r\n\r\n  // Accessibility\r\n  'accessibility.table': 'Tabla de datos',\r\n  'accessibility.sortableColumn': 'Columna ordenable',\r\n  'accessibility.selectableRow': 'Fila seleccionable',\r\n  'accessibility.rowSelected': 'Fila seleccionada',\r\n  'accessibility.rowNotSelected': 'Fila no seleccionada',\r\n  'accessibility.pageNavigation': 'Navegación de páginas',\r\n  'accessibility.searchInput': 'Buscar en los datos de la tabla',\r\n  'accessibility.filterColumn': 'Filtrar columna',\r\n\r\n  // Actions\r\n  'action.apply': 'Aplicar',\r\n  'action.cancel': 'Cancelar',\r\n  'action.close': 'Cerrar',\r\n  'action.save': 'Guardar',\r\n  'action.reset': 'Restablecer',\r\n  'action.ok': 'OK',\r\n  'action.yes': 'Sí',\r\n  'action.no': 'No',\r\n\r\n  // Time and Date\r\n  'date.today': 'Hoy',\r\n  'date.yesterday': 'Ayer',\r\n  'date.thisWeek': 'Esta semana',\r\n  'date.lastWeek': 'La semana pasada',\r\n  'date.thisMonth': 'Este mes',\r\n  'date.lastMonth': 'El mes pasado',\r\n\r\n  // Numbers and Formatting\r\n  'format.currency.symbol': '€',\r\n  'format.decimal.separator': ',',\r\n  'format.thousand.separator': '.',\r\n  'format.percentage.symbol': '%'\r\n};\r\n\r\nexport default spanishTranslations;\r\n","/**\r\n * Serbian (sr) translations for TablixJS\r\n */\r\nexport const serbianTranslations = {\r\n  // General\r\n  'general.loading': 'Učitavanje...',\r\n  'general.error': 'Greška',\r\n  'general.noData': 'Nema dostupnih podataka',\r\n  'general.show': 'Prikaži',\r\n  'general.entries': 'unosa',\r\n  'general.of': 'od',\r\n  'general.to': 'do',\r\n  'general.records': 'zapisa',\r\n  'general.perPage': 'po stranici',\r\n  'general.showing': 'Prikazano',\r\n  'general.total': 'Ukupno',\r\n  'general.rows': 'redova',\r\n\r\n  // Search\r\n  'search.placeholder': 'Pretraga...',\r\n  'search.clear': 'Obriši pretragu',\r\n  'search.noResults': 'Nema rezultata',\r\n  'search.resultsFound': 'rezultata pronađeno',\r\n\r\n  // Pagination\r\n  'pagination.first': 'Prva',\r\n  'pagination.previous': 'Prethodna',\r\n  'pagination.next': 'Sledeća',\r\n  'pagination.last': 'Poslednja',\r\n  'pagination.page': 'Stranica',\r\n  'pagination.pageOf': 'Stranica {currentPage} od {totalPages}',\r\n  'pagination.showingRecords': 'Prikazano {startRow}-{endRow} od {totalRows} zapisa',\r\n  'pagination.noRecords': 'Nema zapisa',\r\n  'pagination.pageSize': 'Zapisa po stranici',\r\n\r\n  // Sorting\r\n  'sort.sortAscending': 'Sortiraj rastuće',\r\n  'sort.sortDescending': 'Sortiraj opadajuće',\r\n  'sort.sortedAscending': 'Sortirano rastuće',\r\n  'sort.sortedDescending': 'Sortirano opadajuće',\r\n  'sort.notSorted': 'Nije sortirano',\r\n  'sort.clearSort': 'Obriši sortiranje',\r\n\r\n  // Selection\r\n  'selection.selectRow': 'Izaberi red',\r\n  'selection.deselectRow': 'Poništi izbor reda',\r\n  'selection.selectAll': 'Izaberi sve',\r\n  'selection.deselectAll': 'Poništi sve',\r\n  'selection.selectedCount': '{count} izabrano',\r\n  'selection.selectAllVisible': 'Izaberi sve vidljive redove',\r\n  'selection.clearSelection': 'Obriši izbor',\r\n\r\n  // Filtering\r\n  'filter.filter': 'Filter',\r\n  'filter.clearFilter': 'Obriši filter',\r\n  'filter.clearAllFilters': 'Obriši sve filtere',\r\n  'filter.applyFilter': 'Primeni filter',\r\n  'filter.filterBy': 'Filtriraj po',\r\n  'filter.filterColumn': 'Filtriraj kolonu',\r\n  'filter.filterByValue': 'Filtriraj po vrednosti',\r\n  'filter.filterByCondition': 'Filtriraj po uslovu',\r\n  'filter.searchValues': 'Pretraži vrednosti...',\r\n  'filter.selectAll': 'Izaberi sve',\r\n  'filter.noValuesAvailable': 'Nema dostupnih vrednosti',\r\n  'filter.addCondition': 'Dodaj uslov',\r\n  'filter.removeCondition': 'Ukloni uslov',\r\n  'filter.value': 'Vrednost',\r\n  'filter.apply': 'Primeni',\r\n  'filter.clear': 'Obriši',\r\n  'filter.cancel': 'Otkaži',\r\n  'filter.contains': 'Sadrži',\r\n  'filter.startsWith': 'Počinje sa',\r\n  'filter.endsWith': 'Završava se sa',\r\n  'filter.equals': 'Jednako',\r\n  'filter.notEquals': 'Nije jednako',\r\n  'filter.greaterThan': 'Veće od',\r\n  'filter.lessThan': 'Manje od',\r\n  'filter.greaterThanOrEqual': 'Veće ili jednako',\r\n  'filter.lessThanOrEqual': 'Manje ili jednako',\r\n  'filter.between': 'Između',\r\n  'filter.isEmpty': 'Prazno',\r\n  'filter.isNotEmpty': 'Nije prazno',\r\n  'filter.selectValues': 'Izaberi vrednosti',\r\n  'filter.noOptionsAvailable': 'Nema dostupnih opcija',\r\n  'filter.complexDataNotSupported': 'Filtriranje po vrednosti nije dostupno za kolone sa složenim podacima. Koristite filtriranje po uslovu umesto toga.',\r\n\r\n  // Controls\r\n  'controls.refresh': 'Osveži podatke',\r\n  'controls.export': 'Izvezi podatke',\r\n  'controls.settings': 'Podešavanja',\r\n  'controls.columns': 'Kolone',\r\n  'controls.showColumns': 'Prikaži/Sakrij kolone',\r\n\r\n  // Virtual Scrolling\r\n  'virtualScroll.loadingMoreRows': 'Učitavanje dodatnih redova...',\r\n  'virtualScroll.scrollToTop': 'Idi na vrh',\r\n  'virtualScroll.scrollToBottom': 'Idi na dno',\r\n\r\n  // Error Messages\r\n  'error.loadingData': 'Neuspešno učitavanje podataka',\r\n  'error.networkError': 'Došlo je do mrežne greške',\r\n  'error.invalidData': 'Neispravan format podataka',\r\n  'error.serverError': 'Došlo je do greške na serveru',\r\n  'error.timeout': 'Isteklo vreme zahteva',\r\n  'error.unknown': 'Došlo je do nepoznate greške',\r\n  'error.retry': 'Pokušaj ponovo',\r\n\r\n  // Data Types\r\n  'dataType.string': 'Tekst',\r\n  'dataType.number': 'Broj',\r\n  'dataType.date': 'Datum',\r\n  'dataType.boolean': 'Logička vrednost',\r\n  'dataType.currency': 'Valuta',\r\n  'dataType.percentage': 'Procenat',\r\n\r\n  // Accessibility\r\n  'accessibility.table': 'Tabela podataka',\r\n  'accessibility.sortableColumn': 'Kolona za sortiranje',\r\n  'accessibility.selectableRow': 'Red za izbor',\r\n  'accessibility.rowSelected': 'Red izabran',\r\n  'accessibility.rowNotSelected': 'Red nije izabran',\r\n  'accessibility.pageNavigation': 'Navigacija stranica',\r\n  'accessibility.searchInput': 'Pretraga podataka tabele',\r\n  'accessibility.filterColumn': 'Filtriraj kolonu',\r\n\r\n  // Actions\r\n  'action.apply': 'Primeni',\r\n  'action.cancel': 'Otkaži',\r\n  'action.close': 'Zatvori',\r\n  'action.save': 'Sačuvaj',\r\n  'action.reset': 'Resetuj',\r\n  'action.ok': 'U redu',\r\n  'action.yes': 'Da',\r\n  'action.no': 'Ne',\r\n\r\n  // Time and Date\r\n  'date.today': 'Danas',\r\n  'date.yesterday': 'Juče',\r\n  'date.thisWeek': 'Ove nedelje',\r\n  'date.lastWeek': 'Prošle nedelje',\r\n  'date.thisMonth': 'Ovog meseca',\r\n  'date.lastMonth': 'Prošlog meseca',\r\n\r\n  // Numbers and Formatting\r\n  'format.currency.symbol': 'RSD',\r\n  'format.decimal.separator': ',',\r\n  'format.thousand.separator': '.',\r\n  'format.percentage.symbol': '%'\r\n};\r\n\r\nexport default serbianTranslations;\r\n","import DataManager from './DataManager.js';\r\nimport Renderer from './Renderer.js';\r\nimport EventManager from './EventManager.js';\r\nimport PaginationManager from './PaginationManager.js';\r\nimport SortingManager from './SortingManager.js';\r\nimport ColumnManager from './ColumnManager.js';\r\nimport FilterManager from './FilterManager.js';\r\nimport FilterUI from './FilterUI.js';\r\nimport SearchManager from './SearchManager.js';\r\nimport SelectionManager from './SelectionManager.js';\r\nimport VirtualScrollManager from './VirtualScroll.js';\r\nimport Localization from './Localization.js';\r\nimport StateManager from './StateManager.js';\r\nimport { frenchTranslations } from '../locales/fr.js';\r\nimport { spanishTranslations } from '../locales/es.js';\r\nimport { serbianTranslations } from '../locales/sr.js';\r\n\r\nexport default class Table {\r\n  constructor(container, options = {}) {\r\n    this.container = typeof container === 'string' ? document.querySelector(container) : container;\r\n    this.options = {\r\n      // Default options\r\n      pagination: {\r\n        enabled: true,\r\n        pageSize: 10,\r\n        mode: 'client', // 'client' or 'server'\r\n        showPageNumbers: true,\r\n        maxPageNumbers: 5,\r\n        showFirstLast: true,\r\n        showPrevNext: true,\r\n        showPageSizes: false,\r\n        pageSizeOptions: [10, 25, 50, 100],\r\n        serverDataLoader: null\r\n      },\r\n      // Sorting options\r\n      sorting: {\r\n        enabled: true,\r\n        mode: 'client', // 'client' or 'server'\r\n        serverSortLoader: null,\r\n        defaultSortType: 'auto',\r\n        caseSensitive: false,\r\n        nullsFirst: false\r\n      },\r\n      // Filtering options\r\n      filtering: {\r\n        enabled: true,\r\n        mode: 'client', // 'client' or 'server'\r\n        serverFilterLoader: null,\r\n        debounceDelay: 300,\r\n        showBadges: true,\r\n        showTooltips: true\r\n      },\r\n      // Control panels\r\n      controls: {\r\n        enabled: true,  // Enable by default to show search\r\n        search: true,\r\n        pagination: true,\r\n        pageSize: true,\r\n        refresh: true,\r\n        export: false,\r\n        position: 'top' // 'top', 'bottom', 'both'\r\n      },\r\n      search: {\r\n        enabled: true,\r\n        placeholder: null, // Will use localized string if not provided\r\n        searchDelay: 300, // Debounce delay in milliseconds\r\n        minLength: 1, // Minimum characters before search starts\r\n        caseSensitive: false\r\n      },\r\n      // Selection options\r\n      selection: {\r\n        enabled: false,  // Default: selection is disabled\r\n        mode: 'single',  // 'single' or 'multi'\r\n        dataIdKey: 'id'  // Key to use as stable row identifier\r\n      },\r\n      // Virtual scrolling options\r\n      virtualScroll: {\r\n        enabled: false,\r\n        buffer: 10, // Number of rows to render above/below viewport\r\n        rowHeight: null, // Auto-detected if null\r\n        containerHeight: 400 // Default container height in pixels\r\n      },\r\n      // Localization options\r\n      language: 'en',\r\n      translations: {},\r\n      ...options\r\n    };\r\n\r\n    // Initialize localization first (before other managers that might use it)\r\n    this.localization = new Localization();\r\n    \r\n    // Auto-load common language packs for developer convenience\r\n    this.localization.addTranslations('fr', frenchTranslations);\r\n    this.localization.addTranslations('es', spanishTranslations);\r\n    this.localization.addTranslations('sr', serbianTranslations);\r\n    \r\n    // Set language and translations if provided\r\n    if (this.options.language) {\r\n      this.localization.setLanguage(this.options.language);\r\n    }\r\n    \r\n    // Add custom translations if provided (these will override auto-loaded ones)\r\n    if (this.options.translations) {\r\n      Object.keys(this.options.translations).forEach(lang => {\r\n        this.localization.addTranslations(lang, this.options.translations[lang]);\r\n      });\r\n    }\r\n\r\n    // Initialize managers\r\n    this.eventManager = new EventManager();\r\n    this.columnManager = new ColumnManager(this);\r\n    this.dataManager = new DataManager(this, options.data || []);\r\n    this.renderer = new Renderer(this);\r\n    \r\n    // Initialize state manager for server-side operations\r\n    this.stateManager = new StateManager(this);\r\n    \r\n    // Initialize columns if provided\r\n    if (options.columns) {\r\n      this.columnManager.initializeColumns(options.columns);\r\n    }\r\n    \r\n    // Initialize pagination if enabled\r\n    if (this.options.pagination && this.options.pagination.enabled !== false) {\r\n      this.paginationManager = new PaginationManager(this, this.options.pagination);\r\n      // Sync initial page size with state manager\r\n      this.stateManager.updatePagination({ \r\n        pageSize: this.options.pagination.pageSize || 10 \r\n      });\r\n    }\r\n\r\n    // Initialize sorting if enabled\r\n    if (this.options.sorting && this.options.sorting.enabled !== false) {\r\n      this.sortingManager = new SortingManager(this, this.options.sorting);\r\n    }\r\n\r\n    // Initialize filtering if enabled\r\n    if (this.options.filtering && this.options.filtering.enabled !== false) {\r\n      this.filterManager = new FilterManager(this, this.options.filtering);\r\n      this.filterUI = new FilterUI(this.filterManager);\r\n    }\r\n\r\n    // Initialize search if enabled\r\n    if (this.options.search && this.options.search.enabled !== false) {\r\n      this.searchManager = new SearchManager(this, this.options.search);\r\n    }\r\n\r\n    // Initialize selection if enabled\r\n    if (this.options.selection) {\r\n      this.selectionManager = new SelectionManager(this, this.options.selection);\r\n    }\r\n\r\n    // Initialize virtual scrolling\r\n    if (this.options.virtualScroll) {\r\n      this.virtualScrollManager = new VirtualScrollManager(this, this.options.virtualScroll);\r\n    }\r\n\r\n    this.init();\r\n  }\r\n\r\n  async init() {\r\n    try {\r\n      // Initialize search manager\r\n      if (this.searchManager) {\r\n        this.searchManager.init();\r\n      }\r\n\r\n      // Determine if we're using server-side operations\r\n      const isServerMode = this._isServerMode();\r\n      \r\n      // Trigger beforeLoad hook for initial data\r\n      this.eventManager.trigger('beforeLoad', { source: 'initialization' });\r\n      \r\n      if (isServerMode) {\r\n        // For server mode, load initial data through unified request\r\n        await this._loadServerData();\r\n      } else {\r\n        // For client mode, just refresh with local data\r\n        await this.refreshTable();\r\n      }\r\n      \r\n      // Mark state as initialized\r\n      this.stateManager.markInitialized();\r\n      \r\n      // Trigger afterLoad hook with consistent payload format\r\n      const loadedData = this.dataManager.getData();\r\n      this.eventManager.trigger('afterLoad', { data: loadedData, source: 'initialization' });\r\n      \r\n      // Explicitly trigger afterRender to ensure selection works on first load\r\n      this.eventManager.trigger('afterRender');\r\n    } catch (error) {\r\n      console.error('Failed to initialize table:', error);\r\n      this.eventManager.trigger('loadError', { error, source: 'initialization' });\r\n      if (this.renderer && this.renderer.renderError) {\r\n        this.renderer.renderError(error);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if any feature is using server mode\r\n   * @private\r\n   */\r\n  _isServerMode() {\r\n    return (this.options.pagination && this.options.pagination.mode === 'server') ||\r\n           (this.options.sorting && this.options.sorting.mode === 'server') ||\r\n           (this.options.filtering && this.options.filtering.mode === 'server');\r\n  }\r\n\r\n  /**\r\n   * Unified server data loading\r\n   * Ensures only one request is made with all current state (pagination, sort, filter, search)\r\n   * @private\r\n   */\r\n  async _loadServerData() {\r\n    // Update state manager with current search term\r\n    if (this.searchManager) {\r\n      this.stateManager.updateSearch(this.searchManager.currentSearchTerm);\r\n    }\r\n\r\n    // Get unified parameters from state manager\r\n    const params = this.stateManager.getServerParams();\r\n    \r\n    this.stateManager.updateLoading(true);\r\n    this.eventManager.trigger('beforeServerLoad', params);\r\n\r\n    try {\r\n      let result;\r\n      \r\n      // Determine which loader to use based on the operation\r\n      // Priority: serverFilterLoader > serverSortLoader > serverDataLoader\r\n      if (this.options.filtering && \r\n          this.options.filtering.mode === 'server' && \r\n          this.options.filtering.serverFilterLoader &&\r\n          Object.keys(params.filters).length > 0) {\r\n        // Use filter loader if filters are active\r\n        result = await this.options.filtering.serverFilterLoader(params);\r\n      } else if (this.options.sorting && \r\n                 this.options.sorting.mode === 'server' && \r\n                 this.options.sorting.serverSortLoader &&\r\n                 params.sort && params.sort.column) {\r\n        // Use sort loader if sort is active and no filters\r\n        result = await this.options.sorting.serverSortLoader(params);\r\n      } else if (this.options.pagination && \r\n                 this.options.pagination.serverDataLoader) {\r\n        // Fall back to pagination loader\r\n        result = await this.options.pagination.serverDataLoader(params);\r\n      } else {\r\n        throw new Error('No server data loader configured for server-side operations');\r\n      }\r\n\r\n      // Update data manager with server response\r\n      this.dataManager.setServerData(result.data, result.totalRows);\r\n      \r\n      // Update state manager with total rows\r\n      this.stateManager.updatePagination({ totalRows: result.totalRows });\r\n      \r\n      // Update pagination manager info\r\n      if (this.paginationManager) {\r\n        this.paginationManager.updatePaginationInfo(result.totalRows);\r\n      }\r\n\r\n      // Render the table with the loaded data\r\n      this.renderer.renderTable(result.data);\r\n\r\n      this.stateManager.updateLoading(false);\r\n      this.eventManager.trigger('afterServerLoad', { params, result });\r\n      \r\n      return result.data;\r\n    } catch (error) {\r\n      this.stateManager.updateLoading(false);\r\n      this.eventManager.trigger('serverLoadError', { params, error });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh the table with current data and pagination\r\n   */\r\n  async refreshTable() {\r\n    let dataToRender;\r\n    \r\n    // Check if we're in server mode\r\n    const isServerMode = this._isServerMode();\r\n    \r\n    if (isServerMode && this.stateManager.isReady()) {\r\n      // For server mode after initialization, always use unified server loading\r\n      dataToRender = await this._loadServerData();\r\n      return; // _loadServerData already renders the table\r\n    }\r\n    \r\n    if (this.virtualScrollManager && this.virtualScrollManager.isEnabled()) {\r\n      // Virtual scrolling mode - get all data for virtual scrolling manager\r\n      dataToRender = this.dataManager.getData();\r\n      \r\n      // Initialize or update virtual scrolling with full dataset\r\n      this.virtualScrollManager.updateData(dataToRender);\r\n      \r\n      // Render the table structure first (without data rows)\r\n      this.renderer.renderTable([], true); // Pass empty array and virtualMode flag\r\n      \r\n      // Initialize virtual scrolling after table structure is ready\r\n      this.virtualScrollManager.init(dataToRender);\r\n    } else if (this.paginationManager) {\r\n      // Traditional pagination mode (client-side)\r\n      dataToRender = await this.paginationManager.getPageData();\r\n      this.renderer.renderTable(dataToRender);\r\n    } else {\r\n      // No pagination, show all data (traditional mode)\r\n      dataToRender = this.dataManager.getData();\r\n      this.renderer.renderTable(dataToRender);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Load new data into the table\r\n   * Supports multiple data sources:\r\n   * - Array: loadData([{id: 1, name: 'John'}])\r\n   * - URL string: loadData('/api/data')\r\n   * - Async function: loadData(() => fetch('/api/data').then(r => r.json()))\r\n   * @param {Array|string|Function} source - Data source\r\n   */\r\n  async loadData(source) {\r\n    try {\r\n      // Trigger beforeLoad hook\r\n      this.eventManager.trigger('beforeLoad', { source });\r\n\r\n      let data;\r\n\r\n      // Handle different data source types\r\n      if (Array.isArray(source)) {\r\n        // Direct array data\r\n        data = source;\r\n      } else if (typeof source === 'string') {\r\n        // URL string - fetch data\r\n        data = await this._fetchFromUrl(source);\r\n      } else if (typeof source === 'function') {\r\n        // Custom async function\r\n        data = await source();\r\n      } else {\r\n        throw new Error('Invalid data source. Expected array, URL string, or function.');\r\n      }\r\n\r\n      // Validate data\r\n      if (!Array.isArray(data)) {\r\n        throw new Error('Data source must resolve to an array.');\r\n      }\r\n\r\n      // Update data and refresh table\r\n      this.dataManager.setData(data);\r\n      await this.refreshTable();\r\n      \r\n      // Trigger afterLoad hook\r\n      this.eventManager.trigger('afterLoad', { data, source });\r\n\r\n    } catch (error) {\r\n      // Handle loading errors\r\n      console.error('Error loading data:', error);\r\n      this.eventManager.trigger('loadError', { error, source });\r\n      \r\n      // Render error state\r\n      if (this.renderer && this.renderer.renderError) {\r\n        this.renderer.renderError(error);\r\n      }\r\n      \r\n      // Re-throw for caller handling\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Internal method to fetch data from URL\r\n   * @private\r\n   */\r\n  async _fetchFromUrl(url) {\r\n    if (typeof fetch === 'undefined') {\r\n      throw new Error('fetch is not available. Please use a modern browser or provide a polyfill.');\r\n    }\r\n\r\n    const response = await fetch(url);\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status} - ${response.statusText}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    return data;\r\n  }\r\n\r\n  /**\r\n   * Filter data by criteria\r\n   */\r\n  async filter(criteria) {\r\n    this.dataManager.applyFilter(criteria);\r\n    await this.refreshTable();\r\n    this.eventManager.trigger('afterFilter', criteria);\r\n  }\r\n\r\n  /**\r\n   * Sort data by column\r\n   * @param {string} columnName - Column to sort by\r\n   * @param {string|null} direction - 'asc', 'desc', or null (unsorted)\r\n   */\r\n  async sort(columnName, direction = 'asc') {\r\n    if (this.sortingManager) {\r\n      await this.sortingManager.sort(columnName, direction);\r\n    } else {\r\n      // Fallback to legacy sorting\r\n      this.dataManager.applySorting([{ column: columnName, direction }]);\r\n      await this.refreshTable();\r\n      this.eventManager.trigger('afterSort', [{ column: columnName, direction }]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle sort for a column (handles click cycling)\r\n   */\r\n  async toggleSort(columnName) {\r\n    if (this.sortingManager) {\r\n      await this.sortingManager.toggleSort(columnName);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear all sorting\r\n   */\r\n  async clearSorting() {\r\n    if (this.sortingManager) {\r\n      await this.sortingManager.clearSorting();\r\n    } else {\r\n      // Fallback to legacy sorting\r\n      this.dataManager.clearSorting();\r\n      await this.refreshTable();\r\n      this.eventManager.trigger('afterSort', []);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get current sort state\r\n   */\r\n  getSortState() {\r\n    if (this.sortingManager) {\r\n      return this.sortingManager.getSortState();\r\n    }\r\n    return { sort: null, mode: 'client' };\r\n  }\r\n\r\n  /**\r\n   * Clear all filters\r\n   */\r\n  async clearFilters() {\r\n    this.dataManager.clearFilters();\r\n    await this.refreshTable();\r\n    this.eventManager.trigger('afterFilter', {});\r\n  }\r\n\r\n  /**\r\n   * Clear all sorting\r\n   */\r\n  async clearSorting() {\r\n    if (this.sortingManager) {\r\n      await this.sortingManager.clearSorting();\r\n    } else {\r\n      // Fallback to legacy sorting\r\n      this.dataManager.clearSorting();\r\n      await this.refreshTable();\r\n      this.eventManager.trigger('afterSort', []);\r\n    }\r\n  }\r\n\r\n  // ===== FILTERING API =====\r\n\r\n  /**\r\n   * Apply filter to a specific column\r\n   * @param {string} columnName - Column to filter\r\n   * @param {Object} filterConfig - Filter configuration\r\n   * @example\r\n   * table.applyFilter('status', { type: 'value', values: ['Active', 'Pending'] });\r\n   * table.applyFilter('name', { type: 'condition', conditions: [{ operator: 'beginsWith', value: 'A' }] });\r\n   */\r\n  async applyFilter(columnName, filterConfig) {\r\n    if (this.filterManager) {\r\n      await this.filterManager.applyFilter(columnName, filterConfig);\r\n    } else {\r\n      console.warn('TablixJS: Filtering is not enabled. Set filtering.enabled to true in options.');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear filter for a specific column\r\n   * @param {string} columnName - Column to clear filter for\r\n   */\r\n  async clearFilter(columnName) {\r\n    if (this.filterManager) {\r\n      await this.filterManager.clearFilter(columnName);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear all filters\r\n   */\r\n  async clearAllFilters() {\r\n    if (this.filterManager) {\r\n      await this.filterManager.clearAllFilters();\r\n    } else {\r\n      // Fallback to legacy method\r\n      this.dataManager.clearFilters();\r\n      await this.refreshTable();\r\n      this.eventManager.trigger('afterFilter', {});\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get active filters\r\n   * @returns {Object} Active filters by column\r\n   */\r\n  getActiveFilters() {\r\n    return this.filterManager ? this.filterManager.getActiveFilters() : {};\r\n  }\r\n\r\n  /**\r\n   * Get filter state for a column\r\n   * @param {string} columnName - Column name\r\n   * @returns {Object|null} Filter state\r\n   */\r\n  getColumnFilter(columnName) {\r\n    return this.filterManager ? this.filterManager.getColumnFilter(columnName) : null;\r\n  }\r\n\r\n  // ===== SEARCH API =====\r\n\r\n  /**\r\n   * Set search term programmatically\r\n   * @param {string} searchTerm - Search term\r\n   */\r\n  async setSearchTerm(searchTerm) {\r\n    if (this.searchManager) {\r\n      await this.searchManager.setSearchTerm(searchTerm);\r\n    } else {\r\n      console.warn('TablixJS: Search is not enabled. Set search.enabled to true in options.');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get current search term\r\n   * @returns {string} Current search term\r\n   */\r\n  getSearchTerm() {\r\n    return this.searchManager ? this.searchManager.getSearchTerm() : '';\r\n  }\r\n\r\n  /**\r\n   * Clear search\r\n   */\r\n  async clearSearch() {\r\n    if (this.searchManager) {\r\n      await this.searchManager.clearSearch();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get search information\r\n   * @returns {Object} Search results information\r\n   */\r\n  getSearchInfo() {\r\n    return this.searchManager ? this.searchManager.getSearchInfo() : null;\r\n  }\r\n\r\n  // ===== PAGINATION API =====\r\n\r\n  /**\r\n   * Go to next page\r\n   */\r\n  async nextPage() {\r\n    if (this.paginationManager) {\r\n      await this.paginationManager.nextPage();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Go to previous page\r\n   */\r\n  async prevPage() {\r\n    if (this.paginationManager) {\r\n      await this.paginationManager.prevPage();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Go to first page\r\n   */\r\n  async firstPage() {\r\n    if (this.paginationManager) {\r\n      await this.paginationManager.firstPage();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Go to last page\r\n   */\r\n  async lastPage() {\r\n    if (this.paginationManager) {\r\n      await this.paginationManager.lastPage();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Go to specific page\r\n   */\r\n  async goToPage(pageNumber) {\r\n    if (this.paginationManager) {\r\n      await this.paginationManager.goToPage(pageNumber);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Change page size\r\n   */\r\n  async changePageSize(pageSize) {\r\n    if (this.paginationManager) {\r\n      await this.paginationManager.changePageSize(pageSize);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get pagination information\r\n   */\r\n  getPaginationInfo() {\r\n    return this.paginationManager ? this.paginationManager.getInfo() : null;\r\n  }\r\n\r\n  /**\r\n   * Enable/disable pagination\r\n   */\r\n  async setPaginationEnabled(enabled) {\r\n    if (this.paginationManager) {\r\n      this.paginationManager.setEnabled(enabled);\r\n      await this.refreshTable();\r\n    } else if (enabled) {\r\n      // Create pagination manager if it doesn't exist\r\n      this.paginationManager = new PaginationManager(this, this.options.pagination);\r\n      await this.refreshTable();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Switch between client-side and server-side pagination\r\n   */\r\n  async setPaginationMode(mode, serverDataLoader = null) {\r\n    if (this.paginationManager) {\r\n      await this.paginationManager.setMode(mode, serverDataLoader);\r\n    }\r\n  }\r\n\r\n  // ===== EVENT MANAGEMENT =====\r\n\r\n  /**\r\n   * Register event callback\r\n   */\r\n  on(event, callback) {\r\n    this.eventManager.on(event, callback);\r\n  }\r\n\r\n  /**\r\n   * Remove event callback\r\n   */\r\n  off(event, callback) {\r\n    this.eventManager.off(event, callback);\r\n  }\r\n\r\n  /**\r\n   * Clear event listeners\r\n   */\r\n  clearEvents(event) {\r\n    this.eventManager.clear(event);\r\n  }\r\n\r\n  /**\r\n   * Trigger event\r\n   */\r\n  trigger(event, data) {\r\n    this.eventManager.trigger(event, data);\r\n  }\r\n\r\n  // ===== UTILITY METHODS =====\r\n\r\n  /**\r\n   * Get current filtered data\r\n   */\r\n  getData() {\r\n    return this.dataManager.getData();\r\n  }\r\n\r\n  /**\r\n   * Get original unfiltered data\r\n   */\r\n  getOriginalData() {\r\n    return this.dataManager.originalData;\r\n  }\r\n\r\n  /**\r\n   * Get table options\r\n   */\r\n  getOptions() {\r\n    return this.options;\r\n  }\r\n\r\n  /**\r\n   * Update table options\r\n   */\r\n  async setOptions(newOptions) {\r\n    this.options = { ...this.options, ...newOptions };\r\n    \r\n    // Update pagination options if provided\r\n    if (newOptions.pagination && this.paginationManager) {\r\n      this.paginationManager.options = { ...this.paginationManager.options, ...newOptions.pagination };\r\n    }\r\n    \r\n    // Update selection options if provided\r\n    if (newOptions.selection && this.selectionManager) {\r\n      this.selectionManager.options = { ...this.selectionManager.options, ...newOptions.selection };\r\n      \r\n      // Re-initialize if enabled state changed\r\n      if (newOptions.selection.enabled !== undefined) {\r\n        if (newOptions.selection.enabled) {\r\n          this.selectionManager.enable();\r\n        } else {\r\n          this.selectionManager.disable();\r\n        }\r\n      }\r\n      \r\n      // Update mode if provided\r\n      if (newOptions.selection.mode) {\r\n        this.selectionManager.setMode(newOptions.selection.mode);\r\n      }\r\n    }\r\n    \r\n    await this.refreshTable();\r\n  }\r\n\r\n  // ===== SELECTION API =====\r\n\r\n  /**\r\n   * Get selected row data\r\n   * @returns {Array} Array of selected row data objects\r\n   */\r\n  getSelectedData() {\r\n    return this.selectionManager ? this.selectionManager.getSelectedData() : [];\r\n  }\r\n\r\n  /**\r\n   * Get selected row IDs\r\n   * @returns {Array} Array of selected row IDs\r\n   */\r\n  getSelectedIds() {\r\n    return this.selectionManager ? this.selectionManager.getSelectedIds() : [];\r\n  }\r\n\r\n  /**\r\n   * Programmatically select rows by ID\r\n   * @param {String|Array} rowIds - Single row ID or array of row IDs\r\n   */\r\n  selectRows(rowIds) {\r\n    if (this.selectionManager) {\r\n      this.selectionManager.selectRows(rowIds);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Programmatically deselect rows by ID\r\n   * @param {String|Array} rowIds - Single row ID or array of row IDs\r\n   */\r\n  deselectRows(rowIds) {\r\n    if (this.selectionManager) {\r\n      this.selectionManager.deselectRows(rowIds);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear all selections\r\n   */\r\n  clearSelection() {\r\n    if (this.selectionManager) {\r\n      this.selectionManager.clearSelection();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if a row is selected\r\n   * @param {String} rowId - Row ID to check\r\n   * @returns {Boolean} True if row is selected\r\n   */\r\n  isRowSelected(rowId) {\r\n    return this.selectionManager ? this.selectionManager.isRowSelected(rowId) : false;\r\n  }\r\n\r\n  /**\r\n   * Get selection count\r\n   * @returns {Number} Number of selected rows\r\n   */\r\n  getSelectionCount() {\r\n    return this.selectionManager ? this.selectionManager.getSelectionCount() : 0;\r\n  }\r\n\r\n  /**\r\n   * Enable selection\r\n   */\r\n  enableSelection() {\r\n    if (this.selectionManager) {\r\n      this.selectionManager.enable();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Disable selection\r\n   */\r\n  disableSelection() {\r\n    if (this.selectionManager) {\r\n      this.selectionManager.disable();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set selection mode\r\n   * @param {String} mode - 'single' or 'multi'\r\n   */\r\n  setSelectionMode(mode) {\r\n    if (this.selectionManager) {\r\n      this.selectionManager.setMode(mode);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Select all rows (currently visible/filtered rows)\r\n   * This will select all rows that are currently visible based on applied filters and search\r\n   * @returns {Number} Number of rows selected\r\n   */\r\n  selectAllRows() {\r\n    if (!this.selectionManager) {\r\n      console.warn('TablixJS: Selection is not enabled. Set selection.enabled to true in options.');\r\n      return 0;\r\n    }\r\n\r\n    // Get currently visible/filtered data\r\n    const allData = this.getData();\r\n    \r\n    if (allData.length === 0) {\r\n      console.warn('TablixJS: No rows available to select.');\r\n      return 0;\r\n    }\r\n\r\n    // Extract all IDs from current data\r\n    const dataIdKey = this.options.selection.dataIdKey || 'id';\r\n    const allIds = allData.map(row => String(row[dataIdKey]));\r\n\r\n    // Select all rows\r\n    this.selectionManager.selectRows(allIds);\r\n\r\n    // Trigger custom event for select all action\r\n    this.eventManager.trigger('selectAll', { \r\n      selectedIds: allIds, \r\n      selectedData: allData,\r\n      count: allData.length \r\n    });\r\n\r\n    return allData.length;\r\n  }\r\n\r\n  // ===== LOCALIZATION API =====\r\n\r\n  /**\r\n   * Get localized string by key\r\n   * @param {string} key - Translation key (e.g., 'pagination.next')\r\n   * @param {Object} params - Parameters to substitute in the translation\r\n   * @returns {string} Localized string\r\n   */\r\n  t(key, params = {}) {\r\n    return this.localization.t(key, params);\r\n  }\r\n\r\n  /**\r\n   * Set the current language\r\n   * @param {string} language - Language code (e.g., 'en', 'fr', 'es')\r\n   */\r\n  setLanguage(language) {\r\n    // Close any open filter dropdowns before changing language\r\n    if (this.filterUI && this.filterUI.activeDropdown) {\r\n      this.filterUI.closeAllDropdowns();\r\n    }\r\n    \r\n    this.localization.setLanguage(language);\r\n    this.options.language = language;\r\n    \r\n    // Ensure language translations are available\r\n    this.ensureLanguageTranslations(language);\r\n    \r\n    // Re-render table to apply new translations\r\n    this.refreshTable();\r\n  }\r\n\r\n  /**\r\n   * Ensure language translations are loaded\r\n   * @private\r\n   * @param {string} language - Language code\r\n   */\r\n  ensureLanguageTranslations(language) {\r\n    // If translations are already available, no need to reload\r\n    if (this.localization.hasLanguage(language)) {\r\n      return;\r\n    }\r\n    \r\n    // Auto-load translations for common languages\r\n    const languageLoaders = {\r\n      'fr': () => frenchTranslations,\r\n      'es': () => spanishTranslations,\r\n      'sr': () => serbianTranslations\r\n    };\r\n    \r\n    if (languageLoaders[language]) {\r\n      try {\r\n        const translations = languageLoaders[language]();\r\n        this.localization.addTranslations(language, translations);\r\n        console.log(`TablixJS: Auto-loaded ${language} translations`);\r\n      } catch (error) {\r\n        console.warn(`TablixJS: Failed to auto-load ${language} translations:`, error);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add translations for a specific language\r\n   * @param {string} language - Language code\r\n   * @param {Object} translations - Translations object\r\n   */\r\n  addTranslations(language, translations) {\r\n    this.localization.addTranslations(language, translations);\r\n    // If we just added translations for the current language, re-render\r\n    if (language === this.localization.getCurrentLanguage()) {\r\n      this.refreshTable();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add a complete language pack (convenience method for developers)\r\n   * This method helps developers add a new language with all required translations\r\n   * @param {string} language - Language code (e.g., 'de', 'it', 'pt')\r\n   * @param {Object} translations - Complete translations object\r\n   * @param {boolean} setAsCurrent - Whether to immediately set this as the current language\r\n   */\r\n  addLanguagePack(language, translations, setAsCurrent = false) {\r\n    // Add the translations\r\n    this.addTranslations(language, translations);\r\n    \r\n    // Optionally set as current language\r\n    if (setAsCurrent) {\r\n      this.setLanguage(language);\r\n    }\r\n    \r\n    console.log(`TablixJS: Language pack '${language}' added successfully`);\r\n  }\r\n\r\n  /**\r\n   * Get current language\r\n   * @returns {string} Current language code\r\n   */\r\n  getCurrentLanguage() {\r\n    return this.localization.getCurrentLanguage();\r\n  }\r\n\r\n  /**\r\n   * Get available languages\r\n   * @returns {Array<string>} Array of available language codes\r\n   */\r\n  getAvailableLanguages() {\r\n    return this.localization.getAvailableLanguages();\r\n  }\r\n\r\n  /**\r\n   * Check if a language is available\r\n   * @param {string} language - Language code to check\r\n   * @returns {boolean} True if language is available\r\n   */\r\n  hasLanguage(language) {\r\n    return this.localization.hasLanguage(language);\r\n  }\r\n\r\n  /**\r\n   * Format number using current locale\r\n   * @param {number} number - Number to format\r\n   * @param {Object} options - Formatting options\r\n   * @returns {string} Formatted number\r\n   */\r\n  formatNumber(number, options = {}) {\r\n    return this.localization.formatNumber(number, options);\r\n  }\r\n\r\n  /**\r\n   * Format date using current locale\r\n   * @param {Date|string|number} date - Date to format\r\n   * @param {Object} options - Formatting options\r\n   * @returns {string} Formatted date\r\n   */\r\n  formatDate(date, options = {}) {\r\n    return this.localization.formatDate(date, options);\r\n  }\r\n\r\n  /**\r\n   * Destroy the table and clean up all resources\r\n   */\r\n  destroy() {\r\n    // Clean up virtual scrolling\r\n    if (this.virtualScrollManager) {\r\n      this.virtualScrollManager.destroy();\r\n    }\r\n\r\n    // Clean up other managers\r\n    if (this.selectionManager) {\r\n      this.selectionManager.destroy && this.selectionManager.destroy();\r\n    }\r\n\r\n    if (this.searchManager) {\r\n      this.searchManager.destroy && this.searchManager.destroy();\r\n    }\r\n\r\n    if (this.filterManager) {\r\n      this.filterManager.destroy && this.filterManager.destroy();\r\n    }\r\n\r\n    if (this.sortingManager) {\r\n      this.sortingManager.destroy && this.sortingManager.destroy();\r\n    }\r\n\r\n    if (this.paginationManager) {\r\n      this.paginationManager.destroy && this.paginationManager.destroy();\r\n    }\r\n\r\n    // Clear container\r\n    if (this.container) {\r\n      this.container.innerHTML = '';\r\n    }\r\n\r\n    // Clear references\r\n    this.virtualScrollManager = null;\r\n    this.selectionManager = null;\r\n    this.searchManager = null;\r\n    this.filterManager = null;\r\n    this.sortingManager = null;\r\n    this.paginationManager = null;\r\n    this.dataManager = null;\r\n    this.renderer = null;\r\n    this.eventManager = null;\r\n  }\r\n\r\n  /**\r\n   * Destroy table and clean up event listeners\r\n   */\r\n  destroy() {\r\n    // Clean up any event listeners\r\n    const paginationContainer = this.container.querySelector('.tablix-pagination');\r\n    if (paginationContainer) {\r\n      paginationContainer.removeEventListener('click', this._paginationClickHandler);\r\n    }\r\n\r\n    // Destroy managers\r\n    if (this.selectionManager) {\r\n      this.selectionManager.destroy();\r\n    }\r\n\r\n    // Clear container\r\n    this.container.innerHTML = '';\r\n    \r\n    // Clear references\r\n    this.dataManager = null;\r\n    this.renderer = null;\r\n    this.eventManager = null;\r\n    this.paginationManager = null;\r\n    this.sortingManager = null;\r\n    this.selectionManager = null;\r\n  }\r\n}","import Table from './core/Table.js';\r\n\r\n// Export main Table class as default\r\nexport default Table;\r\n\r\n// Named exports for convenience\r\nexport { Table };\r\n\r\n// Version info\r\nexport const version = '0.1.0';\r\n"],"names":["DataManager","constructor","table","data","originalData","filteredData","currentFilters","currentSorts","serverTotalRows","getData","setData","paginationManager","updatePaginationInfo","setServerData","totalRows","getTotalRows","length","applyFilter","criteria","Object","keys","filter","item","entries","every","key","value","itemValue","toLowerCase","searchValue","includes","resetToFirstPage","setFilteredData","applySorting","sorts","sortingManager","_applySorting","sort","a","b","column","direction","aVal","bVal","comparison","clearFilters","clearSorting","getPageData","page","pageSize","start","slice","Renderer","renderTable","virtualMode","columns","columnManager","getColumns","options","controlsOptions","controls","isVirtualScrollEnabled","virtualScrollManager","isEnabled","preservedSearchValue","searchInputHadFocus","cursorPosition","existingSearchInput","container","querySelector","document","activeElement","selectionStart","selectionEnabled","selectionManager","enabled","selectionAttributes","mode","html","position","renderControls","containerHeight","virtualScroll","forEach","col","isSortable","_isColumnSortable","sortDirection","_getSortDirection","name","sortClass","sortDirectionClass","title","t","row","index","globalIndex","currentPage","cell","renderedCell","result","formatCellValue","isHtml","escapeHtml","renderer","innerHTML","newSearchInput","renderPagination","bindControlEvents","searchManager","bindEvents","bindSortEvents","bindRowClickEvents","filterUI","renderFilterIcons","requestAnimationFrame","focus","setSelectionRange","eventManager","trigger","paginationContainer","info","getInfo","undefined","totalPages","showPageSizes","startRow","endRow","pageSizeOptions","size","selected","showFirstLast","disabled","showPrevNext","hasPrevPage","showPageNumbers","pageNumbers","getPageNumbers","active","hasNextPage","isLoading","bindPaginationEvents","addEventListener","e","target","classList","contains","preventDefault","parseInt","dataset","isNaN","goToPage","error","console","pageSizeSelect","newPageSize","changePageSize","text","div","createElement","textContent","toString","renderLoading","renderError","message","searchOptions","search","placeholder","pagination","currentPageSize","refresh","placeholderText","wrapper","action","firstPage","prevPage","nextPage","lastPage","handleRefresh","handleExport","onRefresh","newData","loadData","refreshTable","csv","map","join","values","Date","JSON","stringify","replace","blob","Blob","type","url","URL","createObjectURL","href","download","body","appendChild","click","removeChild","revokeObjectURL","format","headerRow","th","closest","columnName","toggleSort","tbody","globalRowIndex","rowIndex","localRowIndex","currentData","getCurrentPageData","rowData","originalEvent","dataManager","updateSortIndicators","currentSort","headers","querySelectorAll","isSorted","remove","indicator","arrow","add","setAttribute","removeAttribute","isColumnSortable","getSortDirection","EventManager","events","on","event","callback","push","off","indexOf","splice","clear","payload","cb","PaginationManager","maxPageNumbers","serverDataLoader","init","Math","ceil","getClientPageData","getServerPageData","end","pageNumber","targetPage","max","min","oldPage","stateManager","updatePagination","newPage","oldPageSize","currentRow","floor","maxPages","pages","i","half","unshift","setEnabled","setMode","SortingManager","serverSortLoader","defaultSortType","caseSensitive","nullsFirst","sortOrder","sortTypes","auto","_autoSort","bind","string","_stringSort","number","_numberSort","date","_dateSort","boolean","_booleanSort","beforeSortData","updateSort","resetPage","currentDirection","currentIndex","nextDirection","_sortClient","_sortServer","warn","find","_compareValues","sortFunction","sortType","numA","parseFloat","numB","dateA","dateB","isDateLike","str","test","String","strA","trim","strB","localeCompare","sensitivity","boolA","Boolean","boolB","filters","getSortState","setOptions","newOptions","sortable","ColumnManager","formatters","Map","supportedFormats","initializeColumns","prepareColumn","compileFormatters","prepared","Error","formatter","createFormatter","set","locale","formatOptions","formatText","formatDate","formatCurrency","currency","formatNumber","formatPercent","columnObj","getColumn","get","formattedValue","getTime","Intl","DateTimeFormat","numericValue","Number","style","NumberFormat","registerFormat","formatType","formatterFactory","log","getSupportedFormats","FilterManager","serverFilterLoader","debounceDelay","showBadges","showTooltips","columnFilters","operators","label","apply","filterValue","startsWith","endsWith","debounceTimer","openDropdowns","Set","filterConfig","validateFilterConfig","beforeFilterData","getActiveFilters","config","isActive","isFilterActive","updateFilters","_filterClient","updateFilterIndicators","activeFilters","clearFilter","has","delete","clearAllFilters","filterState","getColumnUniqueValues","hasComplexData","Array","from","getColumnFilter","hasColumnFilter","isArray","conditions","cond","operator","some","_testRowAgainstFilter","_filterServer","cellValue","cellValueStr","_valueToString","condition","header","hasFilter","filterIndicator","_updateFilterBadge","badge","badgeText","activeConditions","className","registerOperator","getOperators","FilterUI","filterManager","activeDropdown","handleDocumentClick","handleFilterIconClick","_hasComplexData","destroy","removeEventListener","closeAllDropdowns","thContent","filterIcon","stopPropagation","sortIndicator","insertBefore","nextSibling","dropdown","createFilterDropdown","showDropdown","renderDropdownContent","bindDropdownEvents","currentFilter","renderValueFilterPanel","renderConditionFilterPanel","uniqueValues","selectedValues","isChecked","valueId","renderConditionRow","needsValue","op","tab","tabType","switchTab","bindValueFilterEvents","bindConditionFilterEvents","valuePanel","searchInput","searchTimeout","clearTimeout","setTimeout","filterValueList","selectAllCheckbox","toggleSelectAll","checked","checkbox","updateSelectAllState","conditionPanel","addButton","addCondition","bindConditionRowEvents","select","valueInput","parentElement","button","conditionRow","conditionsContainer","operatorSelect","toggle","panel","searchTerm","items","term","matches","display","checkboxes","visibleCheckboxes","checkedCount","indeterminate","newIndex","children","conditionHtml","insertAdjacentHTML","newCondition","lastElementChild","removeButton","activeTab","collectValueFilter","collectConditionFilter","conditionRows","top","left","visibility","offsetHeight","triggerRect","getBoundingClientRect","dropdownRect","window","scrollX","bottom","scrollY","width","innerWidth","height","innerHeight","SearchManager","searchDelay","searchColumns","minLength","currentSearchTerm","handleSearchInput","handleSearchClear","source","performSearch","searchClear","clearSearch","updateClearButtonVisibility","previousTerm","hadFocus","beforeSearchData","willSearch","updateSearch","isServerMode","_isServerMode","filterData","afterSearchData","resultsCount","totalCount","isSearchActive","searchPerformed","getSearchableColumns","stringValue","updateInputValue","setSearchTerm","getSearchTerm","getSearchInfo","configure","oldOptions","getConfiguration","SelectionManager","selectedRows","lastSelectedRow","rowIdMap","dataIdKey","dragSelection","startRowIndex","currentRowIndex","startRowId","originalSelection","isDragging","dragThreshold","eventListeners","eventListenersSetup","setupEventListeners","handleRowClick","setupDragSelection","clearSelection","updateSelectionAfterDataChange","updateUI","rowId","getRowId","hasOriginalEvent","ctrlKey","shiftKey","metaKey","timestamp","now","beforeSelectEvent","currentSelection","isCtrlClick","isShiftClick","isDragSelection","handleSingleSelection","handleMultiSelection","afterSelectEvent","selectedData","getSelectedData","selectionSize","handleRangeSelection","endRowId","fullData","getFullData","startIndex","findIndex","endIndex","minIndex","maxIndex","tableElement","startX","startY","clientX","clientY","deltaX","abs","deltaY","startDragSelection","updateDragSelection","completeDragSelection","cancelDragSelection","tableWrapper","startRowData","dragStart","applyDragSelection","dragComplete","resetDragSelection","createRowHash","hash","char","charCodeAt","allRows","hasVirtualIndexes","hasAttribute","virtualIndex","getAttribute","allDataRowIds","newSelection","allData","getSelectedIds","selectRows","rowIds","ids","id","deselectRows","hadSelection","isRowSelected","isRowSelectedByData","getSelectionCount","enable","disable","oldMode","lastSelected","VirtualScrollManager","buffer","rowHeight","throttleDelay","scrollContainer","tableBody","topSpacer","bottomSpacer","visibleStart","visibleEnd","renderedStart","renderedEnd","performanceData","renderTimes","scrollUpdates","lastMeasurement","throttledScrollHandler","throttle","handleScroll","immediateScrollHandler","updateScheduled","pendingUpdate","lastScrollTime","scrollVelocity","renderedData","setupScrollContainer","detectRowHeight","calculateViewport","scheduleUpdate","handleScrollImmediate","passive","handleScrollStart","handleScrollEnd","handleResize","setupEventDelegation","setupSelectionListeners","rowClickHandler","justFinishedDrag","eventType","element","updateSelectionStates","setupVirtualDragSelection","rowHoverHandler","createSpacers","existingTop","existingBottom","cssText","firstChild","sampleRow","renderSingleRow","rect","scrollTop","visibleRowCount","updateSpacers","topHeight","bottomHeight","performance","lastScrollTop","timeDelta","scrollDelta","isScrollbarDragging","scrollDragInterval","setInterval","clearInterval","isDragSelecting","dragStartIndex","dragStartX","dragStartY","applyVirtualDragSelection","handleMouseUp","endRowData","update","startTime","renderVisibleRows","endTime","trackPerformance","existingRows","fragment","createDocumentFragment","handleImageLoading","rows","images","img","complete","cloneNode","src","handleLoad","opacity","handleError","transition","originalIndex","tr","isSelected","td","rendered","updateData","scrollToRow","targetScrollTop","getVisibleRange","getRenderedData","renderTime","shift","getPerformanceStats","times","avg","reduce","averageRenderTime","toFixed","maxRenderTime","minRenderTime","visibleRows","renderedRows","func","limit","inThrottle","args","arguments","context","debug","Localization","currentLanguage","translations","fallbackLanguage","addTranslations","getDefaultEnglishTranslations","setLanguage","language","languageCode","existing","params","translation","getTranslationFromLanguage","substituteParameters","languageTranslations","split","current","k","regex","RegExp","getCurrentLanguage","getAvailableLanguages","hasLanguage","getAllTranslations","removeLanguage","clearTranslations","fallbackTranslations","minimumFractionDigits","maximumFractionDigits","getLocaleCode","fallbackNumberFormat","dateObj","toLocaleDateString","languageToLocaleMap","symbol","pluralize","count","singularKey","pluralKey","StateManager","state","isInitialized","getState","pageState","sortState","updateLoading","getServerParams","markInitialized","isReady","reset","frenchTranslations","spanishTranslations","serbianTranslations","Table","sorting","filtering","export","selection","localization","lang","_loadServerData","loadedData","dataToRender","_fetchFromUrl","fetch","response","ok","status","statusText","json","getPaginationInfo","setPaginationEnabled","setPaginationMode","clearEvents","getOriginalData","getOptions","enableSelection","disableSelection","setSelectionMode","selectAllRows","allIds","selectedIds","ensureLanguageTranslations","languageLoaders","fr","es","sr","addLanguagePack","setAsCurrent","_paginationClickHandler","version"],"mappings":"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"}