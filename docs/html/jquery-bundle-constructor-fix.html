<h1 id="tablixjs-jquery-bundle-constructor-error-fix">TablixJS jQuery Bundle Constructor Error Fix</h1>
<h2 id="problem-summary">Problem Summary</h2>
<p>The jQuery bundled version (<code>tablix.jquery.js</code>) was experiencing a constructor error where users got:</p>
<pre><code>TypeError: TablixJS.Table <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> a <span class="hljs-function"><span class="hljs-keyword">constructor</span></span>
</code></pre><p>This occurred because the jQuery wrapper was trying to access the global <code>TablixJS.Table</code> class before it was properly exposed in the UMD bundle execution order.</p>
<h2 id="root-cause">Root Cause</h2>
<ol>
<li><strong>Execution Order Issue</strong>: In the UMD bundle, ES6 import hoisting caused the jQuery wrapper to execute before global variables were set</li>
<li><strong>Global Dependency</strong>: The original jQuery wrapper relied on <code>window.TablixJS</code> being available</li>
<li><strong>Timing Problem</strong>: jQuery wrapper checked for Table class availability before the bundle had finished exposing it globally</li>
</ol>
<h2 id="solution-implemented">Solution Implemented</h2>
<h3 id="1-created-bundled-specific-jquery-wrapper">1. Created Bundled-Specific jQuery Wrapper</h3>
<ul>
<li><strong>File</strong>: <code>src/jquery/tablixjs-jquery-bundled.js</code></li>
<li><strong>Approach</strong>: Direct Table class import instead of global dependency</li>
<li><strong>Key Change</strong>: <code>import Table from &#39;../core/Table.js&#39;</code> instead of checking <code>window.TablixJS</code></li>
</ul>
<h3 id="2-function-based-initialization">2. Function-Based Initialization</h3>
<ul>
<li><strong>Pattern</strong>: Exported <code>initializeJQueryWrapper()</code> function</li>
<li><strong>Benefit</strong>: Explicit control over when jQuery plugin registration occurs</li>
<li><strong>Result</strong>: No more reliance on global variable timing</li>
</ul>
<h3 id="3-updated-bundle-entry-point">3. Updated Bundle Entry Point</h3>
<ul>
<li><strong>File</strong>: <code>src/jquery/index.js</code></li>
<li><strong>Change</strong>: Import and call <code>initializeJQueryWrapper()</code> function</li>
<li><strong>Result</strong>: Guaranteed execution order regardless of ES6 import hoisting</li>
</ul>
<h2 id="files-changed">Files Changed</h2>
<ol>
<li><p><strong>src/jquery/tablixjs-jquery-bundled.js</strong> (New)</p>
<ul>
<li>Direct Table class import</li>
<li>Function-based jQuery plugin registration</li>
<li>No global dependencies</li>
</ul>
</li>
<li><p><strong>src/jquery/index.js</strong> (Modified)</p>
<ul>
<li>Import bundled wrapper function</li>
<li>Explicit function call to ensure execution</li>
<li>Maintained global exposure for compatibility</li>
</ul>
</li>
</ol>
<h2 id="verification">Verification</h2>
<p>The fix has been verified with:</p>
<ul>
<li>✅ Function-based initialization present</li>
<li>✅ Direct Table class instantiation</li>
<li>✅ No global dependency error checks</li>
<li>✅ jQuery plugin registration working</li>
<li>✅ Bundle size increase minimal (~600 characters)</li>
</ul>
<h2 id="testing">Testing</h2>
<ol>
<li><strong>Automated</strong>: <code>node test/verify-jquery-bundle.js</code></li>
<li><strong>Browser</strong>: Open <code>examples/jquery-bundle-fix-test.html</code></li>
<li><strong>Console</strong>: Should see &quot;TablixJS jQuery plugin initialized successfully (bundled version)&quot;</li>
</ol>
<h2 id="benefits">Benefits</h2>
<ol>
<li><strong>Eliminates Constructor Errors</strong>: Direct Table class access prevents timing issues</li>
<li><strong>Maintains Compatibility</strong>: All existing jQuery plugin APIs work unchanged</li>
<li><strong>Preserves Performance</strong>: Minimal bundle size impact</li>
<li><strong>Future-Proof</strong>: No longer dependent on global variable timing</li>
</ol>
<h2 id="usage-unchanged">Usage Unchanged</h2>
<p>Users can continue using the jQuery plugin exactly as before:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// Bundled version usage (FIXED)</span>
$(<span class="hljs-string">'#table'</span>).tablixJS({
<span class="hljs-symbol">  data:</span> myData,
<span class="hljs-symbol">  pagination:</span> { <span class="hljs-string">enabled:</span> <span class="hljs-literal">true</span> }
});
</code></pre>
<p>The fix is transparent to end users - no API changes required.</p>
