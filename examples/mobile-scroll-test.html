<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TablixJS - Mobile Horizontal Scroll Test</title>
    <link rel="stylesheet" href="../src/styles/tablix.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            margin-top: 0;
        }
        
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: #fafafa;
        }
        
        .test-section h2 {
            margin-top: 0;
            color: #555;
            font-size: 1.2em;
        }
        
        .instructions {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            border-left: 4px solid #2196F3;
        }
        
        .instructions h3 {
            margin-top: 0;
            color: #1976D2;
        }
        
        .instructions ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .mobile-simulator {
            max-width: 375px;
            margin: 20px auto;
            border: 8px solid #333;
            border-radius: 20px;
            padding: 10px;
            background: white;
        }
        
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        /* Resize container for testing */
        .resize-container {
            resize: horizontal;
            overflow: auto;
            min-width: 300px;
            max-width: 100%;
            border: 2px dashed #999;
            padding: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üì± TablixJS Mobile Horizontal Scroll Test</h1>
        
        <div class="instructions">
            <h3>Testing Instructions:</h3>
            <ul>
                <li><strong>Desktop:</strong> Resize your browser window to mobile width (< 768px) or use browser dev tools device emulation</li>
                <li><strong>Mobile:</strong> View this page on an actual mobile device</li>
                <li><strong>Expected Behavior:</strong> The table should scroll horizontally while controls stay in view</li>
                <li><strong>Drag Handle:</strong> Use the resize handle below to simulate different screen sizes</li>
            </ul>
        </div>
        
        <div class="status success">
            ‚úÖ Table wrapper with horizontal scrolling is enabled
        </div>
        
        <!-- Test 1: Wide Table with Many Columns -->
        <div class="test-section">
            <h2>Test 1: Wide Table (Many Columns)</h2>
            <p>This table has many columns that will overflow on mobile devices. Only the table should scroll horizontally.</p>
            
            <div class="resize-container">
                <div id="table1"></div>
            </div>
        </div>
        
        <!-- Test 2: Table with Controls -->
        <div class="test-section">
            <h2>Test 2: Table with Search & Pagination</h2>
            <p>Controls should remain accessible while table scrolls horizontally.</p>
            
            <div class="mobile-simulator">
                <div id="table2"></div>
            </div>
        </div>
        
        <!-- Test 3: Dark Theme -->
        <div class="test-section">
            <h2>Test 3: Dark Theme Compatibility</h2>
            <p>Testing that horizontal scroll works with dark theme.</p>
            
            <div class="resize-container" data-theme="dark">
                <div id="table3"></div>
            </div>
        </div>
        
        <div class="status info">
            <strong>Note:</strong> The table wrapper (.tablix-table-wrapper) now has overflow-x: auto, allowing horizontal scrolling on mobile devices while keeping controls visible.
        </div>
    </div>
    
    <script type="module">
        import Table from '../src/core/Table.js';
        
        // Sample data with many columns for testing
        const wideData = [
            { id: 1, name: 'John Doe', email: 'john@example.com', phone: '555-0101', address: '123 Main St', city: 'New York', state: 'NY', zip: '10001', country: 'USA', department: 'Sales', salary: '$75,000' },
            { id: 2, name: 'Jane Smith', email: 'jane@example.com', phone: '555-0102', address: '456 Oak Ave', city: 'Los Angeles', state: 'CA', zip: '90001', country: 'USA', department: 'Marketing', salary: '$82,000' },
            { id: 3, name: 'Bob Johnson', email: 'bob@example.com', phone: '555-0103', address: '789 Pine Rd', city: 'Chicago', state: 'IL', zip: '60601', country: 'USA', department: 'Engineering', salary: '$95,000' },
            { id: 4, name: 'Alice Williams', email: 'alice@example.com', phone: '555-0104', address: '321 Elm St', city: 'Houston', state: 'TX', zip: '77001', country: 'USA', department: 'HR', salary: '$68,000' },
            { id: 5, name: 'Charlie Brown', email: 'charlie@example.com', phone: '555-0105', address: '654 Maple Dr', city: 'Phoenix', state: 'AZ', zip: '85001', country: 'USA', department: 'Finance', salary: '$88,000' },
        ];
        
        const wideColumns = [
            { name: 'id', title: 'ID', width: '60px' },
            { name: 'name', title: 'Full Name', width: '150px' },
            { name: 'email', title: 'Email Address', width: '200px' },
            { name: 'phone', title: 'Phone Number', width: '120px' },
            { name: 'address', title: 'Street Address', width: '180px' },
            { name: 'city', title: 'City', width: '120px' },
            { name: 'state', title: 'State', width: '80px' },
            { name: 'zip', title: 'ZIP Code', width: '100px' },
            { name: 'country', title: 'Country', width: '100px' },
            { name: 'department', title: 'Department', width: '130px' },
            { name: 'salary', title: 'Salary', width: '110px' }
        ];
        
        // Test 1: Wide table with many columns
        try {
            const table1 = new Table('#table1', {
                data: wideData,
                columns: wideColumns,
                pagination: {
                    enabled: false
                }
            });
            console.log('‚úÖ Table 1 initialized successfully');
        } catch (error) {
            console.error('‚ùå Table 1 failed:', error);
        }
        
        // Test 2: Table with controls and pagination
        try {
            const table2 = new Table('#table2', {
                data: wideData,
                columns: wideColumns,
                pagination: {
                    enabled: true,
                    pageSize: 3
                },
                search: {
                    enabled: true,
                    placeholder: 'Search table...'
                },
                controls: {
                    enabled: true,
                    position: 'top',
                    search: true,
                    refresh: true
                }
            });
            console.log('‚úÖ Table 2 initialized successfully');
        } catch (error) {
            console.error('‚ùå Table 2 failed:', error);
        }
        
        // Test 3: Dark theme
        try {
            const table3 = new Table('#table3', {
                data: wideData.slice(0, 4),
                columns: wideColumns,
                pagination: {
                    enabled: false
                }
            });
            console.log('‚úÖ Table 3 (dark theme) initialized successfully');
        } catch (error) {
            console.error('‚ùå Table 3 failed:', error);
        }
        
        // Log wrapper element for inspection
        setTimeout(() => {
            const wrapper = document.querySelector('.tablix-table-wrapper');
            if (wrapper) {
                console.log('‚úÖ Table wrapper found:', wrapper);
                console.log('Wrapper styles:', {
                    overflowX: getComputedStyle(wrapper).overflowX,
                    width: getComputedStyle(wrapper).width
                });
            } else {
                console.error('‚ùå Table wrapper not found!');
            }
        }, 100);
    </script>
</body>
</html>
